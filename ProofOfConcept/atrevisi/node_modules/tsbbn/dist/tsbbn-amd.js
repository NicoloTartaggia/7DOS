define("graph", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class Variable {
        constructor(id, name, _values) {
            this.id = id;
            this.name = name;
            this._values = _values;
            this.values = [..._values];
        }
    }
    exports.Variable = Variable;
    class BGraph {
        constructor() {
            this.nodes = new Map();
            this.edges = new Map();
        }
        getNeighbors(id) {
            let keys = Array.from(this.edges.keys());
            let neighbors1 = keys.filter(key => this.edges.get(key).has(id));
            let neighbors2 = this.edges.has(id) ? Array.from(this.edges.get(id).values()) : [];
            let neighbors = neighbors1.concat(neighbors2);
            return new Set(neighbors);
        }
        getNode(id) {
            return this.nodes.get(id);
        }
        getNodes() {
            return Array.from(this.nodes.keys()).map(id => this.nodes.get(id));
        }
        getEdges() {
            let keys = Array.from(this.edges.keys());
            let stream = keys.map(lhsId => {
                let edges = Array.from(this.edges.get(lhsId))
                    .map(rhsId => {
                    let edgeType = EdgeType.UNDIRECTED;
                    let leftId = lhsId;
                    let rightId = rhsId;
                    if (!this.edges.get(rhsId).has(lhsId)) {
                        edgeType = EdgeType.DIRECTED;
                    }
                    else {
                        leftId = Math.min(lhsId, rhsId);
                        rightId = leftId === lhsId ? rhsId : lhsId;
                    }
                    return new BEdge(new BNode(leftId), new BNode(rightId), edgeType);
                });
                return edges;
            });
            return this.removeDuplicates(this.flatten(stream));
        }
        addNode(node) {
            if (!this.nodes.has(node.id)) {
                this.nodes.set(node.id, node);
            }
            if (!this.edges.has(node.id)) {
                this.edges.set(node.id, new Set());
            }
            return this;
        }
        addEdge(edge) {
            let lhs = edge.lhs;
            let rhs = edge.rhs;
            this.addNode(lhs);
            this.addNode(rhs);
            if (this.shouldAdd(edge)) {
                let left = lhs.id;
                let right = rhs.id;
                if (EdgeType.UNDIRECTED === edge.type) {
                    this.edges.get(left).add(right);
                    this.edges.get(right).add(left);
                }
                else {
                    this.edges.get(left).add(right);
                }
            }
            return this;
        }
        edgeExists(id1, id2) {
            if (this.edges.has(id1) && this.edges.get(id1).has(id2)) {
                return true;
            }
            if (this.edges.has(id2) && this.edges.get(id2).has(id1)) {
                return true;
            }
            return false;
        }
        removeNode(id) {
            this.nodes.delete(id);
            this.edges.delete(id);
            this.edges.forEach((v, k) => v.delete(id));
        }
        shouldAdd(edge) {
            let lhs = edge.lhs;
            let rhs = edge.rhs;
            if (lhs.id === rhs.id) {
                return false;
            }
            if (!this.edges.get(lhs.id).has(rhs.id)) {
                if (!this.edges.get(rhs.id).has(lhs.id)) {
                    return true;
                }
            }
            return false;
        }
        flatten(edges) {
            let list = [];
            for (let i = 0; i < edges.length; i++) {
                for (let j = 0; j < edges[i].length; j++) {
                    list.push(edges[i][j]);
                }
            }
            return list;
        }
        removeDuplicates(edges) {
            let map = new Map();
            let arr = [];
            edges.forEach(e => {
                let key = e.toString();
                if (!map.has(key)) {
                    map.set(key, e);
                    arr.push(e);
                }
            });
            return arr;
        }
    }
    exports.BGraph = BGraph;
    class BNode {
        constructor(id) {
            this.id = id;
            this.metadata = new Map();
        }
        addMetadata(key, val) {
            this.metadata.set(key, val);
            return this;
        }
    }
    exports.BNode = BNode;
    class BbnNode extends BNode {
        constructor(variable, probs = []) {
            super(variable.id);
            this.variable = variable;
            this.probs = probs;
        }
        getWeight() {
            return this.variable.values.length;
        }
        toString() {
            let s = this.variable.name + ' {';
            s += this.variable.values.join(',');
            s += '}';
            return s;
        }
    }
    exports.BbnNode = BbnNode;
    class Clique extends BNode {
        constructor(nodes) {
            super(IdUtil.hashOfArr(nodes.map(n => '' + n.id)));
            this.nodes = nodes;
            this._marked = false;
        }
        isMarked() {
            return this._marked;
        }
        mark() {
            this._marked = true;
        }
        unmark() {
            this._marked = false;
        }
        nodesMinus(nodes) {
            let ids = this.nodes.map(n => n.id);
            return nodes.filter(n => ids.indexOf(n.id) === -1);
        }
        isSuperset(that) {
            let s1 = this.nodes.map(n => n.id);
            let s2 = new Set(that.nodes.map(n => n.id));
            let s3 = new Set(s1.filter(id => s2.has(id)));
            if (s2.size === s3.size) {
                // console.log(this.toString() + ' is superset of ' + that.toString());
                return true;
            }
            // console.log(this.toString() + ' is NOT superset of ' + that.toString());
            return false;
        }
        getWeight() {
            let weight = 1;
            this.nodes.forEach(n => {
                weight = weight * n.getWeight();
            });
            return weight;
        }
        contains(id) {
            let result = this.nodes.find(n => n.id === id);
            if (result) {
                return true;
            }
            return false;
        }
        getSepSet(that) {
            return new SepSet(this, that);
        }
        toString() {
            return '(' +
                this.nodes
                    .map(n => n.variable.name)
                    .sort((a, b) => CompareUtil.strCompare(a, b))
                    .join('-') +
                ')';
        }
    }
    exports.Clique = Clique;
    class SepSet extends Clique {
        constructor(left, right) {
            super([]);
            this.left = left;
            this.right = right;
            let set2 = new Set(left.nodes.map(n => n.id));
            let set1 = new Set(right.nodes.filter(n => set2.has(n.id)).map(n => n.id));
            this.nodes = left.nodes.filter(n => set1.has(n.id));
            this.id = IdUtil.hashOfArr(this.nodes.map(n => '' + n.id));
        }
        getCost() {
            return this.left.getWeight() + this.right.getWeight();
        }
        getMass() {
            return this.nodes.length;
        }
        toString() {
            return '[' +
                this.nodes
                    .map(n => n.variable.name)
                    .sort((a, b) => CompareUtil.strCompare(a, b))
                    .join('-') +
                ']';
        }
    }
    exports.SepSet = SepSet;
    class BEdge {
        constructor(lhs, rhs, type = EdgeType.UNDIRECTED) {
            this.lhs = lhs;
            this.rhs = rhs;
            this.type = type;
        }
        toString() {
            let arrow = EdgeType.UNDIRECTED === this.type ? '--' : '->';
            let left = this.lhs.id;
            let right = this.rhs.id;
            if (EdgeType.UNDIRECTED === this.type) {
                left = Math.min(this.lhs.id, this.rhs.id);
                right = (this.lhs.id === left) ? this.rhs.id : this.lhs.id;
            }
            return left + arrow + right;
        }
    }
    exports.BEdge = BEdge;
    class JtEdge extends BEdge {
        constructor(sepSet) {
            super(sepSet.left, sepSet.right, EdgeType.UNDIRECTED);
            this.sepSet = sepSet;
        }
        toString() {
            return this.sepSet.left.toString() + '--' +
                this.sepSet.toString() + '--' +
                this.sepSet.right.toString();
        }
    }
    exports.JtEdge = JtEdge;
    var EdgeType;
    (function (EdgeType) {
        EdgeType[EdgeType["UNDIRECTED"] = 1] = "UNDIRECTED";
        EdgeType[EdgeType["DIRECTED"] = 2] = "DIRECTED";
    })(EdgeType = exports.EdgeType || (exports.EdgeType = {}));
    class Dag extends BGraph {
        constructor() {
            super();
        }
        getParents(id) {
            let keys = Array.from(this.edges.keys());
            let parents = keys.filter(key => this.edges.get(key).has(id));
            return new Set(parents);
        }
        getChildren(id) {
            return this.edges.get(id);
        }
        edgeExists(id1, id2) {
            if (this.edges.has(id1) && this.edges.get(id1).has(id2)) {
                return true;
            }
            return false;
        }
        shouldAdd(edge) {
            let parent = edge.lhs;
            let child = edge.rhs;
            if (parent.id === child.id) {
                return false;
            }
            if (!this.edges.get(parent.id).has(child.id)) {
                if (!this.edges.get(child.id).has(parent.id)) {
                    if (!(new DagPathDetector(this, child.id, parent.id)).exists()) {
                        return true;
                    }
                }
            }
            return false;
        }
    }
    exports.Dag = Dag;
    class Bbn extends Dag {
        shouldAdd(edge) {
            if (!(edge.lhs instanceof BbnNode) || !(edge.rhs instanceof BbnNode)) {
                return false;
            }
            return super.shouldAdd(edge);
        }
    }
    exports.Bbn = Bbn;
    class DagPathDetector {
        constructor(graph, start, stop) {
            this.seen = new Set();
            this.graph = graph;
            this.start = start;
            this.stop = stop;
        }
        exists() {
            if (this.start === this.stop) {
                return true;
            }
            return this.find(this.start);
        }
        find(id) {
            let children = this.graph.getChildren(id);
            if (children.has(this.stop)) {
                return true;
            }
            else {
                this.seen.add(id);
                for (let child of children) {
                    if (!this.seen.has(child) && this.find(child)) {
                        return true;
                    }
                }
            }
            return false;
        }
    }
    class Pdag extends BGraph {
        getParents(id) {
            let parents = Array.from(this.edges.keys())
                .filter(key => this.edges.get(key).has(id) && !this.edges.get(id).has(key));
            return new Set(parents);
        }
        getOutNodes(id) {
            let parents = this.getParents(id);
            let subset = Array.from(this.getNeighbors(id)).filter(item => !parents.has(item));
            return new Set(subset);
        }
        shouldAdd(edge) {
            let parent = edge.lhs;
            let child = edge.rhs;
            if (parent.id === child.id) {
                return false;
            }
            if (!this.edges.get(parent.id).has(child.id)) {
                if (!this.edges.get(child.id).has(parent.id)) {
                    if (!(new PdagPathDetector(this, child.id, parent.id)).exists()) {
                        return true;
                    }
                }
            }
            return false;
        }
    }
    exports.Pdag = Pdag;
    class PdagPathDetector {
        constructor(graph, start, stop) {
            this.seen = new Set();
            this.graph = graph;
            this.start = start;
            this.stop = stop;
        }
        exists() {
            if (this.start === this.stop) {
                return true;
            }
            return this.find(this.start);
        }
        find(id) {
            let outNodes = this.graph.getOutNodes(id);
            if (outNodes.has(this.stop)) {
                return true;
            }
            else {
                this.seen.add(id);
                for (let outNode of outNodes) {
                    if (!this.seen.has(outNode)) {
                        if (this.find(outNode)) {
                            return true;
                        }
                    }
                }
            }
            return false;
        }
    }
    class Ug extends BGraph {
        constructor() {
            super();
        }
    }
    exports.Ug = Ug;
    class JoinTree extends Ug {
        constructor() {
            super();
            this.potentials = new Map();
            this.evidences = new Map();
        }
        getBbnPotential(node) {
            let clique = node.metadata.get('parent.clique');
            return PotentialUtil.normalize(PotentialUtil.marginalizeFor(this, clique, [node]));
        }
        unmarkCliques() {
            this.getCliques().forEach(clique => clique.unmark());
        }
        getBbnNodes() {
            let nodes = new Map();
            this.getCliques().forEach(clique => {
                clique.nodes.forEach(node => nodes.set(node.id, node));
            });
            let bbnNodes = [];
            nodes.forEach((v, k) => bbnNodes.push(v));
            return bbnNodes;
        }
        getBbnNode(id) {
            let bbnNodes = this.getBbnNodes();
            for (let i = 0; i < bbnNodes.length; i++) {
                if (id === bbnNodes[i].id) {
                    return bbnNodes[i];
                }
            }
            return new BbnNode(new Variable(-1, '_dummy_', new Set()));
        }
        getBbnNodeByName(name) {
            return this.getBbnNodes().filter(n => n.variable.name === name)[0];
        }
        findCliquesWithNodeAndParents(id) {
            return this.getCliques()
                .filter(clique => {
                if (!(clique.contains(id))) {
                    return false;
                }
                let bbnNode = this.getBbnNode(id);
                if (bbnNode.metadata.has('parents')) {
                    let parents = bbnNode.metadata.get('parents');
                    for (let i = 0; i < parents.length; i++) {
                        let parent = parents[i];
                        if (!(clique.contains(parent.id))) {
                            return false;
                        }
                    }
                }
                return true;
            });
        }
        addPotential(clique, potential) {
            this.potentials.set(clique.id, potential);
            return this;
        }
        getCliques() {
            return this.getNodes()
                .filter(n => !(n instanceof SepSet))
                .map(n => n);
        }
        getSepSets() {
            return this.getNodes()
                .filter(n => (n instanceof SepSet))
                .map(n => n);
        }
        addEdge(edge) {
            if (!(edge instanceof JtEdge)) {
                return this;
            }
            let jtEdge = edge;
            let sepSet = jtEdge.sepSet;
            let lhs = jtEdge.lhs;
            let rhs = jtEdge.rhs;
            this.addNode(sepSet);
            this.addNode(lhs);
            this.addNode(rhs);
            if (this.shouldAdd(edge)) {
                this.edges.get(lhs.id).add(sepSet.id);
                this.edges.get(sepSet.id).add(lhs.id);
                this.edges.get(rhs.id).add(sepSet.id);
                this.edges.get(sepSet.id).add(rhs.id);
            }
            return this;
        }
        setListener(listener) {
            this.listener = listener;
        }
        getEvidence(node, value) {
            if (!this.evidences.has(node.id)) {
                this.evidences.set(node.id, new Map());
            }
            if (!this.evidences.get(node.id).has(value)) {
                let potentialEntry = new PotentialEntry();
                potentialEntry.add(node.id, value);
                potentialEntry.value = 1.0;
                let potential = new Potential();
                potential.addEntry(potentialEntry);
                this.evidences.get(node.id).set(value, potential);
            }
            return this.evidences.get(node.id).get(value);
        }
        unobserve(nodes) {
            let evidences = nodes.map(n => this.getUnobservedEvidence(n));
            this.updateEvidences(evidences);
            return this;
        }
        unobserveAll() {
            this.unobserve(this.getBbnNodes());
            return this;
        }
        updateEvidences(evidences) {
            evidences.forEach(e => e.validate());
            let change = this.getChangeType(evidences);
            evidences.forEach(evidence => {
                let node = evidence.node;
                let potentials = this.evidences.get(node.id);
                evidence.values.forEach((v, k) => {
                    let potential = potentials.get(k);
                    potential.entries[0].value = v;
                });
            });
            this.notifyListener(change);
            return this;
        }
        setObservation(evidence) {
            // only deal with observation types in this method
            if (EvidenceType.OBSERVATION !== evidence.type) {
                // console.log('evidence not observation type returning');
                return this;
            }
            // check to see if previous evidence was also observation
            // evidence that is observation type always has only one value that is 1
            let potentials = this.evidences.get(evidence.node.id);
            let pvalues = Array.from(potentials.keys())
                .filter(v => {
                let potential = potentials.get(v);
                let entry = potential.entries[0];
                let p = entry.value;
                if (p === 1.0) {
                    return true;
                }
                return false;
            });
            let cvalues = Array.from(evidence.values.keys())
                .filter(v => 1.0 === evidence.values.get(v));
            if (1 === pvalues.length) {
                // previous evidence was of type observation
                // both current and previous evidences are observation type
                // console.log('both previous and current evidences are of type observation');
                let lastValue = pvalues[0];
                let currValue = cvalues[0];
                if (lastValue === currValue) {
                    // if the last value is equal to the current value, unobserve it
                    // console.log(lastValue + ' equals ' + currValue + ' so will unobserve');
                    this.unobserve([evidence.node]);
                }
                else {
                    // console.log(lastValue + ' NOT equals ' + currValue + ' so will update evidence');
                    this.updateEvidences([evidence]);
                }
            }
            else {
                // console.log('number previous values === 1 was ' + pvalues.length + ' so will update evidence');
                this.updateEvidences([evidence]);
            }
            return this;
        }
        shouldAdd(edge) {
            let jtEdge = edge;
            let sepSet = jtEdge.sepSet;
            let lhs = jtEdge.lhs;
            let rhs = jtEdge.rhs;
            if (lhs.id === rhs.id) {
                // console.log('false: ' + jtEdge.toString());
                return false;
            }
            if (!(new JoinTreePathDetector(this, lhs.id, rhs.id)).exists()) {
                // console.log('true: ' +  jtEdge.toString());
                return true;
            }
            // console.log('false: ' + jtEdge.toString());
            return false;
        }
        getChangeType(evidences) {
            let changes = evidences.map(evidence => {
                let node = evidence.node;
                let potentials = this.evidences.get(node.id);
                let change = evidence.compare(potentials);
                return change;
            });
            let count = changes.filter(c => ChangeType.RETRACTION === c).length;
            if (count > 0) {
                return ChangeType.RETRACTION;
            }
            count = changes.filter(c => ChangeType.UPDATE === c).length;
            if (count > 0) {
                return ChangeType.UPDATE;
            }
            return ChangeType.NONE;
        }
        getUnobservedEvidence(node) {
            let evidence = new Evidence(node, EvidenceType.UNOBSERVE);
            node.variable.values.forEach(v => evidence.addValue(v, 1.0));
            return evidence;
        }
        notifyListener(change) {
            if (this.listener) {
                if (ChangeType.RETRACTION === change) {
                    this.listener.evidenceRetracted(this);
                }
                else if (ChangeType.UPDATE === change) {
                    this.listener.evidenceUpdated(this);
                }
            }
        }
    }
    exports.JoinTree = JoinTree;
    class JoinTreePathDetector {
        constructor(graph, start, stop) {
            this.seen = new Set();
            this.graph = graph;
            this.start = start;
            this.stop = stop;
        }
        exists() {
            if (this.start === this.stop) {
                return true;
            }
            return this.find(this.start);
        }
        find(id) {
            let neighbors = this.graph.getNeighbors(id);
            if (neighbors.has(this.stop)) {
                return true;
            }
            else {
                this.seen.add(id);
                for (let neighbor of neighbors) {
                    if (!this.seen.has(neighbor)) {
                        if (this.find(neighbor)) {
                            return true;
                        }
                    }
                }
            }
            return false;
        }
    }
    var EvidenceType;
    (function (EvidenceType) {
        EvidenceType[EvidenceType["VIRTUAL"] = 1] = "VIRTUAL";
        EvidenceType[EvidenceType["FINDING"] = 2] = "FINDING";
        EvidenceType[EvidenceType["OBSERVATION"] = 3] = "OBSERVATION";
        EvidenceType[EvidenceType["UNOBSERVE"] = 4] = "UNOBSERVE";
    })(EvidenceType = exports.EvidenceType || (exports.EvidenceType = {}));
    var ChangeType;
    (function (ChangeType) {
        ChangeType[ChangeType["NONE"] = 1] = "NONE";
        ChangeType[ChangeType["UPDATE"] = 2] = "UPDATE";
        ChangeType[ChangeType["RETRACTION"] = 3] = "RETRACTION";
    })(ChangeType = exports.ChangeType || (exports.ChangeType = {}));
    class EvidenceBuilder {
        constructor() {
            this.values = new Map();
            this.type = EvidenceType.OBSERVATION;
        }
        withNode(node) {
            this.node = node;
            return this;
        }
        withType(type) {
            this.type = type;
            return this;
        }
        withEvidence(val, likelihood) {
            this.values.set(val, likelihood);
            return this;
        }
        build() {
            let evidence = new Evidence(this.node, this.type);
            this.values.forEach((v, k) => evidence.values.set(k, v));
            return evidence;
        }
    }
    exports.EvidenceBuilder = EvidenceBuilder;
    class Evidence {
        constructor(node, type) {
            this.node = node;
            this.type = type;
            this.values = new Map();
        }
        addValue(value, likelihood) {
            this.values.set(value, likelihood);
            return this;
        }
        compare(potentials) {
            let that = this.convert(potentials);
            let unobserveThat = this.isUnobserved(that);
            let unobserveThis = this.isUnobserved(this.values);
            if (unobserveThat && unobserveThis) {
                return ChangeType.NONE;
            }
            let observeThat = this.isObserved(that);
            let observeThis = this.isObserved(this.values);
            if (observeThat && observeThis) {
                let s1 = this.getObservedValue(that);
                let s2 = this.getObservedValue(this.values);
                if (s1 === s2) {
                    return ChangeType.NONE;
                }
                else {
                    return ChangeType.RETRACTION;
                }
            }
            return ChangeType.RETRACTION;
        }
        validate() {
            this.node.variable.values.forEach(value => {
                if (!this.values.has(value)) {
                    this.values.set(value, 0.0);
                }
            });
            if (EvidenceType.VIRTUAL === this.type) {
                let sum = this.node.variable.values
                    .map(value => this.values.get(value))
                    .reduce((a, b) => a + b);
                this.node.variable.values.forEach(value => {
                    let d = this.values.get(value) / sum;
                    this.values.set(value, d);
                });
            }
            else if (EvidenceType.FINDING === this.type) {
                this.node.variable.values.forEach(value => {
                    let d = this.values.get(value) > 0.0 ? 1.0 : 0.0;
                    this.values.set(value, d);
                });
                let count = this.node.variable.values
                    .map(value => this.values.get(value))
                    .reduce((a, b) => a + b);
                if (0 === count) {
                    this.node.variable.values.forEach(value => this.values.set(value, 1.0));
                }
            }
            else if (EvidenceType.OBSERVATION === this.type) {
                let keys = Array.from(this.values.keys())
                    .sort((a, b) => -1 * CompareUtil.intCompare(this.values.get(a), this.values.get(b)));
                let key = keys[0];
                this.node.variable.values.forEach(value => {
                    if (key === value) {
                        this.values.set(value, 1.0);
                    }
                    else {
                        this.values.set(value, 0.0);
                    }
                });
            }
            else if (EvidenceType.UNOBSERVE === this.type) {
                this.node.variable.values.forEach(value => this.values.set(value, 1.0));
            }
        }
        convert(map) {
            let m = new Map();
            map.forEach((v, k) => {
                let likelihood = v.entries[0].value;
                m.set(k, likelihood);
            });
            return m;
        }
        isUnobserved(values) {
            let counts = 0;
            values.forEach((v, k) => counts += v);
            return (counts === values.size);
        }
        isObserved(values) {
            let countOne = 0;
            let countZero = 0;
            values.forEach((v, k) => {
                if (1.0 === v) {
                    countOne++;
                }
                else if (0.0 === v) {
                    countZero++;
                }
            });
            return (1 === countOne && values.size - 1 === countZero);
        }
        getObservedValue(values) {
            let strs = Array.from(values.keys())
                .filter(k => (1.0 === values.get(k)));
            return strs[0];
        }
    }
    exports.Evidence = Evidence;
    class Potential {
        constructor() {
            this.entries = [];
        }
        addEntry(entry) {
            this.entries.push(entry);
        }
        getMatchingEntries(entry) {
            return this.entries.filter(e => e.matches(entry));
        }
        toString() {
            let s = '';
            this.entries.forEach(entry => s += entry.toString() + '\n');
            return s.substr(0, s.length - 1);
        }
    }
    exports.Potential = Potential;
    class PotentialEntry {
        constructor() {
            this.entries = new Map();
            this.value = 1.0;
        }
        add(id, value) {
            if (!this.entries.has(id)) {
                this.entries.set(id, value);
            }
            return this;
        }
        matches(that) {
            for (let key of that.entries.keys()) {
                if (!this.entries.has(key) || !(this.entries.get(key) === that.entries.get(key))) {
                    return false;
                }
            }
            return true;
        }
        toString() {
            let s = '';
            this.entries.forEach((v, k) => {
                s += k + '=' + v + ',';
            });
            s += this.value;
            return s;
        }
        duplicate() {
            let entry = new PotentialEntry();
            this.entries.forEach((v, k) => entry.add(k, v));
            entry.value = this.value;
            return entry;
        }
    }
    exports.PotentialEntry = PotentialEntry;
    class IdUtil {
        static hashOfStr(s) {
            let hash = 0;
            if (s.length === 0) {
                return hash;
            }
            for (let i = 0, len = s.length; i < len; i++) {
                let chr = s.charCodeAt(i);
                hash = ((hash << 5) - hash) + chr;
                hash |= 0; // Convert to 32bit integer
            }
            return hash;
        }
        static hashOfArr(arr) {
            return this.hashOfStr(arr.sort().join('-'));
        }
    }
    exports.IdUtil = IdUtil;
    class PotentialUtil {
        static passSingleMessage(jointree, x, s, y) {
            // console.log('passing message ' + x.toString() + ' -- ' + s.toString() + ' -- ' + y.toString());
            let oldSepSetPotential = jointree.potentials.get(s.id);
            let yPotential = jointree.potentials.get(y.id);
            let newSepSetPotential = this.marginalizeFor(jointree, x, s.nodes);
            jointree.addPotential(s, newSepSetPotential);
            this.multiply(yPotential, this.divide(newSepSetPotential, oldSepSetPotential));
        }
        static marginalizeFor(joinTree, clique, nodes) {
            let potential = this.getPotentialFromNodes(nodes);
            let cliquePotential = joinTree.potentials.get(clique.id);
            potential.entries.forEach(entry => {
                let matchedEntries = cliquePotential.getMatchingEntries(entry);
                let t = 0.0;
                matchedEntries.forEach(matchedEntry => t += matchedEntry.value);
                entry.value = t;
            });
            return potential;
        }
        static normalize(potential) {
            let sum = 0.0;
            potential.entries.forEach(entry => {
                sum += entry.value;
            });
            potential.entries.forEach(entry => {
                let d = entry.value / sum;
                entry.value = d;
            });
            return potential;
        }
        static divide(numerator, denominator) {
            let potential = new Potential();
            numerator.entries.forEach(entry => {
                let entries = denominator.entries;
                if (entries.length > 0) {
                    let e = entries[0];
                    let d = (this.isZero(entry.value) || this.isZero(e.value)) ? 0.0 : entry.value / e.value;
                    let newEntry = entry.duplicate();
                    newEntry.value = d;
                    potential.addEntry(newEntry);
                }
            });
            return potential;
        }
        static multiply(bigger, smaller) {
            smaller.entries.forEach(entry => {
                let entries = bigger.getMatchingEntries(entry);
                entries.forEach(e => {
                    let d = e.value * entry.value;
                    e.value = d;
                });
            });
        }
        static getPotential(node, parents) {
            let potential = this.getPotentialFromNodes(this.merge(node, parents));
            let total = potential.entries.length;
            for (let i = 0; i < total; i++) {
                let prob = node.probs[i];
                potential.entries[i].value = prob;
            }
            return potential;
        }
        static getPotentialFromNodes(nodes) {
            let valueLists = nodes.map(n => n.variable.values);
            let cartesian = this.getCartesianProduct(valueLists);
            let potential = new Potential();
            cartesian.forEach(values => {
                let entry = new PotentialEntry();
                for (let i = 0; i < nodes.length; i++) {
                    let value = values[i];
                    let id = nodes[i].id;
                    entry.add(id, value);
                }
                potential.addEntry(entry);
            });
            return potential;
        }
        static isZero(d) {
            return (0 === d);
        }
        static getCartesianProduct(lists) {
            let results = [];
            if (lists.length === 0) {
                return results;
            }
            else {
                let first = lists[0];
                let tail = lists.slice(0).splice(1);
                let remaining = this.getCartesianProduct(tail);
                first.forEach(condition => {
                    if (remaining.length > 0) {
                        remaining.forEach(rlist => {
                            let result = [];
                            result.push(condition);
                            rlist.forEach(r => result.push(r));
                            results.push(result);
                        });
                    }
                    else {
                        let result = [];
                        result.push(condition);
                        results.push(result);
                    }
                });
            }
            return results;
        }
        static merge(node, parents) {
            let nodes = [];
            parents.forEach(n => nodes.push(n));
            nodes.push(node);
            return nodes;
        }
    }
    exports.PotentialUtil = PotentialUtil;
    class BbnUtil {
        static getHuangGraph() {
            let a = new BbnNode(new Variable(0, 'a', new Set(['on', 'off'])), [0.5, 0.5]);
            let b = new BbnNode(new Variable(1, 'b', new Set(['on', 'off'])), [0.5, 0.5, 0.4, 0.6]);
            let c = new BbnNode(new Variable(2, 'c', new Set(['on', 'off'])), [0.7, 0.3, 0.2, 0.8]);
            let d = new BbnNode(new Variable(3, 'd', new Set(['on', 'off'])), [0.9, 0.1, 0.5, 0.5]);
            let e = new BbnNode(new Variable(4, 'e', new Set(['on', 'off'])), [0.3, 0.7, 0.6, 0.4]);
            let f = new BbnNode(new Variable(5, 'f', new Set(['on', 'off'])), [0.01, 0.99, 0.01, 0.99, 0.01, 0.99, 0.99, 0.01]);
            let g = new BbnNode(new Variable(6, 'g', new Set(['on', 'off'])), [0.8, 0.2, 0.1, 0.9]);
            let h = new BbnNode(new Variable(7, 'h', new Set(['on', 'off'])), [0.05, 0.95, 0.95, 0.05, 0.95, 0.05, 0.95, 0.05]);
            let bbn = new Bbn()
                .addNode(a)
                .addNode(b)
                .addNode(c)
                .addNode(d)
                .addNode(e)
                .addNode(f)
                .addNode(g)
                .addNode(h)
                .addEdge(new BEdge(a, b, EdgeType.DIRECTED))
                .addEdge(new BEdge(a, c, EdgeType.DIRECTED))
                .addEdge(new BEdge(b, d, EdgeType.DIRECTED))
                .addEdge(new BEdge(c, e, EdgeType.DIRECTED))
                .addEdge(new BEdge(d, f, EdgeType.DIRECTED))
                .addEdge(new BEdge(e, f, EdgeType.DIRECTED))
                .addEdge(new BEdge(c, g, EdgeType.DIRECTED))
                .addEdge(new BEdge(e, h, EdgeType.DIRECTED))
                .addEdge(new BEdge(g, h, EdgeType.DIRECTED));
            return bbn;
        }
    }
    exports.BbnUtil = BbnUtil;
    class CompareUtil {
        static intCompare(x, y) {
            return (x < y) ? -1 : ((x === y) ? 0 : 1);
        }
        static strCompare(x, y) {
            return x.localeCompare(y);
        }
    }
    exports.CompareUtil = CompareUtil;
});
define("pptc", ["require", "exports", "graph"], function (require, exports, graph_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class InferenceController {
        static apply(bbn) {
            PotentialInitializer.init(bbn);
            let ug = Moralizer.moralize(bbn);
            let cliques = Triangulator.triangulate(ug);
            let joinTree = Transformer.transform(cliques);
            Initializer.initialize(joinTree);
            Propagator.propagate(joinTree);
            joinTree.setListener(new InferenceController());
            return joinTree;
        }
        evidenceRetracted(jointree) {
            Initializer.initialize(jointree);
            Propagator.propagate(jointree);
        }
        evidenceUpdated(jointree) {
            Propagator.propagate(jointree);
        }
    }
    exports.InferenceController = InferenceController;
    class Initializer {
        static initialize(joinTree) {
            joinTree.getCliques().forEach(clique => {
                let potential = graph_1.PotentialUtil.getPotentialFromNodes(clique.nodes);
                joinTree.addPotential(clique, potential);
            });
            joinTree.getSepSets().forEach(sepSet => {
                let potential = graph_1.PotentialUtil.getPotentialFromNodes(sepSet.nodes);
                joinTree.addPotential(sepSet, potential);
            });
            joinTree.getBbnNodes().forEach(node => {
                let clique = this.getClique(node, joinTree);
                // console.log(node.variable.name + ' mapped to clique ' + clique.toString());
                let p1 = joinTree.potentials.get(clique.id);
                let p2 = node.potential;
                // console.log(p1.toString());
                // console.log('>>>>');
                // console.log(p2.toString());
                // console.log('----');
                graph_1.PotentialUtil.multiply(p1, p2);
                // console.log(p1.toString());
                // console.log('****');
            });
            joinTree.getBbnNodes().forEach(node => {
                node.variable.values.forEach(value => {
                    let clique = node.metadata.get('parent.clique');
                    let cliquePotential = joinTree.potentials.get(clique.id);
                    let nodePotential = joinTree.getEvidence(node, value);
                    graph_1.PotentialUtil.multiply(cliquePotential, nodePotential);
                    // console.log(clique.toString());
                    // console.log(cliquePotential.toString());
                });
            });
            return joinTree;
        }
        static getClique(node, jointree) {
            let clique;
            if (!node.metadata.has('parent.clique')) {
                let cliques = jointree.findCliquesWithNodeAndParents(node.id)
                    .sort((a, b) => graph_1.CompareUtil.intCompare(a.id, b.id));
                clique = cliques[0];
            }
            else {
                clique = node.metadata.get('parent.clique');
            }
            node.addMetadata('parent.clique', clique);
            return clique;
        }
    }
    exports.Initializer = Initializer;
    class Moralizer {
        static moralize(dag) {
            let ug = new graph_1.Ug();
            dag.getNodes().forEach(node => ug.addNode(node));
            dag.getEdges().forEach(edge => ug.addEdge(new graph_1.BEdge(edge.lhs, edge.rhs)));
            dag.getNodes().forEach(node => {
                let parents = Array.from(dag.getParents(node.id));
                let size = parents.length;
                for (let i = 0; i < size; i++) {
                    let pa1 = dag.getNode(parents[i]);
                    for (let j = i + 1; j < size; j++) {
                        let pa2 = dag.getNode(parents[j]);
                        ug.addEdge(new graph_1.BEdge(pa1, pa2));
                    }
                }
            });
            dag.getNodes().forEach(node => {
                let parents = Array.from(dag.getParents(node.id)).map(id => dag.getNode(id));
                node.addMetadata('parents', parents);
            });
            return ug;
        }
    }
    exports.Moralizer = Moralizer;
    class PotentialInitializer {
        static init(bbn) {
            bbn.getNodes().forEach(node => {
                let bbnNode = node;
                let parents = Array.from(bbn.getParents(node.id)).map(id => bbn.getNode(id));
                bbnNode.potential = graph_1.PotentialUtil.getPotential(bbnNode, parents);
            });
        }
    }
    exports.PotentialInitializer = PotentialInitializer;
    class Propagator {
        static propagate(joinTree) {
            let cliques = joinTree.getCliques().sort((a, b) => graph_1.CompareUtil.intCompare(a.id, b.id));
            let x = cliques[0];
            // console.log(x.toString());
            joinTree.unmarkCliques();
            this.collectEvidence(joinTree, x);
            joinTree.unmarkCliques();
            this.distributeEvidence(joinTree, x);
            return joinTree;
        }
        static collectEvidence(jointree, start) {
            let collector = new EvidenceCollector(jointree, start);
            collector.start();
        }
        static distributeEvidence(jointree, start) {
            let distributor = new EvidenceDistributor(jointree, start);
            distributor.start();
        }
    }
    exports.Propagator = Propagator;
    class Transformer {
        static transform(cliques) {
            let jointree = new graph_1.JoinTree();
            let sepSets = this.getSepSets(cliques);
            let n = (cliques.length - 1) * 2;
            let total = 0;
            for (let i = 0; i < sepSets.length; i++) {
                let sepSet = sepSets[i];
                jointree.addEdge(new graph_1.JtEdge(sepSet));
                total += 2;
                if (total === n) {
                    break;
                }
            }
            return jointree;
        }
        static getSepSets(cliques) {
            let sepSets = [];
            let size = cliques.length;
            for (let i = 0; i < size; i++) {
                for (let j = i + 1; j < size; j++) {
                    sepSets.push(new graph_1.SepSet(cliques[i], cliques[j]));
                }
            }
            return sepSets.sort((a, b) => {
                let result = -1 * graph_1.CompareUtil.intCompare(a.getMass(), b.getMass());
                if (0 === result) {
                    result = graph_1.CompareUtil.intCompare(a.getCost(), b.getCost());
                    if (0 === result) {
                        result = graph_1.CompareUtil.intCompare(a.id, b.id);
                    }
                }
                return result;
            });
        }
    }
    exports.Transformer = Transformer;
    class Triangulator {
        static triangulate(m) {
            let cliques = [];
            let mm = this.duplicate(m);
            while (mm.getNodes().length > 0) {
                let nodeClique = this.selectNode(mm);
                let clique = new graph_1.Clique(nodeClique.getBbnNodes());
                if (!this.isSubset(cliques, clique)) {
                    cliques.push(clique);
                }
                mm.removeNode(nodeClique.node.id);
                nodeClique.edges.forEach(e => {
                    m.addEdge(e);
                    mm.addEdge(e);
                });
            }
            return cliques;
        }
        static duplicate(g) {
            let ug = new graph_1.Ug();
            g.getNodes().forEach(n => ug.addNode(n));
            g.getEdges().forEach(e => ug.addEdge(e));
            return ug;
        }
        static selectNode(m) {
            let cliques = m.getNodes()
                .map(node => {
                let weight = this.getWeight(node, m);
                let edges = this.getEdgesToAdd(node, m);
                let neighbors = Array.from(m.getNeighbors(node.id)).map(id => m.getNode(id));
                return new NodeClique(node, neighbors, weight, edges);
            })
                .sort((a, b) => {
                let result = graph_1.CompareUtil.intCompare(a.edges.length, b.edges.length);
                if (0 === result) {
                    result = graph_1.CompareUtil.intCompare(a.weight, b.weight);
                    if (0 === result) {
                        result = graph_1.CompareUtil.intCompare(a.node.id, b.node.id);
                    }
                }
                return result;
            });
            return cliques[0];
        }
        static getWeight(n, m) {
            let weight = n.getWeight();
            Array.from(m.getNeighbors(n.id))
                .map(id => m.getNode(id))
                .forEach(neighbor => weight *= neighbor.getWeight());
            return weight;
        }
        static getEdgesToAdd(n, m) {
            let edges = [];
            let neighbors = Array.from(m.getNeighbors(n.id)).map(id => m.getNode(id));
            let size = neighbors.length;
            for (let i = 0; i < size; i++) {
                let ne1 = neighbors[i];
                for (let j = 0; j < size; j++) {
                    let ne2 = neighbors[j];
                    if (!m.edgeExists(ne1.id, ne2.id)) {
                        edges.push(new graph_1.BEdge(ne1, ne2));
                    }
                }
            }
            return edges;
        }
        static isSubset(cliques, clique) {
            for (let i = 0; i < cliques.length; i++) {
                if (cliques[i].isSuperset(clique)) {
                    return true;
                }
            }
            return false;
        }
    }
    exports.Triangulator = Triangulator;
    class NodeClique {
        constructor(node, neighbors, weight, edges) {
            this.node = node;
            this.neighbors = neighbors;
            this.weight = weight;
            this.edges = edges;
        }
        getBbnNodes() {
            let nodes = this.neighbors.slice(0);
            nodes.push(this.node);
            return nodes.map(n => n);
        }
    }
    class EvidenceCollector {
        constructor(joinTree, startClique) {
            this.joinTree = joinTree;
            this.startClique = startClique;
        }
        start() {
            // console.log('STARTING EVIDENCE COLLECTION from ' + this.startClique.toString());
            this.startClique.mark();
            this.joinTree.getNeighbors(this.startClique.id).forEach(sepSetId => {
                let sepSet = this.joinTree.getNode(sepSetId);
                Array.from(this.joinTree.getNeighbors(sepSetId))
                    .map(id => this.joinTree.getNode(id))
                    .filter(clique => !clique.isMarked())
                    .forEach(y => {
                    this.walk(this.startClique, sepSet, y);
                });
            });
        }
        walk(x, s, y) {
            y.mark();
            Array.from(this.joinTree.getNeighbors(y.id))
                .map(id => this.joinTree.getNode(id))
                .forEach(sepSet => {
                Array.from(this.joinTree.getNeighbors(sepSet.id))
                    .map(id => this.joinTree.getNode(id))
                    .filter(clique => !clique.isMarked())
                    .forEach(clique => this.walk(y, sepSet, clique));
            });
            graph_1.PotentialUtil.passSingleMessage(this.joinTree, y, s, x);
        }
    }
    exports.EvidenceCollector = EvidenceCollector;
    class EvidenceDistributor {
        constructor(joinTree, startClique) {
            this.joinTree = joinTree;
            this.startClique = startClique;
        }
        start() {
            // console.log('STARTING EVIDENCE DISTRIBUTION from ' + this.startClique.toString());
            this.startClique.mark();
            this.joinTree.getNeighbors(this.startClique.id).forEach(sepSetId => {
                let sepSet = this.joinTree.getNode(sepSetId);
                Array.from(this.joinTree.getNeighbors(sepSetId))
                    .map(id => this.joinTree.getNode(id))
                    .filter(clique => !clique.isMarked())
                    .forEach(y => {
                    graph_1.PotentialUtil.passSingleMessage(this.joinTree, this.startClique, sepSet, y);
                    this.walk(this.startClique, sepSet, y);
                });
            });
        }
        walk(x, s, y) {
            y.mark();
            Array.from(this.joinTree.getNeighbors(y.id))
                .map(id => this.joinTree.getNode(id))
                .forEach(sepSet => {
                Array.from(this.joinTree.getNeighbors(sepSet.id))
                    .map(id => this.joinTree.getNode(id))
                    .filter(clique => !clique.isMarked())
                    .forEach(clique => {
                    graph_1.PotentialUtil.passSingleMessage(this.joinTree, y, sepSet, clique);
                    this.walk(y, sepSet, clique);
                });
            });
        }
    }
    exports.EvidenceDistributor = EvidenceDistributor;
});
define("viz", ["require", "exports", "d3"], function (require, exports, d3) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    const OUT_LEFT = 1, OUT_TOP = 2, OUT_RIGHT = 4, OUT_BOTTOM = 8;
    const MAX_NODE_NAME_LENGTH = 15;
    const MAX_VALUE_LENGTH = 5;
    const MAX_PCT_VALUE = 6;
    const DEFAULT_PADDING = '\u00A0';
    class VGraph {
        constructor() {
            this.nodes = new Map();
            this.edges = new Map();
        }
        getNodes() {
            return Array.from(this.nodes.values());
        }
        getEdges() {
            return Array.from(this.edges.values());
        }
        addNode(node) {
            this.nodes.set(node.id, node);
            return this;
        }
        addEdge(edge) {
            this.edges.set(edge.getId(), edge);
            return this;
        }
        getNode(id) {
            return this.nodes.get(id);
        }
        getPath(id1, id2) {
            return this.getNode(id1).getPath(this.getNode(id2));
        }
    }
    exports.VGraph = VGraph;
    class VEdge {
        constructor(parent, child) {
            this.parent = parent;
            this.child = child;
            this.points = [];
        }
        getId() {
            return Util.hashOfStr(this.toString());
        }
        toString() {
            return this.parent.label + '->' + this.child.label;
        }
    }
    exports.VEdge = VEdge;
    class VNode {
        constructor(id, label, values, probs) {
            this.id = id;
            this.label = label;
            this.values = values;
            this.probs = probs;
            this.width = 150;
            this.probs = this.normalizeProbs(this.probs);
            this.height = values.length * 15 + 20;
            this.point = new VPoint(Math.random(), Math.random());
        }
        updatePoint(point) {
            this.point.x = point.x;
            this.point.y = point.y;
        }
        getRefId() {
            return this.label;
        }
        getTranslation() {
            return 'translate(' + this.point.x + ',' + this.point.y + ')';
        }
        getMid() {
            let dx = this.width / 2.0 + this.point.x;
            let dy = this.height / 2.0 + this.point.y;
            return new VPoint(dx, dy);
        }
        normalizeProbs(probs) {
            let sum = probs.reduce((a, b) => a + b);
            return probs.map(p => p / sum);
        }
        getPath(that) {
            let theta = that.point.getTheta(this.point);
            let p1 = this.getPoint(theta);
            let p2 = that.getPoint(theta + Math.PI);
            let error = p1.error || p2.error ? true : false;
            let path = new VPath(p1, p2);
            path.error = error;
            return path;
        }
        toString() {
            return this.id + '|' +
                this.label + '|' +
                this.values.join(',') + '|' +
                this.probs.join(',') + '|' +
                this.point.toString();
        }
        getPoint(theta) {
            let c = this.getMid();
            let cx = c.x;
            let cy = c.y;
            let w = this.width / 2.0;
            let h = this.height / 2.0;
            let d = this.getDistance(new VPoint(cx, cy), new VPoint(cx + w, cy + h));
            let x = cx + d * Math.cos(theta);
            let y = cy + d * Math.sin(theta);
            let ocode = this.getOutCode(new VPoint(x, y));
            let px = 0;
            let py = 0;
            let error = false;
            switch (ocode) {
                case OUT_TOP:
                    px = cx - h * ((x - cx) / (y - cy));
                    py = cy - h;
                    break;
                case OUT_LEFT:
                    px = cx - w;
                    py = cy - w * ((y - cy) / (x - cx));
                    break;
                case OUT_BOTTOM:
                    px = cx + h * ((x - cx) / (y - cy));
                    py = cy + h;
                    break;
                case OUT_RIGHT:
                    px = cx + w;
                    py = cy + w * ((y - cy) / (x - cx));
                    break;
                default:
                    error = true;
            }
            let p = new VPoint(px, py);
            p.error = error;
            return p;
        }
        getDistance(p1, p2) {
            let x = p1.x - p2.x;
            let y = p1.y - p2.y;
            let d = Math.sqrt((x * x) + (y * y));
            return d;
        }
        getOutCode(point) {
            let out = 0;
            if (this.width <= 0) {
                out |= OUT_LEFT | OUT_RIGHT;
            }
            else if (point.x < this.point.x) {
                out |= OUT_LEFT;
            }
            else if (point.x > this.point.x + this.width) {
                out |= OUT_RIGHT;
            }
            if (this.height <= 0) {
                out |= OUT_TOP | OUT_BOTTOM;
            }
            else if (point.y < this.point.y) {
                out |= OUT_TOP;
            }
            else if (point.y > this.point.y + this.height) {
                out |= OUT_BOTTOM;
            }
            return out;
        }
    }
    exports.VNode = VNode;
    class VPoint {
        constructor(x, y) {
            this.x = x;
            this.y = y;
            this.error = false;
        }
        toString() {
            return '(' + this.x + ',' + this.y + ')';
        }
        getTheta(that) {
            return Math.atan2(this.y - that.y, this.x - that.x);
        }
    }
    exports.VPoint = VPoint;
    class VPath {
        constructor(p1, p2) {
            this.p1 = p1;
            this.p2 = p2;
            this.error = false;
        }
        toString() {
            return this.p1.toString() + ' to ' + this.p2.toString();
        }
    }
    exports.VPath = VPath;
    class Util {
        static hashOfStr(s) {
            let hash = 0;
            if (s.length === 0) {
                return hash;
            }
            for (let i = 0, len = s.length; i < len; i++) {
                let chr = s.charCodeAt(i);
                hash = ((hash << 5) - hash) + chr;
                hash |= 0; // Convert to 32bit integer
            }
            return hash;
        }
        static hashOfArr(arr) {
            return this.hashOfStr(arr.sort().join('-'));
        }
    }
    exports.Util = Util;
    class NoOpInferenceEngine {
        constructor(graph) {
            this.graph = graph;
        }
        getGraph() {
            return this.graph;
        }
        updateEvidence(id, value) {
        }
        getProbs(id) {
            return this.graph.getNode(id).probs;
        }
    }
    exports.NoOpInferenceEngine = NoOpInferenceEngine;
    class RenderOptions {
        constructor(id, width, height) {
            this.id = id;
            this.width = width;
            this.height = height;
        }
    }
    exports.RenderOptions = RenderOptions;
    class GraphRenderer {
        constructor(engine, options) {
            this.engine = engine;
            this.options = options;
            this.graph = this.engine.getGraph();
        }
        draw() {
            this.initSvg();
            this.layoutGraph();
            this.drawEdges();
            this.drawNodes();
        }
        initSvg() {
            d3.select(this.options.id)
                .attr({
                width: this.options.width,
                height: this.options.height
            })
                .append('defs')
                .append('marker')
                .attr({
                id: 'arrow',
                markerWidth: 10,
                markerHeight: 10,
                refX: 5,
                refY: 3,
                orient: 'auto',
                markerUnits: 'strokeWidth'
            })
                .append('path')
                .attr({
                d: 'M0,0 L0,6, L5,3 z',
                fill: '#f00',
                class: 'edge-head'
            });
        }
        getDagreGraph() {
            let g = new dagre.graphlib.Graph();
            g.setGraph({});
            g.setDefaultEdgeLabel(() => {
                return {};
            });
            this.graph.getNodes()
                .forEach(n => {
                g.setNode(n.getRefId(), {
                    label: n.getRefId(),
                    width: n.width,
                    height: n.height
                });
            });
            this.graph.getEdges()
                .forEach(e => {
                g.setEdge(e.parent.getRefId(), e.child.getRefId());
            });
            return g;
        }
        layoutGraph() {
            let g = this.getDagreGraph();
            dagre.layout(g);
            this.graph.getNodes()
                .forEach(n => {
                let dagreNode = g.node(n.getRefId());
                if (dagreNode) {
                    n.updatePoint(new VPoint(dagreNode.x, dagreNode.y));
                }
            });
            this.graph.getEdges()
                .forEach(e => {
                let dagreEdge = g.edge({ v: e.parent.getRefId(), w: e.child.getRefId() });
                if (dagreEdge) {
                    e.points = Array.from(dagreEdge.points)
                        .map(point => {
                        let p = point;
                        return new VPoint(p.x, p.y);
                    });
                }
            });
        }
        drawEdges() {
            let graph = this.graph;
            let edges = d3.select(this.options.id)
                .selectAll('line')
                .data(graph.getEdges())
                .enter()
                .append('line')
                .each(function (d) {
                let path = graph.getPath(d.parent.id, d.child.id);
                d3.select(this).attr({
                    'data-parent': d.parent.getRefId(),
                    'data-child': d.child.getRefId(),
                    x1: path.p1.x,
                    y1: path.p1.y,
                    x2: path.p2.x,
                    y2: path.p2.y,
                    style: 'stroke:rgb(255,0,0);stroke-width:2',
                    class: 'edge-line',
                    'marker-end': 'url(#arrow)'
                });
            });
        }
        drawNodes() {
            let engine = this.engine;
            let graph = this.graph;
            let formatNodeName = this.formatNodeName;
            let formatPct = this.formatPct;
            let formatValue = this.formatValue;
            let leftPad = this.leftPad;
            let rightPad = this.rightPad;
            // set the node group
            let nodes = d3.select(this.options.id)
                .selectAll('g')
                .data(graph.getNodes())
                .enter()
                .append('g')
                .attr({
                id: function (d) {
                    return d.getRefId();
                },
                transform: function (d) {
                    return d.getTranslation();
                },
                class: 'node-group'
            })
                .on('mousedown', function (d) {
                d3.selectAll('g.node-group').sort((a, b) => {
                    if (a.id !== d.id) {
                        return -1;
                    }
                    else {
                        return 1;
                    }
                });
            });
            // draw the node rectangle
            nodes.append('rect')
                .attr({
                x: 0,
                y: 0,
                class: 'node-shape',
                style: 'stroke:#000000; fill:none;',
                width: function (d) {
                    return d.width;
                },
                height: function (d) {
                    return d.height;
                },
                'pointer-events': 'visible',
                'data-node': function (d) {
                    return d.getRefId();
                }
            });
            // draw the node's name/label
            nodes.append('text')
                .attr({
                x: function (d) {
                    return d.width / 2;
                },
                y: 15,
                fill: 'black',
                class: 'node-name',
                'font-family': 'monospace',
                'font-size': 15
            })
                .text(function (d) {
                return formatNodeName(d.label);
            })
                .style('text-anchor', 'middle');
            // draw the node's value labels
            nodes.each(function (d) {
                let y = 30;
                d.values.forEach(value => {
                    d3.select(this)
                        .append('text')
                        .attr({
                        x: 2,
                        y: y,
                        class: 'node-value',
                        'font-family': 'monospace',
                        'data-node': function (d) {
                            return d.getRefId();
                        },
                        'data-value': function (d) {
                            return value;
                        }
                    })
                        .on('click', function (e) {
                        let node = e;
                        let h = this;
                        let v = h.attributes['data-value'].value;
                        engine.updateEvidence(node.id, v);
                        graph.getNodes().forEach(node => node.probs = engine.getProbs(node.id));
                        graph.getNodes().forEach(node => {
                            node.values.forEach((value, j) => {
                                // update belief bars
                                let selector = 'rect[data-node="' + node.getRefId() + '"][data-value="' + value + '"]';
                                d3.select(selector).attr({ width: node.probs[j] * 100 });
                                // update probability texts
                                selector = 'text[data-node="' + node.getRefId() + '"][data-pvalue="' + value + '"]';
                                d3.select(selector).text(formatPct(node.probs[j], leftPad));
                            });
                        });
                    })
                        .text(function (d) {
                        return formatValue(value, leftPad);
                    });
                    y += 15;
                });
            });
            // draw the node's percentage text
            nodes.each(function (d) {
                let y = 30;
                for (let i = 0; i < d.probs.length; i++) {
                    d3.select(this)
                        .append('text')
                        .attr({
                        x: 2 + d.width,
                        y: y,
                        'font-family': 'monospace',
                        class: 'node-pct',
                        'data-node': function (d) {
                            return d.getRefId();
                        },
                        'data-pvalue': function (d) {
                            return d.values[i];
                        }
                    })
                        .text(function (d) {
                        return formatPct(d.probs[i], leftPad);
                    });
                    y += 15;
                }
            });
            // draw the node's belief bars
            nodes.each(function (d) {
                let y = 20;
                d.probs.forEach((prob, index) => {
                    d3.select(this)
                        .append('rect')
                        .attr({
                        x: 50,
                        y: y,
                        width: prob * 100,
                        height: 10,
                        class: 'node-bar',
                        'data-node': function (d) {
                            return d.getRefId();
                        },
                        'data-value': function (d) {
                            return d.values[index];
                        }
                    });
                    y += 15;
                });
            });
            // draw the node's interquartile lines
            nodes.each(function (d) {
                let y1 = 20;
                let y2 = d.height - 5;
                let width = d.width - 50;
                let xInc = width / 4.0;
                let x = 50 + xInc;
                for (let i = 0; i < 3; i++) {
                    d3.select(this)
                        .append('line')
                        .attr({
                        x1: x,
                        y1: y1,
                        x2: x,
                        y2: y2,
                        class: 'node-iqline',
                        'stroke-dasharray': '5, 1',
                        style: 'stroke:black; stroke-width:1px',
                    });
                    x += xInc;
                }
            });
            // set the dragging behavior
            let drag = d3.behavior.drag()
                .origin((d, i) => {
                let node = d;
                return node.point;
            })
                .on('dragstart', (d, i) => {
                let e = d3.event;
                e.sourceEvent.stopPropagation();
            })
                .on('drag', (d, i) => {
                let event = d3.event;
                let d3Event = d3.event;
                let mouseEvent = d3Event.sourceEvent;
                let node = d;
                node.point.x = event.x;
                node.point.y = event.y;
                let id = 'g#' + node.getRefId();
                d3.select(id).attr({
                    transform: node.getTranslation()
                });
                let arcs = 'line[data-parent=' + node.getRefId() + ']';
                d3.selectAll(arcs)
                    .each(function (d) {
                    let edge = d;
                    let path = graph.getPath(edge.parent.id, edge.child.id);
                    d3.select(this).attr({
                        x1: path.p1.x,
                        y1: path.p1.y,
                        x2: path.p2.x,
                        y2: path.p2.y
                    });
                });
                arcs = 'line[data-child=' + node.getRefId() + ']';
                d3.selectAll(arcs)
                    .each(function (d) {
                    let edge = d;
                    let path = graph.getPath(edge.parent.id, edge.child.id);
                    d3.select(this).attr({
                        x1: path.p1.x,
                        y1: path.p1.y,
                        x2: path.p2.x,
                        y2: path.p2.y
                    });
                });
            });
            nodes.call(drag);
        }
        leftPad(pad, threhold, str) {
            let ostr = str;
            if (ostr.length < threhold) {
                while (ostr.length < threhold) {
                    ostr = pad + ostr;
                }
                return ostr;
            }
            return ostr;
        }
        rightPad(pad, threhold, str) {
            let ostr = str;
            if (ostr.length < threhold) {
                while (ostr.length < threhold) {
                    ostr += pad;
                }
                return ostr;
            }
            return ostr;
        }
        formatNodeName(v) {
            return v.length > MAX_NODE_NAME_LENGTH ? v.substr(0, MAX_NODE_NAME_LENGTH) : v;
        }
        formatValue(v, padding) {
            let value = v.length > MAX_VALUE_LENGTH ? v.substr(0, MAX_VALUE_LENGTH) : v;
            return padding(DEFAULT_PADDING, MAX_VALUE_LENGTH, value);
        }
        formatPct(p, padding) {
            return padding(DEFAULT_PADDING, MAX_PCT_VALUE, (p * 100).toFixed(2));
        }
    }
    exports.GraphRenderer = GraphRenderer;
});
define("tsbbn", ["require", "exports", "graph", "pptc", "viz"], function (require, exports, graph_2, pptc_1, viz_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.BbnUtil = graph_2.BbnUtil;
    exports.Variable = graph_2.Variable;
    exports.BbnNode = graph_2.BbnNode;
    exports.BNode = graph_2.BNode;
    exports.BEdge = graph_2.BEdge;
    exports.EdgeType = graph_2.EdgeType;
    exports.Bbn = graph_2.Bbn;
    exports.JoinTree = graph_2.JoinTree;
    exports.EvidenceType = graph_2.EvidenceType;
    exports.EvidenceBuilder = graph_2.EvidenceBuilder;
    exports.Evidence = graph_2.Evidence;
    exports.InferenceController = pptc_1.InferenceController;
    exports.VNode = viz_1.VNode;
    exports.VEdge = viz_1.VEdge;
    exports.VGraph = viz_1.VGraph;
    exports.GraphRenderer = viz_1.GraphRenderer;
    exports.RenderOptions = viz_1.RenderOptions;
    exports.NoOpInferenceEngine = viz_1.NoOpInferenceEngine;
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9ncmFwaC50cyIsInNyYy9wcHRjLnRzIiwic3JjL3Zpei50cyIsInNyYy90c2Jibi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7SUFBQTtRQUdFLFlBQW1CLEVBQVUsRUFBUyxJQUFZLEVBQVUsT0FBb0I7WUFBN0QsT0FBRSxHQUFGLEVBQUUsQ0FBUTtZQUFTLFNBQUksR0FBSixJQUFJLENBQVE7WUFBVSxZQUFPLEdBQVAsT0FBTyxDQUFhO1lBQzlFLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDO1FBQzdCLENBQUM7S0FDRjtJQU5ELDRCQU1DO0lBRUQ7UUFJRTtZQUNFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxHQUFHLEVBQWlCLENBQUM7WUFDdEMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLEdBQUcsRUFBdUIsQ0FBQztRQUM5QyxDQUFDO1FBRU0sWUFBWSxDQUFDLEVBQVU7WUFDNUIsSUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7WUFDekMsSUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2pFLElBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUNuRixJQUFJLFNBQVMsR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzlDLE9B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QUM7aUJBQ1YsT0FBTyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2lCQUMzQyxPQUFPLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQzNDLE9BQU8sQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDM0MsT0FBTyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2lCQUMzQyxPQUFPLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQzNDLE9BQU8sQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDM0MsT0FBTyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2lCQUMzQyxPQUFPLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQzNDLE9BQU8sQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBUSxDQUFDO1lBQ3RELE9BQU8sR0FBRyxDQUFDO1FBQ2IsQ0FBQztLQUNGO0lBL0JELDBCQStCQztJQUVEO1FBQ1MsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFTLEVBQUUsQ0FBUztZQUMzQyxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMs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QixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqRixDQUFDO1FBRU8sV0FBVyxDQUFDLENBQVMsRUFBRSxPQUFnRTtZQUM3RixJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUUsT0FBTyxPQUFPLENBQUMsZUFBZSxFQUFFLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzNELENBQUM7UUFFTyxTQUFTLENBQUMsQ0FBUyxFQUFFLE9BQWdFO1lBQzNGLE9BQU8sT0FBTyxDQUFDLGVBQWUsRUFBRSxhQUFhLEVBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkUsQ0FBQztLQUNGO0lBbllELHNDQW1ZQzs7Ozs7SUM1b0JDLDBCQUFBLE9BQU8sQ0FBQTtJQUFFLDJCQUFBLFFBQVEsQ0FBQTtJQUFFLDBCQUFBLE9BQU8sQ0FBQTtJQUFFLHdCQUFBLEtBQUssQ0FBQTtJQUFFLHdCQUFBLEtBQUssQ0FBQTtJQUFFLDJCQUFBLFFBQVEsQ0FBQTtJQUFFLHNCQUFBLEdBQUcsQ0FBQTtJQUFFLDJCQUFBLFFBQVEsQ0FBQTtJQUFFLCtCQUFBLFlBQVksQ0FBQTtJQUFFLGtDQUFBLGVBQWUsQ0FBQTtJQUFFLDJCQUFBLFFBQVEsQ0FBQTtJQUVwRyxxQ0FBQSxtQkFBbUIsQ0FBQTtJQUNuQixzQkFBQSxLQUFLLENBQUE7SUFBRSxzQkFBQSxLQUFLLENBQUE7SUFBRSx1QkFBQSxNQUFNLENBQUE7SUFBRSw4QkFBQSxhQUFhLENBQUE7SUFBRSw4QkFBQSxhQUFhLENBQUE7SUFBbUIsb0NBQUEsbUJBQW1CLENBQUEiLCJmaWxlIjoidHNiYm4tYW1kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFZhcmlhYmxlIHtcbiAgcHVibGljIHZhbHVlczogc3RyaW5nW107XG4gIFxuICBjb25zdHJ1Y3RvcihwdWJsaWMgaWQ6IG51bWJlciwgcHVibGljIG5hbWU6IHN0cmluZywgcHJpdmF0ZSBfdmFsdWVzOiBTZXQ8c3RyaW5nPikge1xuICAgIHRoaXMudmFsdWVzID0gWy4uLl92YWx1ZXNdO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCR3JhcGgge1xuICBwcm90ZWN0ZWQgbm9kZXM6IE1hcDxudW1iZXIsIEJOb2RlPjtcbiAgcHJvdGVjdGVkIGVkZ2VzOiBNYXA8bnVtYmVyLCBTZXQ8bnVtYmVyPj47XG4gIFxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm5vZGVzID0gbmV3IE1hcDxudW1iZXIsIEJOb2RlPigpO1xuICAgIHRoaXMuZWRnZXMgPSBuZXcgTWFwPG51bWJlciwgU2V0PG51bWJlcj4+KCk7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXROZWlnaGJvcnMoaWQ6IG51bWJlcik6IFNldDxudW1iZXI+IHtcbiAgICBsZXQga2V5cyA9IEFycmF5LmZyb20odGhpcy5lZGdlcy5rZXlzKCkpO1xuICAgIGxldCBuZWlnaGJvcnMxID0ga2V5cy5maWx0ZXIoa2V5ID0+IHRoaXMuZWRnZXMuZ2V0KGtleSkuaGFzKGlkKSk7XG4gICAgbGV0IG5laWdoYm9yczIgPSB0aGlzLmVkZ2VzLmhhcyhpZCkgPyBBcnJheS5mcm9tKHRoaXMuZWRnZXMuZ2V0KGlkKS52YWx1ZXMoKSkgOiBbXTtcbiAgICBsZXQgbmVpZ2hib3JzID0gbmVpZ2hib3JzMS5jb25jYXQobmVpZ2hib3JzMik7XG4gICAgcmV0dXJuIG5ldyBTZXQobmVpZ2hib3JzKTtcbiAgfVxuICBcbiAgcHVibGljIGdldE5vZGUoaWQ6IG51bWJlcik6IEJOb2RlIHtcbiAgICByZXR1cm4gdGhpcy5ub2Rlcy5nZXQoaWQpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0Tm9kZXMoKTogQk5vZGVbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5ub2Rlcy5rZXlzKCkpLm1hcChpZCA9PiB0aGlzLm5vZGVzLmdldChpZCkpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0RWRnZXMoKTogQkVkZ2VbXSB7XG4gICAgbGV0IGtleXM6IG51bWJlcltdID0gQXJyYXkuZnJvbSh0aGlzLmVkZ2VzLmtleXMoKSk7XG4gICAgbGV0IHN0cmVhbSA9IGtleXMubWFwKGxoc0lkID0+IHtcbiAgICAgIGxldCBlZGdlcyA9IEFycmF5LmZyb20odGhpcy5lZGdlcy5nZXQobGhzSWQpKVxuICAgICAgICAubWFwKHJoc0lkID0+IHtcbiAgICAgICAgICBsZXQgZWRnZVR5cGUgPSBFZGdlVHlwZS5VTkRJUkVDVEVEO1xuICAgICAgICAgIGxldCBsZWZ0SWQgPSBsaHNJZDtcbiAgICAgICAgICBsZXQgcmlnaHRJZCA9IHJoc0lkO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghdGhpcy5lZGdlcy5nZXQocmhzSWQpLmhhcyhsaHNJZCkpIHtcbiAgICAgICAgICAgIGVkZ2VUeXBlID0gRWRnZVR5cGUuRElSRUNURUQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxlZnRJZCA9IE1hdGgubWluKGxoc0lkLCByaHNJZCk7XG4gICAgICAgICAgICByaWdodElkID0gbGVmdElkID09PSBsaHNJZCA/IHJoc0lkIDogbGhzSWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBuZXcgQkVkZ2UobmV3IEJOb2RlKGxlZnRJZCksIG5ldyBCTm9kZShyaWdodElkKSwgZWRnZVR5cGUpO1xuICAgICAgICB9KTtcbiAgICAgIHJldHVybiBlZGdlcztcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gdGhpcy5yZW1vdmVEdXBsaWNhdGVzKHRoaXMuZmxhdHRlbihzdHJlYW0pKTtcbiAgfVxuICBcbiAgcHVibGljIGFkZE5vZGUobm9kZTogQk5vZGUpOiBCR3JhcGgge1xuICAgIGlmICghdGhpcy5ub2Rlcy5oYXMobm9kZS5pZCkpIHtcbiAgICAgIHRoaXMubm9kZXMuc2V0KG5vZGUuaWQsIG5vZGUpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIXRoaXMuZWRnZXMuaGFzKG5vZGUuaWQpKSB7XG4gICAgICB0aGlzLmVkZ2VzLnNldChub2RlLmlkLCBuZXcgU2V0PG51bWJlcj4oKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBwdWJsaWMgYWRkRWRnZShlZGdlOiBCRWRnZSk6IEJHcmFwaCB7XG4gICAgbGV0IGxocyA9IGVkZ2UubGhzO1xuICAgIGxldCByaHMgPSBlZGdlLnJocztcbiAgICBcbiAgICB0aGlzLmFkZE5vZGUobGhzKTtcbiAgICB0aGlzLmFkZE5vZGUocmhzKTtcbiAgICBcbiAgICBpZiAodGhpcy5zaG91bGRBZGQoZWRnZSkpIHtcbiAgICAgIGxldCBsZWZ0ID0gbGhzLmlkO1xuICAgICAgbGV0IHJpZ2h0ID0gcmhzLmlkO1xuICAgICAgXG4gICAgICBpZiAoRWRnZVR5cGUuVU5ESVJFQ1RFRCA9PT0gZWRnZS50eXBlKSB7XG4gICAgICAgIHRoaXMuZWRnZXMuZ2V0KGxlZnQpLmFkZChyaWdodCk7XG4gICAgICAgIHRoaXMuZWRnZXMuZ2V0KHJpZ2h0KS5hZGQobGVmdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVkZ2VzLmdldChsZWZ0KS5hZGQocmlnaHQpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgcHVibGljIGVkZ2VFeGlzdHMoaWQxOiBudW1iZXIsIGlkMjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuZWRnZXMuaGFzKGlkMSkgJiYgdGhpcy5lZGdlcy5nZXQoaWQxKS5oYXMoaWQyKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLmVkZ2VzLmhhcyhpZDIpICYmIHRoaXMuZWRnZXMuZ2V0KGlkMikuaGFzKGlkMSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIHB1YmxpYyByZW1vdmVOb2RlKGlkOiBudW1iZXIpIHtcbiAgICB0aGlzLm5vZGVzLmRlbGV0ZShpZCk7XG4gICAgdGhpcy5lZGdlcy5kZWxldGUoaWQpO1xuICAgIHRoaXMuZWRnZXMuZm9yRWFjaCgodiwgaykgPT4gdi5kZWxldGUoaWQpKTtcbiAgfVxuICBcbiAgcHJvdGVjdGVkIHNob3VsZEFkZChlZGdlOiBCRWRnZSk6IGJvb2xlYW4ge1xuICAgIGxldCBsaHMgPSBlZGdlLmxocztcbiAgICBsZXQgcmhzID0gZWRnZS5yaHM7XG4gICAgXG4gICAgaWYgKGxocy5pZCA9PT0gcmhzLmlkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGlmICghdGhpcy5lZGdlcy5nZXQobGhzLmlkKS5oYXMocmhzLmlkKSkge1xuICAgICAgaWYgKCF0aGlzLmVkZ2VzLmdldChyaHMuaWQpLmhhcyhsaHMuaWQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIHByaXZhdGUgZmxhdHRlbihlZGdlczogQkVkZ2VbXVtdKTogQkVkZ2VbXSB7XG4gICAgbGV0IGxpc3Q6IEJFZGdlW10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVkZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGVkZ2VzW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGxpc3QucHVzaChlZGdlc1tpXVtqXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsaXN0O1xuICB9XG4gIFxuICBwcml2YXRlIHJlbW92ZUR1cGxpY2F0ZXMoZWRnZXM6IEJFZGdlW10pOiBCRWRnZVtdIHtcbiAgICBsZXQgbWFwID0gbmV3IE1hcDxzdHJpbmcsIEJFZGdlPigpO1xuICAgIGxldCBhcnI6IEJFZGdlW10gPSBbXTtcbiAgICBcbiAgICBlZGdlcy5mb3JFYWNoKGUgPT4ge1xuICAgICAgbGV0IGtleSA9IGUudG9TdHJpbmcoKTtcbiAgICAgIGlmICghbWFwLmhhcyhrZXkpKSB7XG4gICAgICAgIG1hcC5zZXQoa2V5LCBlKTtcbiAgICAgICAgYXJyLnB1c2goZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGFycjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQk5vZGUge1xuICBtZXRhZGF0YTogTWFwPFN0cmluZywgYW55PjtcbiAgXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBpZDogbnVtYmVyKSB7XG4gICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBNYXA8U3RyaW5nLCBhbnk+KCk7XG4gIH1cbiAgXG4gIHB1YmxpYyBhZGRNZXRhZGF0YShrZXk6IFN0cmluZywgdmFsOiBhbnkpOiBCTm9kZSB7XG4gICAgdGhpcy5tZXRhZGF0YS5zZXQoa2V5LCB2YWwpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCYm5Ob2RlIGV4dGVuZHMgQk5vZGUge1xuICBwcm9iczogbnVtYmVyW107XG4gIHBvdGVudGlhbDogUG90ZW50aWFsO1xuICBcbiAgY29uc3RydWN0b3IocHVibGljIHZhcmlhYmxlOiBWYXJpYWJsZSwgcHJvYnM6IG51bWJlcltdID0gW10pIHtcbiAgICBzdXBlcih2YXJpYWJsZS5pZCk7XG4gICAgdGhpcy5wcm9icyA9IHByb2JzO1xuICB9XG4gIFxuICBnZXRXZWlnaHQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy52YXJpYWJsZS52YWx1ZXMubGVuZ3RoO1xuICB9XG4gIFxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICBsZXQgcyA9IHRoaXMudmFyaWFibGUubmFtZSArICcgeyc7XG4gICAgcyArPSB0aGlzLnZhcmlhYmxlLnZhbHVlcy5qb2luKCcsJyk7XG4gICAgcyArPSAnfSc7XG4gICAgcmV0dXJuIHM7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENsaXF1ZSBleHRlbmRzIEJOb2RlIHtcbiAgcHJpdmF0ZSBfbWFya2VkID0gZmFsc2U7XG4gIFxuICBjb25zdHJ1Y3RvcihwdWJsaWMgbm9kZXM6IEJibk5vZGVbXSkge1xuICAgIHN1cGVyKElkVXRpbC5oYXNoT2ZBcnIobm9kZXMubWFwKG4gPT4gJycgKyBuLmlkKSkpO1xuICB9XG4gIFxuICBwdWJsaWMgaXNNYXJrZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX21hcmtlZDtcbiAgfVxuICBcbiAgcHVibGljIG1hcmsoKSB7XG4gICAgdGhpcy5fbWFya2VkID0gdHJ1ZTtcbiAgfVxuICBcbiAgcHVibGljIHVubWFyaygpIHtcbiAgICB0aGlzLl9tYXJrZWQgPSBmYWxzZTtcbiAgfVxuICBcbiAgcHVibGljIG5vZGVzTWludXMobm9kZXM6IEJibk5vZGVbXSk6IEJibk5vZGVbXSB7XG4gICAgbGV0IGlkcyA9IHRoaXMubm9kZXMubWFwKG4gPT4gbi5pZCk7XG4gICAgcmV0dXJuIG5vZGVzLmZpbHRlcihuID0+IGlkcy5pbmRleE9mKG4uaWQpID09PSAtMSk7XG4gIH1cbiAgXG4gIHB1YmxpYyBpc1N1cGVyc2V0KHRoYXQ6IENsaXF1ZSk6IGJvb2xlYW4ge1xuICAgIGxldCBzMSA9IHRoaXMubm9kZXMubWFwKG4gPT4gbi5pZCk7XG4gICAgbGV0IHMyID0gbmV3IFNldCh0aGF0Lm5vZGVzLm1hcChuID0+IG4uaWQpKTtcbiAgICBsZXQgczMgPSBuZXcgU2V0KHMxLmZpbHRlcihpZCA9PiBzMi5oYXMoaWQpKSk7XG4gICAgXG4gICAgaWYgKHMyLnNpemUgPT09IHMzLnNpemUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudG9TdHJpbmcoKSArICcgaXMgc3VwZXJzZXQgb2YgJyArIHRoYXQudG9TdHJpbmcoKSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2codGhpcy50b1N0cmluZygpICsgJyBpcyBOT1Qgc3VwZXJzZXQgb2YgJyArIHRoYXQudG9TdHJpbmcoKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0V2VpZ2h0KCk6IG51bWJlciB7XG4gICAgbGV0IHdlaWdodCA9IDE7XG4gICAgdGhpcy5ub2Rlcy5mb3JFYWNoKG4gPT4ge1xuICAgICAgd2VpZ2h0ID0gd2VpZ2h0ICogbi5nZXRXZWlnaHQoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gd2VpZ2h0O1xuICB9XG4gIFxuICBwdWJsaWMgY29udGFpbnMoaWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGxldCByZXN1bHQgPSB0aGlzLm5vZGVzLmZpbmQobiA9PiBuLmlkID09PSBpZCk7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgcHVibGljIGdldFNlcFNldCh0aGF0OiBDbGlxdWUpOiBTZXBTZXQge1xuICAgIHJldHVybiBuZXcgU2VwU2V0KHRoaXMsIHRoYXQpO1xuICB9XG4gIFxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJygnICtcbiAgICAgIHRoaXMubm9kZXNcbiAgICAgICAgLm1hcChuID0+IG4udmFyaWFibGUubmFtZSlcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IENvbXBhcmVVdGlsLnN0ckNvbXBhcmUoYSwgYikpXG4gICAgICAgIC5qb2luKCctJykgK1xuICAgICAgJyknO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTZXBTZXQgZXh0ZW5kcyBDbGlxdWUge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgbGVmdDogQ2xpcXVlLCBwdWJsaWMgcmlnaHQ6IENsaXF1ZSkge1xuICAgIHN1cGVyKFtdKTtcbiAgICBcbiAgICBsZXQgc2V0MiA9IG5ldyBTZXQobGVmdC5ub2Rlcy5tYXAobiA9PiBuLmlkKSk7XG4gICAgbGV0IHNldDEgPSBuZXcgU2V0KHJpZ2h0Lm5vZGVzLmZpbHRlcihuID0+IHNldDIuaGFzKG4uaWQpKS5tYXAobiA9PiBuLmlkKSk7XG4gICAgdGhpcy5ub2RlcyA9IGxlZnQubm9kZXMuZmlsdGVyKG4gPT4gc2V0MS5oYXMobi5pZCkpO1xuICAgIHRoaXMuaWQgPSBJZFV0aWwuaGFzaE9mQXJyKHRoaXMubm9kZXMubWFwKG4gPT4gJycgKyBuLmlkKSk7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRDb3N0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubGVmdC5nZXRXZWlnaHQoKSArIHRoaXMucmlnaHQuZ2V0V2VpZ2h0KCk7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRNYXNzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubm9kZXMubGVuZ3RoO1xuICB9XG4gIFxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ1snICtcbiAgICAgIHRoaXMubm9kZXNcbiAgICAgICAgLm1hcChuID0+IG4udmFyaWFibGUubmFtZSlcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IENvbXBhcmVVdGlsLnN0ckNvbXBhcmUoYSwgYikpXG4gICAgICAgIC5qb2luKCctJykgK1xuICAgICAgJ10nO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCRWRnZSB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBsaHM6IEJOb2RlLCBwdWJsaWMgcmhzOiBCTm9kZSwgcHVibGljIHR5cGU6IEVkZ2VUeXBlID0gRWRnZVR5cGUuVU5ESVJFQ1RFRCkge1xuICBcbiAgfVxuICBcbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgbGV0IGFycm93ID0gRWRnZVR5cGUuVU5ESVJFQ1RFRCA9PT0gdGhpcy50eXBlID8gJy0tJyA6ICctPic7XG4gICAgbGV0IGxlZnQgPSB0aGlzLmxocy5pZDtcbiAgICBsZXQgcmlnaHQgPSB0aGlzLnJocy5pZDtcbiAgICBcbiAgICBpZiAoRWRnZVR5cGUuVU5ESVJFQ1RFRCA9PT0gdGhpcy50eXBlKSB7XG4gICAgICBsZWZ0ID0gTWF0aC5taW4odGhpcy5saHMuaWQsIHRoaXMucmhzLmlkKTtcbiAgICAgIHJpZ2h0ID0gKHRoaXMubGhzLmlkID09PSBsZWZ0KSA/IHRoaXMucmhzLmlkIDogdGhpcy5saHMuaWQ7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBsZWZ0ICsgYXJyb3cgKyByaWdodDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgSnRFZGdlIGV4dGVuZHMgQkVkZ2Uge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgc2VwU2V0OiBTZXBTZXQpIHtcbiAgICBzdXBlcihzZXBTZXQubGVmdCwgc2VwU2V0LnJpZ2h0LCBFZGdlVHlwZS5VTkRJUkVDVEVEKTtcbiAgfVxuICBcbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuc2VwU2V0LmxlZnQudG9TdHJpbmcoKSArICctLScgK1xuICAgICAgdGhpcy5zZXBTZXQudG9TdHJpbmcoKSArICctLScgK1xuICAgICAgdGhpcy5zZXBTZXQucmlnaHQudG9TdHJpbmcoKTtcbiAgfVxufVxuXG5leHBvcnQgZW51bSBFZGdlVHlwZSB7XG4gIFVORElSRUNURUQgPSAxLCBESVJFQ1RFRFxufVxuXG5leHBvcnQgY2xhc3MgRGFnIGV4dGVuZHMgQkdyYXBoIHtcbiAgXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRQYXJlbnRzKGlkOiBudW1iZXIpOiBTZXQ8bnVtYmVyPiB7XG4gICAgbGV0IGtleXMgPSBBcnJheS5mcm9tKHRoaXMuZWRnZXMua2V5cygpKTtcbiAgICBsZXQgcGFyZW50cyA9IGtleXMuZmlsdGVyKGtleSA9PiB0aGlzLmVkZ2VzLmdldChrZXkpLmhhcyhpZCkpO1xuICAgIHJldHVybiBuZXcgU2V0KHBhcmVudHMpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0Q2hpbGRyZW4oaWQ6IG51bWJlcik6IFNldDxudW1iZXI+IHtcbiAgICByZXR1cm4gdGhpcy5lZGdlcy5nZXQoaWQpO1xuICB9XG4gIFxuICBwdWJsaWMgZWRnZUV4aXN0cyhpZDE6IG51bWJlciwgaWQyOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5lZGdlcy5oYXMoaWQxKSAmJiB0aGlzLmVkZ2VzLmdldChpZDEpLmhhcyhpZDIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICBwcm90ZWN0ZWQgc2hvdWxkQWRkKGVkZ2U6IEJFZGdlKTogYm9vbGVhbiB7XG4gICAgbGV0IHBhcmVudCA9IGVkZ2UubGhzO1xuICAgIGxldCBjaGlsZCA9IGVkZ2UucmhzO1xuICAgIFxuICAgIGlmIChwYXJlbnQuaWQgPT09IGNoaWxkLmlkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGlmICghdGhpcy5lZGdlcy5nZXQocGFyZW50LmlkKS5oYXMoY2hpbGQuaWQpKSB7XG4gICAgICBpZiAoIXRoaXMuZWRnZXMuZ2V0KGNoaWxkLmlkKS5oYXMocGFyZW50LmlkKSkge1xuICAgICAgICBpZiAoIShuZXcgRGFnUGF0aERldGVjdG9yKHRoaXMsIGNoaWxkLmlkLCBwYXJlbnQuaWQpKS5leGlzdHMoKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQmJuIGV4dGVuZHMgRGFnIHtcbiAgcHJvdGVjdGVkIHNob3VsZEFkZChlZGdlOiBCRWRnZSk6IGJvb2xlYW4ge1xuICAgIGlmICghKGVkZ2UubGhzIGluc3RhbmNlb2YgQmJuTm9kZSkgfHwgIShlZGdlLnJocyBpbnN0YW5jZW9mIEJibk5vZGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBzdXBlci5zaG91bGRBZGQoZWRnZSk7XG4gIH1cbn1cblxuY2xhc3MgRGFnUGF0aERldGVjdG9yIHtcbiAgc2VlbjogU2V0PG51bWJlcj47XG4gIGdyYXBoOiBEYWc7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjtcbiAgXG4gIGNvbnN0cnVjdG9yKGdyYXBoOiBEYWcsIHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlcikge1xuICAgIHRoaXMuc2VlbiA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgIHRoaXMuZ3JhcGggPSBncmFwaDtcbiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gICAgdGhpcy5zdG9wID0gc3RvcDtcbiAgfVxuICBcbiAgcHVibGljIGV4aXN0cygpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5zdGFydCA9PT0gdGhpcy5zdG9wKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmluZCh0aGlzLnN0YXJ0KTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBmaW5kKGlkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBsZXQgY2hpbGRyZW4gPSB0aGlzLmdyYXBoLmdldENoaWxkcmVuKGlkKTtcbiAgICBpZiAoY2hpbGRyZW4uaGFzKHRoaXMuc3RvcCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlZW4uYWRkKGlkKTtcbiAgICAgIGZvciAobGV0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XG4gICAgICAgIGlmICghdGhpcy5zZWVuLmhhcyhjaGlsZCkgJiYgdGhpcy5maW5kKGNoaWxkKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUGRhZyBleHRlbmRzIEJHcmFwaCB7XG4gIHB1YmxpYyBnZXRQYXJlbnRzKGlkOiBudW1iZXIpOiBTZXQ8bnVtYmVyPiB7XG4gICAgbGV0IHBhcmVudHMgPSBBcnJheS5mcm9tKHRoaXMuZWRnZXMua2V5cygpKVxuICAgICAgLmZpbHRlcihrZXkgPT4gdGhpcy5lZGdlcy5nZXQoa2V5KS5oYXMoaWQpICYmICF0aGlzLmVkZ2VzLmdldChpZCkuaGFzKGtleSkpO1xuICAgIHJldHVybiBuZXcgU2V0KHBhcmVudHMpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0T3V0Tm9kZXMoaWQ6IG51bWJlcik6IFNldDxudW1iZXI+IHtcbiAgICBsZXQgcGFyZW50cyA9IHRoaXMuZ2V0UGFyZW50cyhpZCk7XG4gICAgbGV0IHN1YnNldCA9IEFycmF5LmZyb20odGhpcy5nZXROZWlnaGJvcnMoaWQpKS5maWx0ZXIoaXRlbSA9PiAhcGFyZW50cy5oYXMoaXRlbSkpO1xuICAgIHJldHVybiBuZXcgU2V0KHN1YnNldCk7XG4gIH1cbiAgXG4gIHByb3RlY3RlZCBzaG91bGRBZGQoZWRnZTogQkVkZ2UpOiBib29sZWFuIHtcbiAgICBsZXQgcGFyZW50ID0gZWRnZS5saHM7XG4gICAgbGV0IGNoaWxkID0gZWRnZS5yaHM7XG4gICAgXG4gICAgaWYgKHBhcmVudC5pZCA9PT0gY2hpbGQuaWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCF0aGlzLmVkZ2VzLmdldChwYXJlbnQuaWQpLmhhcyhjaGlsZC5pZCkpIHtcbiAgICAgIGlmICghdGhpcy5lZGdlcy5nZXQoY2hpbGQuaWQpLmhhcyhwYXJlbnQuaWQpKSB7XG4gICAgICAgIGlmICghKG5ldyBQZGFnUGF0aERldGVjdG9yKHRoaXMsIGNoaWxkLmlkLCBwYXJlbnQuaWQpKS5leGlzdHMoKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5jbGFzcyBQZGFnUGF0aERldGVjdG9yIHtcbiAgc2VlbjogU2V0PG51bWJlcj47XG4gIGdyYXBoOiBQZGFnO1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG4gIFxuICBjb25zdHJ1Y3RvcihncmFwaDogUGRhZywgc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKSB7XG4gICAgdGhpcy5zZWVuID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgdGhpcy5ncmFwaCA9IGdyYXBoO1xuICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICB0aGlzLnN0b3AgPSBzdG9wO1xuICB9XG4gIFxuICBwdWJsaWMgZXhpc3RzKCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLnN0YXJ0ID09PSB0aGlzLnN0b3ApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5maW5kKHRoaXMuc3RhcnQpO1xuICB9XG4gIFxuICBwcml2YXRlIGZpbmQoaWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGxldCBvdXROb2RlcyA9IHRoaXMuZ3JhcGguZ2V0T3V0Tm9kZXMoaWQpO1xuICAgIGlmIChvdXROb2Rlcy5oYXModGhpcy5zdG9wKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2Vlbi5hZGQoaWQpO1xuICAgICAgZm9yIChsZXQgb3V0Tm9kZSBvZiBvdXROb2Rlcykge1xuICAgICAgICBpZiAoIXRoaXMuc2Vlbi5oYXMob3V0Tm9kZSkpIHtcbiAgICAgICAgICBpZiAodGhpcy5maW5kKG91dE5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBVZyBleHRlbmRzIEJHcmFwaCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEpvaW5UcmVlIGV4dGVuZHMgVWcge1xuICBsaXN0ZW5lcjogSm9pblRyZWVMaXN0ZW5lcjtcbiAgcG90ZW50aWFsczogTWFwPG51bWJlciwgUG90ZW50aWFsPjtcbiAgZXZpZGVuY2VzOiBNYXA8bnVtYmVyLCBNYXA8c3RyaW5nLCBQb3RlbnRpYWw+PjtcbiAgXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5wb3RlbnRpYWxzID0gbmV3IE1hcDxudW1iZXIsIFBvdGVudGlhbD4oKTtcbiAgICB0aGlzLmV2aWRlbmNlcyA9IG5ldyBNYXA8bnVtYmVyLCBNYXA8c3RyaW5nLCBQb3RlbnRpYWw+PigpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0QmJuUG90ZW50aWFsKG5vZGU6IEJibk5vZGUpOiBQb3RlbnRpYWwge1xuICAgIGxldCBjbGlxdWUgPSBub2RlLm1ldGFkYXRhLmdldCgncGFyZW50LmNsaXF1ZScpIGFzIENsaXF1ZTtcbiAgICByZXR1cm4gUG90ZW50aWFsVXRpbC5ub3JtYWxpemUoUG90ZW50aWFsVXRpbC5tYXJnaW5hbGl6ZUZvcih0aGlzLCBjbGlxdWUsIFtub2RlXSkpO1xuICB9XG4gIFxuICBwdWJsaWMgdW5tYXJrQ2xpcXVlcygpIHtcbiAgICB0aGlzLmdldENsaXF1ZXMoKS5mb3JFYWNoKGNsaXF1ZSA9PiBjbGlxdWUudW5tYXJrKCkpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0QmJuTm9kZXMoKTogQmJuTm9kZVtdIHtcbiAgICBsZXQgbm9kZXMgPSBuZXcgTWFwPG51bWJlciwgQmJuTm9kZT4oKTtcbiAgICBcbiAgICB0aGlzLmdldENsaXF1ZXMoKS5mb3JFYWNoKGNsaXF1ZSA9PiB7XG4gICAgICBjbGlxdWUubm9kZXMuZm9yRWFjaChub2RlID0+IG5vZGVzLnNldChub2RlLmlkLCBub2RlKSk7XG4gICAgfSk7XG4gICAgXG4gICAgbGV0IGJibk5vZGVzOiBCYm5Ob2RlW10gPSBbXTtcbiAgICBub2Rlcy5mb3JFYWNoKCh2LCBrKSA9PiBiYm5Ob2Rlcy5wdXNoKHYpKTtcbiAgICByZXR1cm4gYmJuTm9kZXM7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRCYm5Ob2RlKGlkOiBudW1iZXIpOiBCYm5Ob2RlIHtcbiAgICBsZXQgYmJuTm9kZXMgPSB0aGlzLmdldEJibk5vZGVzKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYm5Ob2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGlkID09PSBiYm5Ob2Rlc1tpXS5pZCkge1xuICAgICAgICByZXR1cm4gYmJuTm9kZXNbaV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgQmJuTm9kZShuZXcgVmFyaWFibGUoLTEsICdfZHVtbXlfJywgbmV3IFNldCgpKSk7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRCYm5Ob2RlQnlOYW1lKG5hbWU6IHN0cmluZyk6IEJibk5vZGUge1xuICAgIHJldHVybiB0aGlzLmdldEJibk5vZGVzKCkuZmlsdGVyKG4gPT4gbi52YXJpYWJsZS5uYW1lID09PSBuYW1lKVswXTtcbiAgfVxuICBcbiAgcHVibGljIGZpbmRDbGlxdWVzV2l0aE5vZGVBbmRQYXJlbnRzKGlkOiBudW1iZXIpOiBDbGlxdWVbXSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2xpcXVlcygpXG4gICAgICAuZmlsdGVyKGNsaXF1ZSA9PiB7XG4gICAgICAgIGlmICghKGNsaXF1ZS5jb250YWlucyhpZCkpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBsZXQgYmJuTm9kZSA9IHRoaXMuZ2V0QmJuTm9kZShpZCk7XG4gICAgICAgIGlmIChiYm5Ob2RlLm1ldGFkYXRhLmhhcygncGFyZW50cycpKSB7XG4gICAgICAgICAgbGV0IHBhcmVudHM6IEJOb2RlW10gPSBiYm5Ob2RlLm1ldGFkYXRhLmdldCgncGFyZW50cycpIGFzIEJOb2RlW107XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gcGFyZW50c1tpXTtcbiAgICAgICAgICAgIGlmICghKGNsaXF1ZS5jb250YWlucyhwYXJlbnQuaWQpKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuICB9XG4gIFxuICBwdWJsaWMgYWRkUG90ZW50aWFsKGNsaXF1ZTogQ2xpcXVlLCBwb3RlbnRpYWw6IFBvdGVudGlhbCk6IEpvaW5UcmVlIHtcbiAgICB0aGlzLnBvdGVudGlhbHMuc2V0KGNsaXF1ZS5pZCwgcG90ZW50aWFsKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgcHVibGljIGdldENsaXF1ZXMoKTogQ2xpcXVlW10ge1xuICAgIHJldHVybiB0aGlzLmdldE5vZGVzKClcbiAgICAgIC5maWx0ZXIobiA9PiAhKG4gaW5zdGFuY2VvZiBTZXBTZXQpKVxuICAgICAgLm1hcChuID0+IG4gYXMgQ2xpcXVlKTtcbiAgfVxuICBcbiAgcHVibGljIGdldFNlcFNldHMoKTogU2VwU2V0W10ge1xuICAgIHJldHVybiB0aGlzLmdldE5vZGVzKClcbiAgICAgIC5maWx0ZXIobiA9PiAobiBpbnN0YW5jZW9mIFNlcFNldCkpXG4gICAgICAubWFwKG4gPT4gbiBhcyBTZXBTZXQpO1xuICB9XG4gIFxuICBwdWJsaWMgYWRkRWRnZShlZGdlOiBCRWRnZSk6IEJHcmFwaCB7XG4gICAgaWYgKCEoZWRnZSBpbnN0YW5jZW9mIEp0RWRnZSkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBcbiAgICBsZXQganRFZGdlID0gZWRnZSBhcyBKdEVkZ2U7XG4gICAgbGV0IHNlcFNldCA9IGp0RWRnZS5zZXBTZXQ7XG4gICAgbGV0IGxocyA9IGp0RWRnZS5saHM7XG4gICAgbGV0IHJocyA9IGp0RWRnZS5yaHM7XG4gICAgXG4gICAgdGhpcy5hZGROb2RlKHNlcFNldCk7XG4gICAgdGhpcy5hZGROb2RlKGxocyk7XG4gICAgdGhpcy5hZGROb2RlKHJocyk7XG4gICAgXG4gICAgaWYgKHRoaXMuc2hvdWxkQWRkKGVkZ2UpKSB7XG4gICAgICB0aGlzLmVkZ2VzLmdldChsaHMuaWQpLmFkZChzZXBTZXQuaWQpO1xuICAgICAgdGhpcy5lZGdlcy5nZXQoc2VwU2V0LmlkKS5hZGQobGhzLmlkKTtcbiAgICAgIFxuICAgICAgdGhpcy5lZGdlcy5nZXQocmhzLmlkKS5hZGQoc2VwU2V0LmlkKTtcbiAgICAgIHRoaXMuZWRnZXMuZ2V0KHNlcFNldC5pZCkuYWRkKHJocy5pZCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBwdWJsaWMgc2V0TGlzdGVuZXIobGlzdGVuZXI6IEpvaW5UcmVlTGlzdGVuZXIpIHtcbiAgICB0aGlzLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRFdmlkZW5jZShub2RlOiBCYm5Ob2RlLCB2YWx1ZTogc3RyaW5nKTogUG90ZW50aWFsIHtcbiAgICBpZiAoIXRoaXMuZXZpZGVuY2VzLmhhcyhub2RlLmlkKSkge1xuICAgICAgdGhpcy5ldmlkZW5jZXMuc2V0KG5vZGUuaWQsIG5ldyBNYXA8c3RyaW5nLCBQb3RlbnRpYWw+KCkpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIXRoaXMuZXZpZGVuY2VzLmdldChub2RlLmlkKS5oYXModmFsdWUpKSB7XG4gICAgICBsZXQgcG90ZW50aWFsRW50cnkgPSBuZXcgUG90ZW50aWFsRW50cnkoKTtcbiAgICAgIHBvdGVudGlhbEVudHJ5LmFkZChub2RlLmlkLCB2YWx1ZSk7XG4gICAgICBwb3RlbnRpYWxFbnRyeS52YWx1ZSA9IDEuMDtcbiAgICAgIFxuICAgICAgbGV0IHBvdGVudGlhbCA9IG5ldyBQb3RlbnRpYWwoKTtcbiAgICAgIHBvdGVudGlhbC5hZGRFbnRyeShwb3RlbnRpYWxFbnRyeSk7XG4gICAgICBcbiAgICAgIHRoaXMuZXZpZGVuY2VzLmdldChub2RlLmlkKS5zZXQodmFsdWUsIHBvdGVudGlhbCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0aGlzLmV2aWRlbmNlcy5nZXQobm9kZS5pZCkuZ2V0KHZhbHVlKTtcbiAgfVxuICBcbiAgcHVibGljIHVub2JzZXJ2ZShub2RlczogQmJuTm9kZVtdKTogSm9pblRyZWUge1xuICAgIGxldCBldmlkZW5jZXMgPSBub2Rlcy5tYXAobiA9PiB0aGlzLmdldFVub2JzZXJ2ZWRFdmlkZW5jZShuKSk7XG4gICAgdGhpcy51cGRhdGVFdmlkZW5jZXMoZXZpZGVuY2VzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgcHVibGljIHVub2JzZXJ2ZUFsbCgpOiBKb2luVHJlZSB7XG4gICAgdGhpcy51bm9ic2VydmUodGhpcy5nZXRCYm5Ob2RlcygpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgcHVibGljIHVwZGF0ZUV2aWRlbmNlcyhldmlkZW5jZXM6IEV2aWRlbmNlW10pOiBKb2luVHJlZSB7XG4gICAgZXZpZGVuY2VzLmZvckVhY2goZSA9PiBlLnZhbGlkYXRlKCkpO1xuICAgIGxldCBjaGFuZ2UgPSB0aGlzLmdldENoYW5nZVR5cGUoZXZpZGVuY2VzKTtcbiAgICBldmlkZW5jZXMuZm9yRWFjaChldmlkZW5jZSA9PiB7XG4gICAgICBsZXQgbm9kZSA9IGV2aWRlbmNlLm5vZGU7XG4gICAgICBsZXQgcG90ZW50aWFscyA9IHRoaXMuZXZpZGVuY2VzLmdldChub2RlLmlkKTtcbiAgICAgIFxuICAgICAgZXZpZGVuY2UudmFsdWVzLmZvckVhY2goKHYsIGspID0+IHtcbiAgICAgICAgbGV0IHBvdGVudGlhbCA9IHBvdGVudGlhbHMuZ2V0KGspO1xuICAgICAgICBwb3RlbnRpYWwuZW50cmllc1swXS52YWx1ZSA9IHY7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLm5vdGlmeUxpc3RlbmVyKGNoYW5nZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHB1YmxpYyBzZXRPYnNlcnZhdGlvbihldmlkZW5jZTogRXZpZGVuY2UpOiBKb2luVHJlZSB7XG4gICAgLy8gb25seSBkZWFsIHdpdGggb2JzZXJ2YXRpb24gdHlwZXMgaW4gdGhpcyBtZXRob2RcbiAgICBpZiAoRXZpZGVuY2VUeXBlLk9CU0VSVkFUSU9OICE9PSBldmlkZW5jZS50eXBlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnZXZpZGVuY2Ugbm90IG9ic2VydmF0aW9uIHR5cGUgcmV0dXJuaW5nJyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgXG4gICAgLy8gY2hlY2sgdG8gc2VlIGlmIHByZXZpb3VzIGV2aWRlbmNlIHdhcyBhbHNvIG9ic2VydmF0aW9uXG4gICAgLy8gZXZpZGVuY2UgdGhhdCBpcyBvYnNlcnZhdGlvbiB0eXBlIGFsd2F5cyBoYXMgb25seSBvbmUgdmFsdWUgdGhhdCBpcyAxXG4gICAgbGV0IHBvdGVudGlhbHMgPSB0aGlzLmV2aWRlbmNlcy5nZXQoZXZpZGVuY2Uubm9kZS5pZCk7XG4gICAgbGV0IHB2YWx1ZXMgPSBBcnJheS5mcm9tKHBvdGVudGlhbHMua2V5cygpKVxuICAgICAgLmZpbHRlcih2ID0+IHtcbiAgICAgICAgbGV0IHBvdGVudGlhbCA9IHBvdGVudGlhbHMuZ2V0KHYpO1xuICAgICAgICBsZXQgZW50cnkgPSBwb3RlbnRpYWwuZW50cmllc1swXTtcbiAgICAgICAgbGV0IHAgPSBlbnRyeS52YWx1ZTtcbiAgICAgICAgaWYgKHAgPT09IDEuMCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pO1xuICAgIGxldCBjdmFsdWVzID0gQXJyYXkuZnJvbShldmlkZW5jZS52YWx1ZXMua2V5cygpKVxuICAgICAgLmZpbHRlcih2ID0+IDEuMCA9PT0gZXZpZGVuY2UudmFsdWVzLmdldCh2KSk7XG4gICAgXG4gICAgaWYgKDEgPT09IHB2YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAvLyBwcmV2aW91cyBldmlkZW5jZSB3YXMgb2YgdHlwZSBvYnNlcnZhdGlvblxuICAgICAgLy8gYm90aCBjdXJyZW50IGFuZCBwcmV2aW91cyBldmlkZW5jZXMgYXJlIG9ic2VydmF0aW9uIHR5cGVcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdib3RoIHByZXZpb3VzIGFuZCBjdXJyZW50IGV2aWRlbmNlcyBhcmUgb2YgdHlwZSBvYnNlcnZhdGlvbicpO1xuICAgICAgXG4gICAgICBsZXQgbGFzdFZhbHVlID0gcHZhbHVlc1swXTtcbiAgICAgIGxldCBjdXJyVmFsdWUgPSBjdmFsdWVzWzBdO1xuICAgICAgaWYgKGxhc3RWYWx1ZSA9PT0gY3VyclZhbHVlKSB7XG4gICAgICAgIC8vIGlmIHRoZSBsYXN0IHZhbHVlIGlzIGVxdWFsIHRvIHRoZSBjdXJyZW50IHZhbHVlLCB1bm9ic2VydmUgaXRcbiAgICAgICAgLy8gY29uc29sZS5sb2cobGFzdFZhbHVlICsgJyBlcXVhbHMgJyArIGN1cnJWYWx1ZSArICcgc28gd2lsbCB1bm9ic2VydmUnKTtcbiAgICAgICAgdGhpcy51bm9ic2VydmUoW2V2aWRlbmNlLm5vZGVdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGxhc3RWYWx1ZSArICcgTk9UIGVxdWFscyAnICsgY3VyclZhbHVlICsgJyBzbyB3aWxsIHVwZGF0ZSBldmlkZW5jZScpO1xuICAgICAgICB0aGlzLnVwZGF0ZUV2aWRlbmNlcyhbZXZpZGVuY2VdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29uc29sZS5sb2coJ251bWJlciBwcmV2aW91cyB2YWx1ZXMgPT09IDEgd2FzICcgKyBwdmFsdWVzLmxlbmd0aCArICcgc28gd2lsbCB1cGRhdGUgZXZpZGVuY2UnKTtcbiAgICAgIHRoaXMudXBkYXRlRXZpZGVuY2VzKFtldmlkZW5jZV0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgcHJvdGVjdGVkIHNob3VsZEFkZChlZGdlOiBCRWRnZSk6IGJvb2xlYW4ge1xuICAgIGxldCBqdEVkZ2UgPSBlZGdlIGFzIEp0RWRnZTtcbiAgICBsZXQgc2VwU2V0ID0ganRFZGdlLnNlcFNldDtcbiAgICBsZXQgbGhzID0ganRFZGdlLmxocyBhcyBDbGlxdWU7XG4gICAgbGV0IHJocyA9IGp0RWRnZS5yaHMgYXMgQ2xpcXVlO1xuICAgIFxuICAgIGlmIChsaHMuaWQgPT09IHJocy5pZCkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ2ZhbHNlOiAnICsganRFZGdlLnRvU3RyaW5nKCkpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIShuZXcgSm9pblRyZWVQYXRoRGV0ZWN0b3IodGhpcywgbGhzLmlkLCByaHMuaWQpKS5leGlzdHMoKSkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ3RydWU6ICcgKyAganRFZGdlLnRvU3RyaW5nKCkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIGNvbnNvbGUubG9nKCdmYWxzZTogJyArIGp0RWRnZS50b1N0cmluZygpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIHByaXZhdGUgZ2V0Q2hhbmdlVHlwZShldmlkZW5jZXM6IEV2aWRlbmNlW10pOiBDaGFuZ2VUeXBlIHtcbiAgICBsZXQgY2hhbmdlcyA9IGV2aWRlbmNlcy5tYXAoZXZpZGVuY2UgPT4ge1xuICAgICAgbGV0IG5vZGUgPSBldmlkZW5jZS5ub2RlO1xuICAgICAgbGV0IHBvdGVudGlhbHMgPSB0aGlzLmV2aWRlbmNlcy5nZXQobm9kZS5pZCk7XG4gICAgICBsZXQgY2hhbmdlID0gZXZpZGVuY2UuY29tcGFyZShwb3RlbnRpYWxzKTtcbiAgICAgIHJldHVybiBjaGFuZ2U7XG4gICAgfSk7XG4gICAgbGV0IGNvdW50ID0gY2hhbmdlcy5maWx0ZXIoYyA9PiBDaGFuZ2VUeXBlLlJFVFJBQ1RJT04gPT09IGMpLmxlbmd0aDtcbiAgICBpZiAoY291bnQgPiAwKSB7XG4gICAgICByZXR1cm4gQ2hhbmdlVHlwZS5SRVRSQUNUSU9OO1xuICAgIH1cbiAgICBcbiAgICBjb3VudCA9IGNoYW5nZXMuZmlsdGVyKGMgPT4gQ2hhbmdlVHlwZS5VUERBVEUgPT09IGMpLmxlbmd0aDtcbiAgICBpZiAoY291bnQgPiAwKSB7XG4gICAgICByZXR1cm4gQ2hhbmdlVHlwZS5VUERBVEU7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBDaGFuZ2VUeXBlLk5PTkU7XG4gIH1cbiAgXG4gIHByaXZhdGUgZ2V0VW5vYnNlcnZlZEV2aWRlbmNlKG5vZGU6IEJibk5vZGUpOiBFdmlkZW5jZSB7XG4gICAgbGV0IGV2aWRlbmNlID0gbmV3IEV2aWRlbmNlKG5vZGUsIEV2aWRlbmNlVHlwZS5VTk9CU0VSVkUpO1xuICAgIG5vZGUudmFyaWFibGUudmFsdWVzLmZvckVhY2godiA9PiBldmlkZW5jZS5hZGRWYWx1ZSh2LCAxLjApKTtcbiAgICByZXR1cm4gZXZpZGVuY2U7XG4gIH1cbiAgXG4gIHByaXZhdGUgbm90aWZ5TGlzdGVuZXIoY2hhbmdlOiBDaGFuZ2VUeXBlKSB7XG4gICAgaWYgKHRoaXMubGlzdGVuZXIpIHtcbiAgICAgIGlmIChDaGFuZ2VUeXBlLlJFVFJBQ1RJT04gPT09IGNoYW5nZSkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyLmV2aWRlbmNlUmV0cmFjdGVkKHRoaXMpO1xuICAgICAgfSBlbHNlIGlmIChDaGFuZ2VUeXBlLlVQREFURSA9PT0gY2hhbmdlKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXIuZXZpZGVuY2VVcGRhdGVkKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBKb2luVHJlZVBhdGhEZXRlY3RvciB7XG4gIHNlZW46IFNldDxudW1iZXI+O1xuICBncmFwaDogSm9pblRyZWU7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjtcbiAgXG4gIGNvbnN0cnVjdG9yKGdyYXBoOiBKb2luVHJlZSwgc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKSB7XG4gICAgdGhpcy5zZWVuID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgdGhpcy5ncmFwaCA9IGdyYXBoO1xuICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICB0aGlzLnN0b3AgPSBzdG9wO1xuICB9XG4gIFxuICBwdWJsaWMgZXhpc3RzKCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLnN0YXJ0ID09PSB0aGlzLnN0b3ApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5maW5kKHRoaXMuc3RhcnQpO1xuICB9XG4gIFxuICBwcml2YXRlIGZpbmQoaWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGxldCBuZWlnaGJvcnMgPSB0aGlzLmdyYXBoLmdldE5laWdoYm9ycyhpZCk7XG4gICAgaWYgKG5laWdoYm9ycy5oYXModGhpcy5zdG9wKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2Vlbi5hZGQoaWQpO1xuICAgICAgZm9yIChsZXQgbmVpZ2hib3Igb2YgbmVpZ2hib3JzKSB7XG4gICAgICAgIGlmICghdGhpcy5zZWVuLmhhcyhuZWlnaGJvcikpIHtcbiAgICAgICAgICBpZiAodGhpcy5maW5kKG5laWdoYm9yKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEpvaW5UcmVlTGlzdGVuZXIge1xuICBldmlkZW5jZVJldHJhY3RlZChqb2ludHJlZTogSm9pblRyZWUpOiB2b2lkO1xuICBcbiAgZXZpZGVuY2VVcGRhdGVkKGpvaW50cmVlOiBKb2luVHJlZSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBlbnVtIEV2aWRlbmNlVHlwZSB7XG4gIFZJUlRVQUwgPSAxLCBGSU5ESU5HLCBPQlNFUlZBVElPTiwgVU5PQlNFUlZFXG59XG5cbmV4cG9ydCBlbnVtIENoYW5nZVR5cGUge1xuICBOT05FID0gMSwgVVBEQVRFLCBSRVRSQUNUSU9OXG59XG5cbmV4cG9ydCBjbGFzcyBFdmlkZW5jZUJ1aWxkZXIge1xuICB2YWx1ZXMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICBub2RlOiBCYm5Ob2RlO1xuICB0eXBlID0gRXZpZGVuY2VUeXBlLk9CU0VSVkFUSU9OO1xuICBcbiAgcHVibGljIHdpdGhOb2RlKG5vZGU6IEJibk5vZGUpOiBFdmlkZW5jZUJ1aWxkZXIge1xuICAgIHRoaXMubm9kZSA9IG5vZGU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHB1YmxpYyB3aXRoVHlwZSh0eXBlOiBFdmlkZW5jZVR5cGUpOiBFdmlkZW5jZUJ1aWxkZXIge1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHB1YmxpYyB3aXRoRXZpZGVuY2UodmFsOiBzdHJpbmcsIGxpa2VsaWhvb2Q6IG51bWJlcik6IEV2aWRlbmNlQnVpbGRlciB7XG4gICAgdGhpcy52YWx1ZXMuc2V0KHZhbCwgbGlrZWxpaG9vZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHB1YmxpYyBidWlsZCgpOiBFdmlkZW5jZSB7XG4gICAgbGV0IGV2aWRlbmNlID0gbmV3IEV2aWRlbmNlKHRoaXMubm9kZSwgdGhpcy50eXBlKTtcbiAgICB0aGlzLnZhbHVlcy5mb3JFYWNoKCh2LCBrKSA9PiBldmlkZW5jZS52YWx1ZXMuc2V0KGssIHYpKTtcbiAgICByZXR1cm4gZXZpZGVuY2U7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEV2aWRlbmNlIHtcbiAgdmFsdWVzOiBNYXA8c3RyaW5nLCBudW1iZXI+O1xuICBcbiAgY29uc3RydWN0b3IocHVibGljIG5vZGU6IEJibk5vZGUsIHB1YmxpYyB0eXBlOiBFdmlkZW5jZVR5cGUpIHtcbiAgICB0aGlzLnZhbHVlcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gIH1cbiAgXG4gIHB1YmxpYyBhZGRWYWx1ZSh2YWx1ZTogc3RyaW5nLCBsaWtlbGlob29kOiBudW1iZXIpOiBFdmlkZW5jZSB7XG4gICAgdGhpcy52YWx1ZXMuc2V0KHZhbHVlLCBsaWtlbGlob29kKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgcHVibGljIGNvbXBhcmUocG90ZW50aWFsczogTWFwPHN0cmluZywgUG90ZW50aWFsPik6IENoYW5nZVR5cGUge1xuICAgIGxldCB0aGF0ID0gdGhpcy5jb252ZXJ0KHBvdGVudGlhbHMpO1xuICAgIFxuICAgIGxldCB1bm9ic2VydmVUaGF0ID0gdGhpcy5pc1Vub2JzZXJ2ZWQodGhhdCk7XG4gICAgbGV0IHVub2JzZXJ2ZVRoaXMgPSB0aGlzLmlzVW5vYnNlcnZlZCh0aGlzLnZhbHVlcyk7XG4gICAgXG4gICAgaWYgKHVub2JzZXJ2ZVRoYXQgJiYgdW5vYnNlcnZlVGhpcykge1xuICAgICAgcmV0dXJuIENoYW5nZVR5cGUuTk9ORTtcbiAgICB9XG4gICAgXG4gICAgbGV0IG9ic2VydmVUaGF0ID0gdGhpcy5pc09ic2VydmVkKHRoYXQpO1xuICAgIGxldCBvYnNlcnZlVGhpcyA9IHRoaXMuaXNPYnNlcnZlZCh0aGlzLnZhbHVlcyk7XG4gICAgXG4gICAgaWYgKG9ic2VydmVUaGF0ICYmIG9ic2VydmVUaGlzKSB7XG4gICAgICBsZXQgczEgPSB0aGlzLmdldE9ic2VydmVkVmFsdWUodGhhdCk7XG4gICAgICBsZXQgczIgPSB0aGlzLmdldE9ic2VydmVkVmFsdWUodGhpcy52YWx1ZXMpO1xuICAgICAgXG4gICAgICBpZiAoczEgPT09IHMyKSB7XG4gICAgICAgIHJldHVybiBDaGFuZ2VUeXBlLk5PTkU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQ2hhbmdlVHlwZS5SRVRSQUNUSU9OO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gQ2hhbmdlVHlwZS5SRVRSQUNUSU9OO1xuICB9XG4gIFxuICBwdWJsaWMgdmFsaWRhdGUoKSB7XG4gICAgdGhpcy5ub2RlLnZhcmlhYmxlLnZhbHVlcy5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgIGlmICghdGhpcy52YWx1ZXMuaGFzKHZhbHVlKSkge1xuICAgICAgICB0aGlzLnZhbHVlcy5zZXQodmFsdWUsIDAuMCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKEV2aWRlbmNlVHlwZS5WSVJUVUFMID09PSB0aGlzLnR5cGUpIHtcbiAgICAgIGxldCBzdW0gPSB0aGlzLm5vZGUudmFyaWFibGUudmFsdWVzXG4gICAgICAgIC5tYXAodmFsdWUgPT4gdGhpcy52YWx1ZXMuZ2V0KHZhbHVlKSlcbiAgICAgICAgLnJlZHVjZSgoYSwgYikgPT4gYSArIGIpO1xuICAgICAgdGhpcy5ub2RlLnZhcmlhYmxlLnZhbHVlcy5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgICAgbGV0IGQgPSB0aGlzLnZhbHVlcy5nZXQodmFsdWUpIC8gc3VtO1xuICAgICAgICB0aGlzLnZhbHVlcy5zZXQodmFsdWUsIGQpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChFdmlkZW5jZVR5cGUuRklORElORyA9PT0gdGhpcy50eXBlKSB7XG4gICAgICB0aGlzLm5vZGUudmFyaWFibGUudmFsdWVzLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgICBsZXQgZCA9IHRoaXMudmFsdWVzLmdldCh2YWx1ZSkgPiAwLjAgPyAxLjAgOiAwLjA7XG4gICAgICAgIHRoaXMudmFsdWVzLnNldCh2YWx1ZSwgZCk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbGV0IGNvdW50ID0gdGhpcy5ub2RlLnZhcmlhYmxlLnZhbHVlc1xuICAgICAgICAubWFwKHZhbHVlID0+IHRoaXMudmFsdWVzLmdldCh2YWx1ZSkpXG4gICAgICAgIC5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiKTtcbiAgICAgIFxuICAgICAgaWYgKDAgPT09IGNvdW50KSB7XG4gICAgICAgIHRoaXMubm9kZS52YXJpYWJsZS52YWx1ZXMuZm9yRWFjaCh2YWx1ZSA9PiB0aGlzLnZhbHVlcy5zZXQodmFsdWUsIDEuMCkpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoRXZpZGVuY2VUeXBlLk9CU0VSVkFUSU9OID09PSB0aGlzLnR5cGUpIHtcbiAgICAgIGxldCBrZXlzID0gQXJyYXkuZnJvbSh0aGlzLnZhbHVlcy5rZXlzKCkpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiAtMSAqIENvbXBhcmVVdGlsLmludENvbXBhcmUodGhpcy52YWx1ZXMuZ2V0KGEpLCB0aGlzLnZhbHVlcy5nZXQoYikpKTtcbiAgICAgIGxldCBrZXkgPSBrZXlzWzBdO1xuICAgICAgXG4gICAgICB0aGlzLm5vZGUudmFyaWFibGUudmFsdWVzLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgICBpZiAoa2V5ID09PSB2YWx1ZSkge1xuICAgICAgICAgIHRoaXMudmFsdWVzLnNldCh2YWx1ZSwgMS4wKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnZhbHVlcy5zZXQodmFsdWUsIDAuMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoRXZpZGVuY2VUeXBlLlVOT0JTRVJWRSA9PT0gdGhpcy50eXBlKSB7XG4gICAgICB0aGlzLm5vZGUudmFyaWFibGUudmFsdWVzLmZvckVhY2godmFsdWUgPT4gdGhpcy52YWx1ZXMuc2V0KHZhbHVlLCAxLjApKTtcbiAgICB9XG4gIH1cbiAgXG4gIHByaXZhdGUgY29udmVydChtYXA6IE1hcDxzdHJpbmcsIFBvdGVudGlhbD4pOiBNYXA8c3RyaW5nLCBudW1iZXI+IHtcbiAgICBsZXQgbSA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgbWFwLmZvckVhY2goKHYsIGspID0+IHtcbiAgICAgIGxldCBsaWtlbGlob29kID0gdi5lbnRyaWVzWzBdLnZhbHVlO1xuICAgICAgbS5zZXQoaywgbGlrZWxpaG9vZCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIG07XG4gIH1cbiAgXG4gIHByaXZhdGUgaXNVbm9ic2VydmVkKHZhbHVlczogTWFwPHN0cmluZywgbnVtYmVyPik6IGJvb2xlYW4ge1xuICAgIGxldCBjb3VudHMgPSAwO1xuICAgIHZhbHVlcy5mb3JFYWNoKCh2LCBrKSA9PiBjb3VudHMgKz0gdik7XG4gICAgcmV0dXJuIChjb3VudHMgPT09IHZhbHVlcy5zaXplKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBpc09ic2VydmVkKHZhbHVlczogTWFwPHN0cmluZywgbnVtYmVyPik6IGJvb2xlYW4ge1xuICAgIGxldCBjb3VudE9uZSA9IDA7XG4gICAgbGV0IGNvdW50WmVybyA9IDA7XG4gICAgdmFsdWVzLmZvckVhY2goKHYsIGspID0+IHtcbiAgICAgIGlmICgxLjAgPT09IHYpIHtcbiAgICAgICAgY291bnRPbmUrKztcbiAgICAgIH0gZWxzZSBpZiAoMC4wID09PSB2KSB7XG4gICAgICAgIGNvdW50WmVybysrO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiAoMSA9PT0gY291bnRPbmUgJiYgdmFsdWVzLnNpemUgLSAxID09PSBjb3VudFplcm8pO1xuICB9XG4gIFxuICBwcml2YXRlIGdldE9ic2VydmVkVmFsdWUodmFsdWVzOiBNYXA8c3RyaW5nLCBudW1iZXI+KTogc3RyaW5nIHtcbiAgICBsZXQgc3RycyA9IEFycmF5LmZyb20odmFsdWVzLmtleXMoKSlcbiAgICAgIC5maWx0ZXIoayA9PiAoMS4wID09PSB2YWx1ZXMuZ2V0KGspKSk7XG4gICAgcmV0dXJuIHN0cnNbMF07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBvdGVudGlhbCB7XG4gIHB1YmxpYyBlbnRyaWVzOiBQb3RlbnRpYWxFbnRyeVtdO1xuICBcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5lbnRyaWVzID0gW107XG4gIH1cbiAgXG4gIHB1YmxpYyBhZGRFbnRyeShlbnRyeTogUG90ZW50aWFsRW50cnkpIHtcbiAgICB0aGlzLmVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRNYXRjaGluZ0VudHJpZXMoZW50cnk6IFBvdGVudGlhbEVudHJ5KTogUG90ZW50aWFsRW50cnlbXSB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllcy5maWx0ZXIoZSA9PiBlLm1hdGNoZXMoZW50cnkpKTtcbiAgfVxuICBcbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgbGV0IHMgPSAnJztcbiAgICB0aGlzLmVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiBzICs9IGVudHJ5LnRvU3RyaW5nKCkgKyAnXFxuJyk7XG4gICAgcmV0dXJuIHMuc3Vic3RyKDAsIHMubGVuZ3RoIC0gMSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBvdGVudGlhbEVudHJ5IHtcbiAgcHVibGljIGVudHJpZXM6IE1hcDxudW1iZXIsIHN0cmluZz47XG4gIHB1YmxpYyB2YWx1ZTogbnVtYmVyO1xuICBcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5lbnRyaWVzID0gbmV3IE1hcDxudW1iZXIsIHN0cmluZz4oKTtcbiAgICB0aGlzLnZhbHVlID0gMS4wO1xuICB9XG4gIFxuICBwdWJsaWMgYWRkKGlkOiBudW1iZXIsIHZhbHVlOiBzdHJpbmcpOiBQb3RlbnRpYWxFbnRyeSB7XG4gICAgaWYgKCF0aGlzLmVudHJpZXMuaGFzKGlkKSkge1xuICAgICAgdGhpcy5lbnRyaWVzLnNldChpZCwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgcHVibGljIG1hdGNoZXModGhhdDogUG90ZW50aWFsRW50cnkpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgdGhhdC5lbnRyaWVzLmtleXMoKSkge1xuICAgICAgaWYgKCF0aGlzLmVudHJpZXMuaGFzKGtleSkgfHwgISh0aGlzLmVudHJpZXMuZ2V0KGtleSkgPT09IHRoYXQuZW50cmllcy5nZXQoa2V5KSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBcbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgbGV0IHMgPSAnJztcbiAgICB0aGlzLmVudHJpZXMuZm9yRWFjaCgodiwgaykgPT4ge1xuICAgICAgcyArPSBrICsgJz0nICsgdiArICcsJztcbiAgICB9KTtcbiAgICBzICs9IHRoaXMudmFsdWU7XG4gICAgcmV0dXJuIHM7XG4gIH1cbiAgXG4gIHB1YmxpYyBkdXBsaWNhdGUoKTogUG90ZW50aWFsRW50cnkge1xuICAgIGxldCBlbnRyeSA9IG5ldyBQb3RlbnRpYWxFbnRyeSgpO1xuICAgIHRoaXMuZW50cmllcy5mb3JFYWNoKCh2LCBrKSA9PiBlbnRyeS5hZGQoaywgdikpO1xuICAgIGVudHJ5LnZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICByZXR1cm4gZW50cnk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIElkVXRpbCB7XG4gIHN0YXRpYyBoYXNoT2ZTdHIoczogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBsZXQgaGFzaCA9IDA7XG4gICAgaWYgKHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gaGFzaDtcbiAgICB9XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGxldCBjaHIgPSBzLmNoYXJDb2RlQXQoaSk7XG4gICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjaHI7XG4gICAgICBoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuICAgIH1cbiAgICByZXR1cm4gaGFzaDtcbiAgfVxuICBcbiAgc3RhdGljIGhhc2hPZkFycihhcnI6IHN0cmluZ1tdKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5oYXNoT2ZTdHIoYXJyLnNvcnQoKS5qb2luKCctJykpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQb3RlbnRpYWxVdGlsIHtcbiAgcHVibGljIHN0YXRpYyBwYXNzU2luZ2xlTWVzc2FnZShqb2ludHJlZTogSm9pblRyZWUsIHg6IENsaXF1ZSwgczogU2VwU2V0LCB5OiBDbGlxdWUpIHtcbiAgICAvLyBjb25zb2xlLmxvZygncGFzc2luZyBtZXNzYWdlICcgKyB4LnRvU3RyaW5nKCkgKyAnIC0tICcgKyBzLnRvU3RyaW5nKCkgKyAnIC0tICcgKyB5LnRvU3RyaW5nKCkpO1xuICAgIGxldCBvbGRTZXBTZXRQb3RlbnRpYWwgPSBqb2ludHJlZS5wb3RlbnRpYWxzLmdldChzLmlkKTtcbiAgICBsZXQgeVBvdGVudGlhbCA9IGpvaW50cmVlLnBvdGVudGlhbHMuZ2V0KHkuaWQpO1xuICAgIFxuICAgIGxldCBuZXdTZXBTZXRQb3RlbnRpYWwgPSB0aGlzLm1hcmdpbmFsaXplRm9yKGpvaW50cmVlLCB4LCBzLm5vZGVzKTtcbiAgICBqb2ludHJlZS5hZGRQb3RlbnRpYWwocywgbmV3U2VwU2V0UG90ZW50aWFsKTtcbiAgICBcbiAgICB0aGlzLm11bHRpcGx5KHlQb3RlbnRpYWwsIHRoaXMuZGl2aWRlKG5ld1NlcFNldFBvdGVudGlhbCwgb2xkU2VwU2V0UG90ZW50aWFsKSk7XG4gIH1cbiAgXG4gIHB1YmxpYyBzdGF0aWMgbWFyZ2luYWxpemVGb3Ioam9pblRyZWU6IEpvaW5UcmVlLCBjbGlxdWU6IENsaXF1ZSwgbm9kZXM6IEJibk5vZGVbXSk6IFBvdGVudGlhbCB7XG4gICAgbGV0IHBvdGVudGlhbCA9IHRoaXMuZ2V0UG90ZW50aWFsRnJvbU5vZGVzKG5vZGVzKTtcbiAgICBsZXQgY2xpcXVlUG90ZW50aWFsID0gam9pblRyZWUucG90ZW50aWFscy5nZXQoY2xpcXVlLmlkKTtcbiAgICBcbiAgICBwb3RlbnRpYWwuZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgIGxldCBtYXRjaGVkRW50cmllcyA9IGNsaXF1ZVBvdGVudGlhbC5nZXRNYXRjaGluZ0VudHJpZXMoZW50cnkpO1xuICAgICAgbGV0IHQgPSAwLjA7XG4gICAgICBtYXRjaGVkRW50cmllcy5mb3JFYWNoKG1hdGNoZWRFbnRyeSA9PiB0ICs9IG1hdGNoZWRFbnRyeS52YWx1ZSk7XG4gICAgICBlbnRyeS52YWx1ZSA9IHQ7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHBvdGVudGlhbDtcbiAgfVxuICBcbiAgcHVibGljIHN0YXRpYyBub3JtYWxpemUocG90ZW50aWFsOiBQb3RlbnRpYWwpOiBQb3RlbnRpYWwge1xuICAgIGxldCBzdW0gPSAwLjA7XG4gICAgcG90ZW50aWFsLmVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICBzdW0gKz0gZW50cnkudmFsdWU7XG4gICAgfSk7XG4gICAgXG4gICAgcG90ZW50aWFsLmVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICBsZXQgZCA9IGVudHJ5LnZhbHVlIC8gc3VtO1xuICAgICAgZW50cnkudmFsdWUgPSBkO1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBwb3RlbnRpYWw7XG4gIH1cbiAgXG4gIHB1YmxpYyBzdGF0aWMgZGl2aWRlKG51bWVyYXRvcjogUG90ZW50aWFsLCBkZW5vbWluYXRvcjogUG90ZW50aWFsKTogUG90ZW50aWFsIHtcbiAgICBsZXQgcG90ZW50aWFsID0gbmV3IFBvdGVudGlhbCgpO1xuICAgIG51bWVyYXRvci5lbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgbGV0IGVudHJpZXMgPSBkZW5vbWluYXRvci5lbnRyaWVzO1xuICAgICAgaWYgKGVudHJpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgZSA9IGVudHJpZXNbMF07XG4gICAgICAgIGxldCBkID0gKHRoaXMuaXNaZXJvKGVudHJ5LnZhbHVlKSB8fCB0aGlzLmlzWmVybyhlLnZhbHVlKSkgPyAwLjAgOiBlbnRyeS52YWx1ZSAvIGUudmFsdWU7XG4gICAgICAgIGxldCBuZXdFbnRyeSA9IGVudHJ5LmR1cGxpY2F0ZSgpO1xuICAgICAgICBuZXdFbnRyeS52YWx1ZSA9IGQ7XG4gICAgICAgIHBvdGVudGlhbC5hZGRFbnRyeShuZXdFbnRyeSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHBvdGVudGlhbDtcbiAgfVxuICBcbiAgcHVibGljIHN0YXRpYyBtdWx0aXBseShiaWdnZXI6IFBvdGVudGlhbCwgc21hbGxlcjogUG90ZW50aWFsKSB7XG4gICAgc21hbGxlci5lbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgbGV0IGVudHJpZXMgPSBiaWdnZXIuZ2V0TWF0Y2hpbmdFbnRyaWVzKGVudHJ5KTtcbiAgICAgIGVudHJpZXMuZm9yRWFjaChlID0+IHtcbiAgICAgICAgbGV0IGQgPSBlLnZhbHVlICogZW50cnkudmFsdWU7XG4gICAgICAgIGUudmFsdWUgPSBkO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgXG4gIHB1YmxpYyBzdGF0aWMgZ2V0UG90ZW50aWFsKG5vZGU6IEJibk5vZGUsIHBhcmVudHM6IEJibk5vZGVbXSkge1xuICAgIGxldCBwb3RlbnRpYWwgPSB0aGlzLmdldFBvdGVudGlhbEZyb21Ob2Rlcyh0aGlzLm1lcmdlKG5vZGUsIHBhcmVudHMpKTtcbiAgICBsZXQgdG90YWwgPSBwb3RlbnRpYWwuZW50cmllcy5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7XG4gICAgICBsZXQgcHJvYiA9IG5vZGUucHJvYnNbaV07XG4gICAgICBwb3RlbnRpYWwuZW50cmllc1tpXS52YWx1ZSA9IHByb2I7XG4gICAgfVxuICAgIHJldHVybiBwb3RlbnRpYWw7XG4gIH1cbiAgXG4gIHB1YmxpYyBzdGF0aWMgZ2V0UG90ZW50aWFsRnJvbU5vZGVzKG5vZGVzOiBCYm5Ob2RlW10pOiBQb3RlbnRpYWwge1xuICAgIGxldCB2YWx1ZUxpc3RzID0gbm9kZXMubWFwKG4gPT4gbi52YXJpYWJsZS52YWx1ZXMpO1xuICAgIGxldCBjYXJ0ZXNpYW4gPSB0aGlzLmdldENhcnRlc2lhblByb2R1Y3QodmFsdWVMaXN0cyk7XG4gICAgbGV0IHBvdGVudGlhbCA9IG5ldyBQb3RlbnRpYWwoKTtcbiAgICBjYXJ0ZXNpYW4uZm9yRWFjaCh2YWx1ZXMgPT4ge1xuICAgICAgbGV0IGVudHJ5ID0gbmV3IFBvdGVudGlhbEVudHJ5KCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHZhbHVlc1tpXTtcbiAgICAgICAgbGV0IGlkID0gbm9kZXNbaV0uaWQ7XG4gICAgICAgIGVudHJ5LmFkZChpZCwgdmFsdWUpO1xuICAgICAgfVxuICAgICAgcG90ZW50aWFsLmFkZEVudHJ5KGVudHJ5KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcG90ZW50aWFsO1xuICB9XG4gIFxuICBwcml2YXRlIHN0YXRpYyBpc1plcm8oZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICgwID09PSBkKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0Q2FydGVzaWFuUHJvZHVjdChsaXN0czogc3RyaW5nW11bXSk6IHN0cmluZ1tdW10ge1xuICAgIGxldCByZXN1bHRzOiBzdHJpbmdbXVtdID0gW107XG4gICAgaWYgKGxpc3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBmaXJzdCA9IGxpc3RzWzBdO1xuICAgICAgbGV0IHRhaWwgPSBsaXN0cy5zbGljZSgwKS5zcGxpY2UoMSk7XG4gICAgICBsZXQgcmVtYWluaW5nID0gdGhpcy5nZXRDYXJ0ZXNpYW5Qcm9kdWN0KHRhaWwpO1xuICAgICAgZmlyc3QuZm9yRWFjaChjb25kaXRpb24gPT4ge1xuICAgICAgICBpZiAocmVtYWluaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZW1haW5pbmcuZm9yRWFjaChybGlzdCA9PiB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goY29uZGl0aW9uKTtcbiAgICAgICAgICAgIHJsaXN0LmZvckVhY2gociA9PiByZXN1bHQucHVzaChyKSk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGNvbmRpdGlvbik7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgbWVyZ2Uobm9kZTogQmJuTm9kZSwgcGFyZW50czogQmJuTm9kZVtdKTogQmJuTm9kZVtdIHtcbiAgICBsZXQgbm9kZXM6IEJibk5vZGVbXSA9IFtdO1xuICAgIHBhcmVudHMuZm9yRWFjaChuID0+IG5vZGVzLnB1c2gobikpO1xuICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgXG4gICAgcmV0dXJuIG5vZGVzO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCYm5VdGlsIHtcbiAgcHVibGljIHN0YXRpYyBnZXRIdWFuZ0dyYXBoKCk6IEJibiB7XG4gICAgbGV0IGEgPSBuZXcgQmJuTm9kZShuZXcgVmFyaWFibGUoMCwgJ2EnLCBuZXcgU2V0PHN0cmluZz4oWydvbicsICdvZmYnXSkpLCBbMC41LCAwLjVdKTtcbiAgICBsZXQgYiA9IG5ldyBCYm5Ob2RlKG5ldyBWYXJpYWJsZSgxLCAnYicsIG5ldyBTZXQ8c3RyaW5nPihbJ29uJywgJ29mZiddKSksIFswLjUsIDAuNSwgMC40LCAwLjZdKTtcbiAgICBsZXQgYyA9IG5ldyBCYm5Ob2RlKG5ldyBWYXJpYWJsZSgyLCAnYycsIG5ldyBTZXQ8c3RyaW5nPihbJ29uJywgJ29mZiddKSksIFswLjcsIDAuMywgMC4yLCAwLjhdKTtcbiAgICBsZXQgZCA9IG5ldyBCYm5Ob2RlKG5ldyBWYXJpYWJsZSgzLCAnZCcsIG5ldyBTZXQ8c3RyaW5nPihbJ29uJywgJ29mZiddKSksIFswLjksIDAuMSwgMC41LCAwLjVdKTtcbiAgICBsZXQgZSA9IG5ldyBCYm5Ob2RlKG5ldyBWYXJpYWJsZSg0LCAnZScsIG5ldyBTZXQ8c3RyaW5nPihbJ29uJywgJ29mZiddKSksIFswLjMsIDAuNywgMC42LCAwLjRdKTtcbiAgICBsZXQgZiA9IG5ldyBCYm5Ob2RlKG5ldyBWYXJpYWJsZSg1LCAnZicsIG5ldyBTZXQ8c3RyaW5nPihbJ29uJywgJ29mZiddKSksIFswLjAxLCAwLjk5LCAwLjAxLCAwLjk5LCAwLjAxLCAwLjk5LCAwLjk5LCAwLjAxXSk7XG4gICAgbGV0IGcgPSBuZXcgQmJuTm9kZShuZXcgVmFyaWFibGUoNiwgJ2cnLCBuZXcgU2V0PHN0cmluZz4oWydvbicsICdvZmYnXSkpLCBbMC44LCAwLjIsIDAuMSwgMC45XSk7XG4gICAgbGV0IGggPSBuZXcgQmJuTm9kZShuZXcgVmFyaWFibGUoNywgJ2gnLCBuZXcgU2V0PHN0cmluZz4oWydvbicsICdvZmYnXSkpLCBbMC4wNSwgMC45NSwgMC45NSwgMC4wNSwgMC45NSwgMC4wNSwgMC45NSwgMC4wNV0pO1xuICAgIFxuICAgIGxldCBiYm4gPSBuZXcgQmJuKClcbiAgICAgIC5hZGROb2RlKGEpXG4gICAgICAuYWRkTm9kZShiKVxuICAgICAgLmFkZE5vZGUoYylcbiAgICAgIC5hZGROb2RlKGQpXG4gICAgICAuYWRkTm9kZShlKVxuICAgICAgLmFkZE5vZGUoZilcbiAgICAgIC5hZGROb2RlKGcpXG4gICAgICAuYWRkTm9kZShoKVxuICAgICAgLmFkZEVkZ2UobmV3IEJFZGdlKGEsIGIsIEVkZ2VUeXBlLkRJUkVDVEVEKSlcbiAgICAgIC5hZGRFZGdlKG5ldyBCRWRnZShhLCBjLCBFZGdlVHlwZS5ESVJFQ1RFRCkpXG4gICAgICAuYWRkRWRnZShuZXcgQkVkZ2UoYiwgZCwgRWRnZVR5cGUuRElSRUNURUQpKVxuICAgICAgLmFkZEVkZ2UobmV3IEJFZGdlKGMsIGUsIEVkZ2VUeXBlLkRJUkVDVEVEKSlcbiAgICAgIC5hZGRFZGdlKG5ldyBCRWRnZShkLCBmLCBFZGdlVHlwZS5ESVJFQ1RFRCkpXG4gICAgICAuYWRkRWRnZShuZXcgQkVkZ2UoZSwgZiwgRWRnZVR5cGUuRElSRUNURUQpKVxuICAgICAgLmFkZEVkZ2UobmV3IEJFZGdlKGMsIGcsIEVkZ2VUeXBlLkRJUkVDVEVEKSlcbiAgICAgIC5hZGRFZGdlKG5ldyBCRWRnZShlLCBoLCBFZGdlVHlwZS5ESVJFQ1RFRCkpXG4gICAgICAuYWRkRWRnZShuZXcgQkVkZ2UoZywgaCwgRWRnZVR5cGUuRElSRUNURUQpKSBhcyBCYm47XG4gICAgcmV0dXJuIGJibjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29tcGFyZVV0aWwge1xuICBwdWJsaWMgc3RhdGljIGludENvbXBhcmUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiAoeCA8IHkpID8gLTEgOiAoKHggPT09IHkpID8gMCA6IDEpO1xuICB9XG4gIFxuICBwdWJsaWMgc3RhdGljIHN0ckNvbXBhcmUoeDogc3RyaW5nLCB5OiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB4LmxvY2FsZUNvbXBhcmUoeSk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIEJibixcbiAgQmJuTm9kZSxcbiAgQkVkZ2UsXG4gIEJOb2RlLFxuICBDbGlxdWUsXG4gIENvbXBhcmVVdGlsLFxuICBEYWcsXG4gIEpvaW5UcmVlLFxuICBKb2luVHJlZUxpc3RlbmVyLFxuICBKdEVkZ2UsXG4gIFBvdGVudGlhbFV0aWwsXG4gIFNlcFNldCxcbiAgVWdcbn0gZnJvbSAnLi9ncmFwaCc7XG5cbmV4cG9ydCBjbGFzcyBJbmZlcmVuY2VDb250cm9sbGVyIGltcGxlbWVudHMgSm9pblRyZWVMaXN0ZW5lciB7XG4gIHB1YmxpYyBzdGF0aWMgYXBwbHkoYmJuOiBCYm4pOiBKb2luVHJlZSB7XG4gICAgUG90ZW50aWFsSW5pdGlhbGl6ZXIuaW5pdChiYm4pO1xuICAgIFxuICAgIGxldCB1ZyA9IE1vcmFsaXplci5tb3JhbGl6ZShiYm4pO1xuICAgIGxldCBjbGlxdWVzID0gVHJpYW5ndWxhdG9yLnRyaWFuZ3VsYXRlKHVnKTtcbiAgICBsZXQgam9pblRyZWUgPSBUcmFuc2Zvcm1lci50cmFuc2Zvcm0oY2xpcXVlcyk7XG4gICAgXG4gICAgSW5pdGlhbGl6ZXIuaW5pdGlhbGl6ZShqb2luVHJlZSk7XG4gICAgUHJvcGFnYXRvci5wcm9wYWdhdGUoam9pblRyZWUpO1xuICAgIFxuICAgIGpvaW5UcmVlLnNldExpc3RlbmVyKG5ldyBJbmZlcmVuY2VDb250cm9sbGVyKCkpO1xuICAgIFxuICAgIHJldHVybiBqb2luVHJlZTtcbiAgfVxuICBcbiAgcHVibGljIGV2aWRlbmNlUmV0cmFjdGVkKGpvaW50cmVlOiBKb2luVHJlZSkge1xuICAgIEluaXRpYWxpemVyLmluaXRpYWxpemUoam9pbnRyZWUpO1xuICAgIFByb3BhZ2F0b3IucHJvcGFnYXRlKGpvaW50cmVlKTtcbiAgfVxuICBcbiAgcHVibGljIGV2aWRlbmNlVXBkYXRlZChqb2ludHJlZTogSm9pblRyZWUpIHtcbiAgICBQcm9wYWdhdG9yLnByb3BhZ2F0ZShqb2ludHJlZSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEluaXRpYWxpemVyIHtcbiAgcHVibGljIHN0YXRpYyBpbml0aWFsaXplKGpvaW5UcmVlOiBKb2luVHJlZSk6IEpvaW5UcmVlIHtcbiAgICBqb2luVHJlZS5nZXRDbGlxdWVzKCkuZm9yRWFjaChjbGlxdWUgPT4ge1xuICAgICAgbGV0IHBvdGVudGlhbCA9IFBvdGVudGlhbFV0aWwuZ2V0UG90ZW50aWFsRnJvbU5vZGVzKGNsaXF1ZS5ub2Rlcyk7XG4gICAgICBqb2luVHJlZS5hZGRQb3RlbnRpYWwoY2xpcXVlLCBwb3RlbnRpYWwpO1xuICAgIH0pO1xuICAgIFxuICAgIGpvaW5UcmVlLmdldFNlcFNldHMoKS5mb3JFYWNoKHNlcFNldCA9PiB7XG4gICAgICBsZXQgcG90ZW50aWFsID0gUG90ZW50aWFsVXRpbC5nZXRQb3RlbnRpYWxGcm9tTm9kZXMoc2VwU2V0Lm5vZGVzKTtcbiAgICAgIGpvaW5UcmVlLmFkZFBvdGVudGlhbChzZXBTZXQsIHBvdGVudGlhbCk7XG4gICAgfSk7XG4gICAgXG4gICAgam9pblRyZWUuZ2V0QmJuTm9kZXMoKS5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgbGV0IGNsaXF1ZSA9IHRoaXMuZ2V0Q2xpcXVlKG5vZGUsIGpvaW5UcmVlKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKG5vZGUudmFyaWFibGUubmFtZSArICcgbWFwcGVkIHRvIGNsaXF1ZSAnICsgY2xpcXVlLnRvU3RyaW5nKCkpO1xuICAgICAgbGV0IHAxID0gam9pblRyZWUucG90ZW50aWFscy5nZXQoY2xpcXVlLmlkKTtcbiAgICAgIGxldCBwMiA9IG5vZGUucG90ZW50aWFsO1xuICAgICAgLy8gY29uc29sZS5sb2cocDEudG9TdHJpbmcoKSk7XG4gICAgICAvLyBjb25zb2xlLmxvZygnPj4+PicpO1xuICAgICAgLy8gY29uc29sZS5sb2cocDIudG9TdHJpbmcoKSk7XG4gICAgICAvLyBjb25zb2xlLmxvZygnLS0tLScpO1xuICAgICAgUG90ZW50aWFsVXRpbC5tdWx0aXBseShwMSwgcDIpO1xuICAgICAgLy8gY29uc29sZS5sb2cocDEudG9TdHJpbmcoKSk7XG4gICAgICAvLyBjb25zb2xlLmxvZygnKioqKicpO1xuICAgIH0pO1xuICAgIFxuICAgIGpvaW5UcmVlLmdldEJibk5vZGVzKCkuZm9yRWFjaChub2RlID0+IHtcbiAgICAgIG5vZGUudmFyaWFibGUudmFsdWVzLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgICBsZXQgY2xpcXVlID0gbm9kZS5tZXRhZGF0YS5nZXQoJ3BhcmVudC5jbGlxdWUnKSBhcyBDbGlxdWU7XG4gICAgICAgIGxldCBjbGlxdWVQb3RlbnRpYWwgPSBqb2luVHJlZS5wb3RlbnRpYWxzLmdldChjbGlxdWUuaWQpO1xuICAgICAgICBsZXQgbm9kZVBvdGVudGlhbCA9IGpvaW5UcmVlLmdldEV2aWRlbmNlKG5vZGUsIHZhbHVlKTtcbiAgICAgICAgUG90ZW50aWFsVXRpbC5tdWx0aXBseShjbGlxdWVQb3RlbnRpYWwsIG5vZGVQb3RlbnRpYWwpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhjbGlxdWUudG9TdHJpbmcoKSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNsaXF1ZVBvdGVudGlhbC50b1N0cmluZygpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBqb2luVHJlZTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0Q2xpcXVlKG5vZGU6IEJibk5vZGUsIGpvaW50cmVlOiBKb2luVHJlZSk6IENsaXF1ZSB7XG4gICAgbGV0IGNsaXF1ZTogQ2xpcXVlO1xuICAgIFxuICAgIGlmICghbm9kZS5tZXRhZGF0YS5oYXMoJ3BhcmVudC5jbGlxdWUnKSkge1xuICAgICAgbGV0IGNsaXF1ZXMgPSBqb2ludHJlZS5maW5kQ2xpcXVlc1dpdGhOb2RlQW5kUGFyZW50cyhub2RlLmlkKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gQ29tcGFyZVV0aWwuaW50Q29tcGFyZShhLmlkLCBiLmlkKSk7XG4gICAgICBjbGlxdWUgPSBjbGlxdWVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbGlxdWUgPSBub2RlLm1ldGFkYXRhLmdldCgncGFyZW50LmNsaXF1ZScpIGFzIENsaXF1ZTtcbiAgICB9XG4gICAgbm9kZS5hZGRNZXRhZGF0YSgncGFyZW50LmNsaXF1ZScsIGNsaXF1ZSk7XG4gICAgXG4gICAgcmV0dXJuIGNsaXF1ZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW9yYWxpemVyIHtcbiAgcHVibGljIHN0YXRpYyBtb3JhbGl6ZShkYWc6IERhZyk6IFVnIHtcbiAgICBsZXQgdWcgPSBuZXcgVWcoKTtcbiAgICBkYWcuZ2V0Tm9kZXMoKS5mb3JFYWNoKG5vZGUgPT4gdWcuYWRkTm9kZShub2RlKSk7XG4gICAgZGFnLmdldEVkZ2VzKCkuZm9yRWFjaChlZGdlID0+IHVnLmFkZEVkZ2UobmV3IEJFZGdlKGVkZ2UubGhzLCBlZGdlLnJocykpKTtcbiAgICBkYWcuZ2V0Tm9kZXMoKS5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgbGV0IHBhcmVudHMgPSBBcnJheS5mcm9tKGRhZy5nZXRQYXJlbnRzKG5vZGUuaWQpKTtcbiAgICAgIGxldCBzaXplID0gcGFyZW50cy5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICBsZXQgcGExID0gZGFnLmdldE5vZGUocGFyZW50c1tpXSk7XG4gICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IHNpemU7IGorKykge1xuICAgICAgICAgIGxldCBwYTIgPSBkYWcuZ2V0Tm9kZShwYXJlbnRzW2pdKTtcbiAgICAgICAgICB1Zy5hZGRFZGdlKG5ldyBCRWRnZShwYTEsIHBhMikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgZGFnLmdldE5vZGVzKCkuZm9yRWFjaChub2RlID0+IHtcbiAgICAgIGxldCBwYXJlbnRzID0gQXJyYXkuZnJvbShkYWcuZ2V0UGFyZW50cyhub2RlLmlkKSkubWFwKGlkID0+IGRhZy5nZXROb2RlKGlkKSk7XG4gICAgICBub2RlLmFkZE1ldGFkYXRhKCdwYXJlbnRzJywgcGFyZW50cyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVnO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQb3RlbnRpYWxJbml0aWFsaXplciB7XG4gIHB1YmxpYyBzdGF0aWMgaW5pdChiYm46IEJibikge1xuICAgIGJibi5nZXROb2RlcygpLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICBsZXQgYmJuTm9kZSA9IG5vZGUgYXMgQmJuTm9kZTtcbiAgICAgIGxldCBwYXJlbnRzID0gQXJyYXkuZnJvbShiYm4uZ2V0UGFyZW50cyhub2RlLmlkKSkubWFwKGlkID0+IGJibi5nZXROb2RlKGlkKSBhcyBCYm5Ob2RlKTtcbiAgICAgIGJibk5vZGUucG90ZW50aWFsID0gUG90ZW50aWFsVXRpbC5nZXRQb3RlbnRpYWwoYmJuTm9kZSwgcGFyZW50cyk7XG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUHJvcGFnYXRvciB7XG4gIHB1YmxpYyBzdGF0aWMgcHJvcGFnYXRlKGpvaW5UcmVlOiBKb2luVHJlZSk6IEpvaW5UcmVlIHtcbiAgICBsZXQgY2xpcXVlcyA9IGpvaW5UcmVlLmdldENsaXF1ZXMoKS5zb3J0KChhLCBiKSA9PiBDb21wYXJlVXRpbC5pbnRDb21wYXJlKGEuaWQsIGIuaWQpKTtcbiAgICBsZXQgeCA9IGNsaXF1ZXNbMF07XG4gICAgLy8gY29uc29sZS5sb2coeC50b1N0cmluZygpKTtcbiAgICBcbiAgICBqb2luVHJlZS51bm1hcmtDbGlxdWVzKCk7XG4gICAgdGhpcy5jb2xsZWN0RXZpZGVuY2Uoam9pblRyZWUsIHgpO1xuICAgIFxuICAgIGpvaW5UcmVlLnVubWFya0NsaXF1ZXMoKTtcbiAgICB0aGlzLmRpc3RyaWJ1dGVFdmlkZW5jZShqb2luVHJlZSwgeCk7XG4gICAgXG4gICAgcmV0dXJuIGpvaW5UcmVlO1xuICB9XG4gIFxuICBwcml2YXRlIHN0YXRpYyBjb2xsZWN0RXZpZGVuY2Uoam9pbnRyZWU6IEpvaW5UcmVlLCBzdGFydDogQ2xpcXVlKSB7XG4gICAgbGV0IGNvbGxlY3RvciA9IG5ldyBFdmlkZW5jZUNvbGxlY3Rvcihqb2ludHJlZSwgc3RhcnQpO1xuICAgIGNvbGxlY3Rvci5zdGFydCgpO1xuICB9XG4gIFxuICBwcml2YXRlIHN0YXRpYyBkaXN0cmlidXRlRXZpZGVuY2Uoam9pbnRyZWU6IEpvaW5UcmVlLCBzdGFydDogQ2xpcXVlKSB7XG4gICAgbGV0IGRpc3RyaWJ1dG9yID0gbmV3IEV2aWRlbmNlRGlzdHJpYnV0b3Ioam9pbnRyZWUsIHN0YXJ0KTtcbiAgICBkaXN0cmlidXRvci5zdGFydCgpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUcmFuc2Zvcm1lciB7XG4gIHB1YmxpYyBzdGF0aWMgdHJhbnNmb3JtKGNsaXF1ZXM6IENsaXF1ZVtdKTogSm9pblRyZWUge1xuICAgIGxldCBqb2ludHJlZSA9IG5ldyBKb2luVHJlZSgpO1xuICAgIGxldCBzZXBTZXRzID0gdGhpcy5nZXRTZXBTZXRzKGNsaXF1ZXMpO1xuICAgIGxldCBuID0gKGNsaXF1ZXMubGVuZ3RoIC0gMSkgKiAyO1xuICAgIGxldCB0b3RhbCA9IDA7XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXBTZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgc2VwU2V0ID0gc2VwU2V0c1tpXTtcbiAgICAgIGpvaW50cmVlLmFkZEVkZ2UobmV3IEp0RWRnZShzZXBTZXQpKTtcbiAgICAgIHRvdGFsICs9IDI7XG4gICAgICBpZiAodG90YWwgPT09IG4pIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBqb2ludHJlZTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0U2VwU2V0cyhjbGlxdWVzOiBDbGlxdWVbXSk6IFNlcFNldFtdIHtcbiAgICBsZXQgc2VwU2V0czogU2VwU2V0W10gPSBbXTtcbiAgICBsZXQgc2l6ZSA9IGNsaXF1ZXMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBzaXplOyBqKyspIHtcbiAgICAgICAgc2VwU2V0cy5wdXNoKG5ldyBTZXBTZXQoY2xpcXVlc1tpXSwgY2xpcXVlc1tqXSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VwU2V0cy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBsZXQgcmVzdWx0ID0gLTEgKiBDb21wYXJlVXRpbC5pbnRDb21wYXJlKGEuZ2V0TWFzcygpLCBiLmdldE1hc3MoKSk7XG4gICAgICBpZiAoMCA9PT0gcmVzdWx0KSB7XG4gICAgICAgIHJlc3VsdCA9IENvbXBhcmVVdGlsLmludENvbXBhcmUoYS5nZXRDb3N0KCksIGIuZ2V0Q29zdCgpKTtcbiAgICAgICAgaWYgKDAgPT09IHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdCA9IENvbXBhcmVVdGlsLmludENvbXBhcmUoYS5pZCwgYi5pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVHJpYW5ndWxhdG9yIHtcbiAgcHVibGljIHN0YXRpYyB0cmlhbmd1bGF0ZShtOiBVZyk6IENsaXF1ZVtdIHtcbiAgICBsZXQgY2xpcXVlczogQ2xpcXVlW10gPSBbXTtcbiAgICBsZXQgbW0gPSB0aGlzLmR1cGxpY2F0ZShtKTtcbiAgICB3aGlsZSAobW0uZ2V0Tm9kZXMoKS5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgbm9kZUNsaXF1ZSA9IHRoaXMuc2VsZWN0Tm9kZShtbSk7XG4gICAgICBcbiAgICAgIGxldCBjbGlxdWUgPSBuZXcgQ2xpcXVlKG5vZGVDbGlxdWUuZ2V0QmJuTm9kZXMoKSk7XG4gICAgICBcbiAgICAgIGlmICghdGhpcy5pc1N1YnNldChjbGlxdWVzLCBjbGlxdWUpKSB7XG4gICAgICAgIGNsaXF1ZXMucHVzaChjbGlxdWUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBtbS5yZW1vdmVOb2RlKG5vZGVDbGlxdWUubm9kZS5pZCk7XG4gICAgICBcbiAgICAgIG5vZGVDbGlxdWUuZWRnZXMuZm9yRWFjaChlID0+IHtcbiAgICAgICAgbS5hZGRFZGdlKGUpO1xuICAgICAgICBtbS5hZGRFZGdlKGUpO1xuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIGNsaXF1ZXM7XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGR1cGxpY2F0ZShnOiBVZyk6IFVnIHtcbiAgICBsZXQgdWcgPSBuZXcgVWcoKTtcbiAgICBnLmdldE5vZGVzKCkuZm9yRWFjaChuID0+IHVnLmFkZE5vZGUobikpO1xuICAgIGcuZ2V0RWRnZXMoKS5mb3JFYWNoKGUgPT4gdWcuYWRkRWRnZShlKSk7XG4gICAgcmV0dXJuIHVnO1xuICB9XG4gIFxuICBwcml2YXRlIHN0YXRpYyBzZWxlY3ROb2RlKG06IFVnKTogTm9kZUNsaXF1ZSB7XG4gICAgbGV0IGNsaXF1ZXMgPSBtLmdldE5vZGVzKClcbiAgICAgIC5tYXAobm9kZSA9PiB7XG4gICAgICAgIGxldCB3ZWlnaHQgPSB0aGlzLmdldFdlaWdodChub2RlLCBtKTtcbiAgICAgICAgbGV0IGVkZ2VzID0gdGhpcy5nZXRFZGdlc1RvQWRkKG5vZGUsIG0pO1xuICAgICAgICBsZXQgbmVpZ2hib3JzID0gQXJyYXkuZnJvbShtLmdldE5laWdoYm9ycyhub2RlLmlkKSkubWFwKGlkID0+IG0uZ2V0Tm9kZShpZCkpO1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVDbGlxdWUobm9kZSwgbmVpZ2hib3JzLCB3ZWlnaHQsIGVkZ2VzKTtcbiAgICAgIH0pXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBsZXQgcmVzdWx0ID0gQ29tcGFyZVV0aWwuaW50Q29tcGFyZShhLmVkZ2VzLmxlbmd0aCwgYi5lZGdlcy5sZW5ndGgpO1xuICAgICAgICBpZiAoMCA9PT0gcmVzdWx0KSB7XG4gICAgICAgICAgcmVzdWx0ID0gQ29tcGFyZVV0aWwuaW50Q29tcGFyZShhLndlaWdodCwgYi53ZWlnaHQpO1xuICAgICAgICAgIGlmICgwID09PSByZXN1bHQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IENvbXBhcmVVdGlsLmludENvbXBhcmUoYS5ub2RlLmlkLCBiLm5vZGUuaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSk7XG4gICAgcmV0dXJuIGNsaXF1ZXNbMF07XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGdldFdlaWdodChuOiBCTm9kZSwgbTogVWcpIHtcbiAgICBsZXQgd2VpZ2h0ID0gKG4gYXMgQmJuTm9kZSkuZ2V0V2VpZ2h0KCk7XG4gICAgQXJyYXkuZnJvbShtLmdldE5laWdoYm9ycyhuLmlkKSlcbiAgICAgIC5tYXAoaWQgPT4gbS5nZXROb2RlKGlkKSlcbiAgICAgIC5mb3JFYWNoKG5laWdoYm9yID0+IHdlaWdodCAqPSAobmVpZ2hib3IgYXMgQmJuTm9kZSkuZ2V0V2VpZ2h0KCkpO1xuICAgIHJldHVybiB3ZWlnaHQ7XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGdldEVkZ2VzVG9BZGQobjogQk5vZGUsIG06IFVnKTogQkVkZ2VbXSB7XG4gICAgbGV0IGVkZ2VzOiBCRWRnZVtdID0gW107XG4gICAgbGV0IG5laWdoYm9ycyA9IEFycmF5LmZyb20obS5nZXROZWlnaGJvcnMobi5pZCkpLm1hcChpZCA9PiBtLmdldE5vZGUoaWQpKTtcbiAgICBsZXQgc2l6ZSA9IG5laWdoYm9ycy5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgIGxldCBuZTEgPSBuZWlnaGJvcnNbaV07XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNpemU7IGorKykge1xuICAgICAgICBsZXQgbmUyID0gbmVpZ2hib3JzW2pdO1xuICAgICAgICBpZiAoIW0uZWRnZUV4aXN0cyhuZTEuaWQsIG5lMi5pZCkpIHtcbiAgICAgICAgICBlZGdlcy5wdXNoKG5ldyBCRWRnZShuZTEsIG5lMikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlZGdlcztcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgaXNTdWJzZXQoY2xpcXVlczogQ2xpcXVlW10sIGNsaXF1ZTogQ2xpcXVlKTogYm9vbGVhbiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjbGlxdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoY2xpcXVlc1tpXS5pc1N1cGVyc2V0KGNsaXF1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5jbGFzcyBOb2RlQ2xpcXVlIHtcbiAgY29uc3RydWN0b3IocHVibGljIG5vZGU6IEJOb2RlLCBwdWJsaWMgbmVpZ2hib3JzOiBCTm9kZVtdLCBwdWJsaWMgd2VpZ2h0OiBudW1iZXIsIHB1YmxpYyBlZGdlczogQkVkZ2VbXSkge1xuICBcbiAgfVxuICBcbiAgZ2V0QmJuTm9kZXMoKTogQmJuTm9kZVtdIHtcbiAgICBsZXQgbm9kZXMgPSB0aGlzLm5laWdoYm9ycy5zbGljZSgwKTtcbiAgICBub2Rlcy5wdXNoKHRoaXMubm9kZSk7XG4gICAgcmV0dXJuIG5vZGVzLm1hcChuID0+IChuIGFzIEJibk5vZGUpKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRXZpZGVuY2VDb2xsZWN0b3Ige1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgam9pblRyZWU6IEpvaW5UcmVlLCBwdWJsaWMgc3RhcnRDbGlxdWU6IENsaXF1ZSkge1xuICBcbiAgfVxuICBcbiAgcHVibGljIHN0YXJ0KCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCdTVEFSVElORyBFVklERU5DRSBDT0xMRUNUSU9OIGZyb20gJyArIHRoaXMuc3RhcnRDbGlxdWUudG9TdHJpbmcoKSk7XG4gICAgXG4gICAgdGhpcy5zdGFydENsaXF1ZS5tYXJrKCk7XG4gICAgdGhpcy5qb2luVHJlZS5nZXROZWlnaGJvcnModGhpcy5zdGFydENsaXF1ZS5pZCkuZm9yRWFjaChzZXBTZXRJZCA9PiB7XG4gICAgICBsZXQgc2VwU2V0ID0gdGhpcy5qb2luVHJlZS5nZXROb2RlKHNlcFNldElkKSBhcyBTZXBTZXQ7XG4gICAgICBBcnJheS5mcm9tKHRoaXMuam9pblRyZWUuZ2V0TmVpZ2hib3JzKHNlcFNldElkKSlcbiAgICAgICAgLm1hcChpZCA9PiB0aGlzLmpvaW5UcmVlLmdldE5vZGUoaWQpIGFzIENsaXF1ZSlcbiAgICAgICAgLmZpbHRlcihjbGlxdWUgPT4gIWNsaXF1ZS5pc01hcmtlZCgpKVxuICAgICAgICAuZm9yRWFjaCh5ID0+IHtcbiAgICAgICAgICB0aGlzLndhbGsodGhpcy5zdGFydENsaXF1ZSwgc2VwU2V0LCB5KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgXG4gIHByaXZhdGUgd2Fsayh4OiBDbGlxdWUsIHM6IFNlcFNldCwgeTogQ2xpcXVlKSB7XG4gICAgeS5tYXJrKCk7XG4gICAgQXJyYXkuZnJvbSh0aGlzLmpvaW5UcmVlLmdldE5laWdoYm9ycyh5LmlkKSlcbiAgICAgIC5tYXAoaWQgPT4gdGhpcy5qb2luVHJlZS5nZXROb2RlKGlkKSBhcyBTZXBTZXQpXG4gICAgICAuZm9yRWFjaChzZXBTZXQgPT4ge1xuICAgICAgICBBcnJheS5mcm9tKHRoaXMuam9pblRyZWUuZ2V0TmVpZ2hib3JzKHNlcFNldC5pZCkpXG4gICAgICAgICAgLm1hcChpZCA9PiB0aGlzLmpvaW5UcmVlLmdldE5vZGUoaWQpIGFzIENsaXF1ZSlcbiAgICAgICAgICAuZmlsdGVyKGNsaXF1ZSA9PiAhY2xpcXVlLmlzTWFya2VkKCkpXG4gICAgICAgICAgLmZvckVhY2goY2xpcXVlID0+IHRoaXMud2Fsayh5LCBzZXBTZXQsIGNsaXF1ZSkpO1xuICAgICAgfSk7XG4gICAgUG90ZW50aWFsVXRpbC5wYXNzU2luZ2xlTWVzc2FnZSh0aGlzLmpvaW5UcmVlLCB5LCBzLCB4KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRXZpZGVuY2VEaXN0cmlidXRvciB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBqb2luVHJlZTogSm9pblRyZWUsIHB1YmxpYyBzdGFydENsaXF1ZTogQ2xpcXVlKSB7XG4gIFxuICB9XG4gIFxuICBwdWJsaWMgc3RhcnQoKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ1NUQVJUSU5HIEVWSURFTkNFIERJU1RSSUJVVElPTiBmcm9tICcgKyB0aGlzLnN0YXJ0Q2xpcXVlLnRvU3RyaW5nKCkpO1xuICAgIFxuICAgIHRoaXMuc3RhcnRDbGlxdWUubWFyaygpO1xuICAgIHRoaXMuam9pblRyZWUuZ2V0TmVpZ2hib3JzKHRoaXMuc3RhcnRDbGlxdWUuaWQpLmZvckVhY2goc2VwU2V0SWQgPT4ge1xuICAgICAgbGV0IHNlcFNldCA9IHRoaXMuam9pblRyZWUuZ2V0Tm9kZShzZXBTZXRJZCkgYXMgU2VwU2V0O1xuICAgICAgQXJyYXkuZnJvbSh0aGlzLmpvaW5UcmVlLmdldE5laWdoYm9ycyhzZXBTZXRJZCkpXG4gICAgICAgIC5tYXAoaWQgPT4gdGhpcy5qb2luVHJlZS5nZXROb2RlKGlkKSBhcyBDbGlxdWUpXG4gICAgICAgIC5maWx0ZXIoY2xpcXVlID0+ICFjbGlxdWUuaXNNYXJrZWQoKSlcbiAgICAgICAgLmZvckVhY2goeSA9PiB7XG4gICAgICAgICAgUG90ZW50aWFsVXRpbC5wYXNzU2luZ2xlTWVzc2FnZSh0aGlzLmpvaW5UcmVlLCB0aGlzLnN0YXJ0Q2xpcXVlLCBzZXBTZXQsIHkpO1xuICAgICAgICAgIHRoaXMud2Fsayh0aGlzLnN0YXJ0Q2xpcXVlLCBzZXBTZXQsIHkpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBcbiAgcHJpdmF0ZSB3YWxrKHg6IENsaXF1ZSwgczogU2VwU2V0LCB5OiBDbGlxdWUpIHtcbiAgICB5Lm1hcmsoKTtcbiAgICBBcnJheS5mcm9tKHRoaXMuam9pblRyZWUuZ2V0TmVpZ2hib3JzKHkuaWQpKVxuICAgICAgLm1hcChpZCA9PiB0aGlzLmpvaW5UcmVlLmdldE5vZGUoaWQpIGFzIFNlcFNldClcbiAgICAgIC5mb3JFYWNoKHNlcFNldCA9PiB7XG4gICAgICAgIEFycmF5LmZyb20odGhpcy5qb2luVHJlZS5nZXROZWlnaGJvcnMoc2VwU2V0LmlkKSlcbiAgICAgICAgICAubWFwKGlkID0+IHRoaXMuam9pblRyZWUuZ2V0Tm9kZShpZCkgYXMgQ2xpcXVlKVxuICAgICAgICAgIC5maWx0ZXIoY2xpcXVlID0+ICFjbGlxdWUuaXNNYXJrZWQoKSlcbiAgICAgICAgICAuZm9yRWFjaChjbGlxdWUgPT4ge1xuICAgICAgICAgICAgUG90ZW50aWFsVXRpbC5wYXNzU2luZ2xlTWVzc2FnZSh0aGlzLmpvaW5UcmVlLCB5LCBzZXBTZXQsIGNsaXF1ZSk7XG4gICAgICAgICAgICB0aGlzLndhbGsoeSwgc2VwU2V0LCBjbGlxdWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH1cbn0iLCJpbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5cbmNvbnN0IE9VVF9MRUZUID0gMSwgT1VUX1RPUCA9IDIsIE9VVF9SSUdIVCA9IDQsIE9VVF9CT1RUT00gPSA4O1xuY29uc3QgTUFYX05PREVfTkFNRV9MRU5HVEggPSAxNTtcbmNvbnN0IE1BWF9WQUxVRV9MRU5HVEggPSA1O1xuY29uc3QgTUFYX1BDVF9WQUxVRSA9IDY7XG5jb25zdCBERUZBVUxUX1BBRERJTkcgPSAnXFx1MDBBMCc7XG5cbmV4cG9ydCBjbGFzcyBWR3JhcGgge1xuICBub2RlczogTWFwPG51bWJlciwgVk5vZGU+O1xuICBlZGdlczogTWFwPG51bWJlciwgVkVkZ2U+O1xuICBcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ub2RlcyA9IG5ldyBNYXA8bnVtYmVyLCBWTm9kZT4oKTtcbiAgICB0aGlzLmVkZ2VzID0gbmV3IE1hcDxudW1iZXIsIFZFZGdlPigpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0Tm9kZXMoKTogVk5vZGVbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5ub2Rlcy52YWx1ZXMoKSk7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRFZGdlcygpOiBWRWRnZVtdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmVkZ2VzLnZhbHVlcygpKTtcbiAgfVxuICBcbiAgcHVibGljIGFkZE5vZGUobm9kZTogVk5vZGUpOiBWR3JhcGgge1xuICAgIHRoaXMubm9kZXMuc2V0KG5vZGUuaWQsIG5vZGUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBwdWJsaWMgYWRkRWRnZShlZGdlOiBWRWRnZSk6IFZHcmFwaCB7XG4gICAgdGhpcy5lZGdlcy5zZXQoZWRnZS5nZXRJZCgpLCBlZGdlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgcHVibGljIGdldE5vZGUoaWQ6IG51bWJlcik6IFZOb2RlIHtcbiAgICByZXR1cm4gdGhpcy5ub2Rlcy5nZXQoaWQpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0UGF0aChpZDE6IG51bWJlciwgaWQyOiBudW1iZXIpOiBWUGF0aCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Tm9kZShpZDEpLmdldFBhdGgodGhpcy5nZXROb2RlKGlkMikpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBWRWRnZSB7XG4gIHB1YmxpYyBwb2ludHM6IFZQb2ludFtdO1xuICBcbiAgY29uc3RydWN0b3IocHVibGljIHBhcmVudDogVk5vZGUsIHB1YmxpYyBjaGlsZDogVk5vZGUpIHtcbiAgICB0aGlzLnBvaW50cyA9IFtdO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0SWQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gVXRpbC5oYXNoT2ZTdHIodGhpcy50b1N0cmluZygpKTtcbiAgfVxuICBcbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMucGFyZW50LmxhYmVsICsgJy0+JyArIHRoaXMuY2hpbGQubGFiZWw7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZOb2RlIHtcbiAgcHVibGljIHdpZHRoID0gMTUwO1xuICBwdWJsaWMgaGVpZ2h0OiBudW1iZXI7XG4gIHB1YmxpYyBwb2ludDogVlBvaW50O1xuICBcbiAgY29uc3RydWN0b3IocHVibGljIGlkOiBudW1iZXIsIHB1YmxpYyBsYWJlbDogc3RyaW5nLCBwdWJsaWMgdmFsdWVzOiBzdHJpbmdbXSwgcHVibGljIHByb2JzOiBudW1iZXJbXSkge1xuICAgIHRoaXMucHJvYnMgPSB0aGlzLm5vcm1hbGl6ZVByb2JzKHRoaXMucHJvYnMpO1xuICAgIHRoaXMuaGVpZ2h0ID0gdmFsdWVzLmxlbmd0aCAqIDE1ICsgMjA7XG4gICAgdGhpcy5wb2ludCA9IG5ldyBWUG9pbnQoTWF0aC5yYW5kb20oKSwgTWF0aC5yYW5kb20oKSk7XG4gIH1cbiAgXG4gIHB1YmxpYyB1cGRhdGVQb2ludChwb2ludDogVlBvaW50KTogdm9pZCB7XG4gICAgdGhpcy5wb2ludC54ID0gcG9pbnQueDtcbiAgICB0aGlzLnBvaW50LnkgPSBwb2ludC55O1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0UmVmSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5sYWJlbDtcbiAgfVxuICBcbiAgcHVibGljIGdldFRyYW5zbGF0aW9uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHRoaXMucG9pbnQueCArICcsJyArIHRoaXMucG9pbnQueSArICcpJztcbiAgfVxuICBcbiAgcHVibGljIGdldE1pZCgpOiBWUG9pbnQge1xuICAgIGxldCBkeCA9IHRoaXMud2lkdGggLyAyLjAgKyB0aGlzLnBvaW50Lng7XG4gICAgbGV0IGR5ID0gdGhpcy5oZWlnaHQgLyAyLjAgKyB0aGlzLnBvaW50Lnk7XG4gICAgcmV0dXJuIG5ldyBWUG9pbnQoZHgsIGR5KTtcbiAgfVxuICBcbiAgcHVibGljIG5vcm1hbGl6ZVByb2JzKHByb2JzOiBudW1iZXJbXSk6IG51bWJlcltdIHtcbiAgICBsZXQgc3VtID0gcHJvYnMucmVkdWNlKChhLCBiKSA9PiBhICsgYik7XG4gICAgcmV0dXJuIHByb2JzLm1hcChwID0+IHAgLyBzdW0pO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0UGF0aCh0aGF0OiBWTm9kZSk6IFZQYXRoIHtcbiAgICBsZXQgdGhldGEgPSB0aGF0LnBvaW50LmdldFRoZXRhKHRoaXMucG9pbnQpO1xuICAgIGxldCBwMSA9IHRoaXMuZ2V0UG9pbnQodGhldGEpO1xuICAgIGxldCBwMiA9IHRoYXQuZ2V0UG9pbnQodGhldGEgKyBNYXRoLlBJKTtcbiAgICBsZXQgZXJyb3IgPSBwMS5lcnJvciB8fCBwMi5lcnJvciA/IHRydWUgOiBmYWxzZTtcbiAgICBcbiAgICBsZXQgcGF0aCA9IG5ldyBWUGF0aChwMSwgcDIpO1xuICAgIHBhdGguZXJyb3IgPSBlcnJvcjtcbiAgICBcbiAgICByZXR1cm4gcGF0aDtcbiAgfVxuICBcbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuaWQgKyAnfCcgK1xuICAgICAgdGhpcy5sYWJlbCArICd8JyArXG4gICAgICB0aGlzLnZhbHVlcy5qb2luKCcsJykgKyAnfCcgK1xuICAgICAgdGhpcy5wcm9icy5qb2luKCcsJykgKyAnfCcgK1xuICAgICAgdGhpcy5wb2ludC50b1N0cmluZygpO1xuICB9XG4gIFxuICBwcml2YXRlIGdldFBvaW50KHRoZXRhOiBudW1iZXIpOiBWUG9pbnQge1xuICAgIGxldCBjID0gdGhpcy5nZXRNaWQoKTtcbiAgICBsZXQgY3ggPSBjLng7XG4gICAgbGV0IGN5ID0gYy55O1xuICAgIGxldCB3ID0gdGhpcy53aWR0aCAvIDIuMDtcbiAgICBsZXQgaCA9IHRoaXMuaGVpZ2h0IC8gMi4wO1xuICAgIGxldCBkID0gdGhpcy5nZXREaXN0YW5jZShuZXcgVlBvaW50KGN4LCBjeSksIG5ldyBWUG9pbnQoY3ggKyB3LCBjeSArIGgpKTtcbiAgICBsZXQgeCA9IGN4ICsgZCAqIE1hdGguY29zKHRoZXRhKTtcbiAgICBsZXQgeSA9IGN5ICsgZCAqIE1hdGguc2luKHRoZXRhKTtcbiAgICBsZXQgb2NvZGUgPSB0aGlzLmdldE91dENvZGUobmV3IFZQb2ludCh4LCB5KSk7XG4gICAgXG4gICAgbGV0IHB4ID0gMDtcbiAgICBsZXQgcHkgPSAwO1xuICAgIGxldCBlcnJvciA9IGZhbHNlO1xuICAgIFxuICAgIHN3aXRjaCAob2NvZGUpIHtcbiAgICAgIGNhc2UgT1VUX1RPUDpcbiAgICAgICAgcHggPSBjeCAtIGggKiAoKHggLSBjeCkgLyAoeSAtIGN5KSk7XG4gICAgICAgIHB5ID0gY3kgLSBoO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgT1VUX0xFRlQ6XG4gICAgICAgIHB4ID0gY3ggLSB3O1xuICAgICAgICBweSA9IGN5IC0gdyAqICgoeSAtIGN5KSAvICh4IC0gY3gpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE9VVF9CT1RUT006XG4gICAgICAgIHB4ID0gY3ggKyBoICogKCh4IC0gY3gpIC8gKHkgLSBjeSkpO1xuICAgICAgICBweSA9IGN5ICsgaDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE9VVF9SSUdIVDpcbiAgICAgICAgcHggPSBjeCArIHc7XG4gICAgICAgIHB5ID0gY3kgKyB3ICogKCh5IC0gY3kpIC8gKHggLSBjeCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGVycm9yID0gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgbGV0IHAgPSBuZXcgVlBvaW50KHB4LCBweSk7XG4gICAgcC5lcnJvciA9IGVycm9yO1xuICAgIHJldHVybiBwO1xuICB9XG4gIFxuICBwcml2YXRlIGdldERpc3RhbmNlKHAxOiBWUG9pbnQsIHAyOiBWUG9pbnQpOiBudW1iZXIge1xuICAgIGxldCB4ID0gcDEueCAtIHAyLng7XG4gICAgbGV0IHkgPSBwMS55IC0gcDIueTtcbiAgICBsZXQgZCA9IE1hdGguc3FydCgoeCAqIHgpICsgKHkgKiB5KSk7XG4gICAgcmV0dXJuIGQ7XG4gIH1cbiAgXG4gIHByaXZhdGUgZ2V0T3V0Q29kZShwb2ludDogVlBvaW50KTogbnVtYmVyIHtcbiAgICBsZXQgb3V0ID0gMDtcbiAgICBcbiAgICBpZiAodGhpcy53aWR0aCA8PSAwKSB7XG4gICAgICBvdXQgfD0gT1VUX0xFRlQgfCBPVVRfUklHSFQ7XG4gICAgfSBlbHNlIGlmIChwb2ludC54IDwgdGhpcy5wb2ludC54KSB7XG4gICAgICBvdXQgfD0gT1VUX0xFRlQ7XG4gICAgfSBlbHNlIGlmIChwb2ludC54ID4gdGhpcy5wb2ludC54ICsgdGhpcy53aWR0aCkge1xuICAgICAgb3V0IHw9IE9VVF9SSUdIVDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaGVpZ2h0IDw9IDApIHtcbiAgICAgIG91dCB8PSBPVVRfVE9QIHwgT1VUX0JPVFRPTTtcbiAgICB9IGVsc2UgaWYgKHBvaW50LnkgPCB0aGlzLnBvaW50LnkpIHtcbiAgICAgIG91dCB8PSBPVVRfVE9QO1xuICAgIH0gZWxzZSBpZiAocG9pbnQueSA+IHRoaXMucG9pbnQueSArIHRoaXMuaGVpZ2h0KSB7XG4gICAgICBvdXQgfD0gT1VUX0JPVFRPTTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG91dDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVlBvaW50IHtcbiAgcHVibGljIGVycm9yID0gZmFsc2U7XG4gIFxuICBjb25zdHJ1Y3RvcihwdWJsaWMgeDogbnVtYmVyLCBwdWJsaWMgeTogbnVtYmVyKSB7XG4gIFxuICB9XG4gIFxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJygnICsgdGhpcy54ICsgJywnICsgdGhpcy55ICsgJyknO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0VGhldGEodGhhdDogVlBvaW50KTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLnkgLSB0aGF0LnksIHRoaXMueCAtIHRoYXQueCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZQYXRoIHtcbiAgcHVibGljIGVycm9yID0gZmFsc2U7XG4gIFxuICBjb25zdHJ1Y3RvcihwdWJsaWMgcDE6IFZQb2ludCwgcHVibGljIHAyOiBWUG9pbnQpIHtcbiAgXG4gIH1cbiAgXG4gIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnAxLnRvU3RyaW5nKCkgKyAnIHRvICcgKyB0aGlzLnAyLnRvU3RyaW5nKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFV0aWwge1xuICBzdGF0aWMgaGFzaE9mU3RyKHM6IHN0cmluZyk6IG51bWJlciB7XG4gICAgbGV0IGhhc2ggPSAwO1xuICAgIGlmIChzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGhhc2g7XG4gICAgfVxuICAgIFxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBsZXQgY2hyID0gcy5jaGFyQ29kZUF0KGkpO1xuICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hyO1xuICAgICAgaGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcbiAgICB9XG4gICAgcmV0dXJuIGhhc2g7XG4gIH1cbiAgXG4gIHN0YXRpYyBoYXNoT2ZBcnIoYXJyOiBzdHJpbmdbXSk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaGFzaE9mU3RyKGFyci5zb3J0KCkuam9pbignLScpKTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluZmVyZW5jZUVuZ2luZSB7XG4gIGdldEdyYXBoKCk6IFZHcmFwaDtcbiAgXG4gIHVwZGF0ZUV2aWRlbmNlKGlkOiBudW1iZXIsIHZhbHVlOiBzdHJpbmcpOiB2b2lkO1xuICBcbiAgZ2V0UHJvYnMoaWQ6IG51bWJlcik6IG51bWJlcltdO1xufVxuXG5leHBvcnQgY2xhc3MgTm9PcEluZmVyZW5jZUVuZ2luZSBpbXBsZW1lbnRzIEluZmVyZW5jZUVuZ2luZSB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBncmFwaDogVkdyYXBoKSB7XG4gIFxuICB9XG4gIFxuICBwdWJsaWMgZ2V0R3JhcGgoKTogVkdyYXBoIHtcbiAgICByZXR1cm4gdGhpcy5ncmFwaDtcbiAgfVxuICBcbiAgcHVibGljIHVwZGF0ZUV2aWRlbmNlKGlkOiBudW1iZXIsIHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgXG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRQcm9icyhpZDogbnVtYmVyKTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLmdyYXBoLmdldE5vZGUoaWQpLnByb2JzO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSZW5kZXJPcHRpb25zIHtcbiAgY29uc3RydWN0b3IocHVibGljIGlkOiBzdHJpbmcsIHB1YmxpYyB3aWR0aDogbnVtYmVyLCBwdWJsaWMgaGVpZ2h0OiBudW1iZXIpIHtcbiAgXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEdyYXBoUmVuZGVyZXIge1xuICBncmFwaDogVkdyYXBoO1xuICBcbiAgY29uc3RydWN0b3IocHVibGljIGVuZ2luZTogSW5mZXJlbmNlRW5naW5lLCBwdWJsaWMgb3B0aW9uczogUmVuZGVyT3B0aW9ucykge1xuICAgIHRoaXMuZ3JhcGggPSB0aGlzLmVuZ2luZS5nZXRHcmFwaCgpO1xuICB9XG4gIFxuICBwdWJsaWMgZHJhdygpOiB2b2lkIHtcbiAgICB0aGlzLmluaXRTdmcoKTtcbiAgICB0aGlzLmxheW91dEdyYXBoKCk7XG4gICAgdGhpcy5kcmF3RWRnZXMoKTtcbiAgICB0aGlzLmRyYXdOb2RlcygpO1xuICB9XG4gIFxuICBwcml2YXRlIGluaXRTdmcoKTogdm9pZCB7XG4gICAgZDMuc2VsZWN0KHRoaXMub3B0aW9ucy5pZClcbiAgICAgIC5hdHRyKHtcbiAgICAgICAgd2lkdGg6IHRoaXMub3B0aW9ucy53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiB0aGlzLm9wdGlvbnMuaGVpZ2h0XG4gICAgICB9KVxuICAgICAgLmFwcGVuZCgnZGVmcycpXG4gICAgICAuYXBwZW5kKCdtYXJrZXInKVxuICAgICAgLmF0dHIoe1xuICAgICAgICBpZDogJ2Fycm93JyxcbiAgICAgICAgbWFya2VyV2lkdGg6IDEwLFxuICAgICAgICBtYXJrZXJIZWlnaHQ6IDEwLFxuICAgICAgICByZWZYOiA1LFxuICAgICAgICByZWZZOiAzLFxuICAgICAgICBvcmllbnQ6ICdhdXRvJyxcbiAgICAgICAgbWFya2VyVW5pdHM6ICdzdHJva2VXaWR0aCdcbiAgICAgIH0pXG4gICAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAgIC5hdHRyKHtcbiAgICAgICAgZDogJ00wLDAgTDAsNiwgTDUsMyB6JyxcbiAgICAgICAgZmlsbDogJyNmMDAnLFxuICAgICAgICBjbGFzczogJ2VkZ2UtaGVhZCdcbiAgICAgIH0pO1xuICB9XG4gIFxuICBwcml2YXRlIGdldERhZ3JlR3JhcGgoKTogRGFncmUuR3JhcGgge1xuICAgIGxldCBnID0gbmV3IGRhZ3JlLmdyYXBobGliLkdyYXBoKCk7XG4gICAgZy5zZXRHcmFwaCh7fSk7XG4gICAgZy5zZXREZWZhdWx0RWRnZUxhYmVsKCgpID0+IHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLmdyYXBoLmdldE5vZGVzKClcbiAgICAgIC5mb3JFYWNoKG4gPT4ge1xuICAgICAgICBnLnNldE5vZGUobi5nZXRSZWZJZCgpLCB7XG4gICAgICAgICAgbGFiZWw6IG4uZ2V0UmVmSWQoKSxcbiAgICAgICAgICB3aWR0aDogbi53aWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IG4uaGVpZ2h0XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgXG4gICAgdGhpcy5ncmFwaC5nZXRFZGdlcygpXG4gICAgICAuZm9yRWFjaChlID0+IHtcbiAgICAgICAgZy5zZXRFZGdlKGUucGFyZW50LmdldFJlZklkKCksIGUuY2hpbGQuZ2V0UmVmSWQoKSk7XG4gICAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gZztcbiAgfVxuICBcbiAgcHJpdmF0ZSBsYXlvdXRHcmFwaCgpOiB2b2lkIHtcbiAgICBsZXQgZyA9IHRoaXMuZ2V0RGFncmVHcmFwaCgpO1xuICAgIGRhZ3JlLmxheW91dChnKTtcbiAgICBcbiAgICB0aGlzLmdyYXBoLmdldE5vZGVzKClcbiAgICAgIC5mb3JFYWNoKG4gPT4ge1xuICAgICAgICBsZXQgZGFncmVOb2RlID0gZy5ub2RlKG4uZ2V0UmVmSWQoKSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZGFncmVOb2RlKSB7XG4gICAgICAgICAgbi51cGRhdGVQb2ludChuZXcgVlBvaW50KGRhZ3JlTm9kZS54LCBkYWdyZU5vZGUueSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICBcbiAgICB0aGlzLmdyYXBoLmdldEVkZ2VzKClcbiAgICAgIC5mb3JFYWNoKGUgPT4ge1xuICAgICAgICBsZXQgZGFncmVFZGdlID0gZy5lZGdlKHt2OiBlLnBhcmVudC5nZXRSZWZJZCgpLCB3OiBlLmNoaWxkLmdldFJlZklkKCl9KTtcbiAgICAgICAgaWYgKGRhZ3JlRWRnZSkge1xuICAgICAgICAgIGUucG9pbnRzID0gQXJyYXkuZnJvbShkYWdyZUVkZ2UucG9pbnRzKVxuICAgICAgICAgICAgLm1hcChwb2ludCA9PiB7XG4gICAgICAgICAgICAgIGxldCBwID0gcG9pbnQgYXMgYW55O1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IFZQb2ludChwLngsIHAueSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cbiAgXG4gIHByaXZhdGUgZHJhd0VkZ2VzKCk6IHZvaWQge1xuICAgIGxldCBncmFwaCA9IHRoaXMuZ3JhcGg7XG4gICAgbGV0IGVkZ2VzID0gZDMuc2VsZWN0KHRoaXMub3B0aW9ucy5pZClcbiAgICAgIC5zZWxlY3RBbGwoJ2xpbmUnKVxuICAgICAgLmRhdGEoZ3JhcGguZ2V0RWRnZXMoKSlcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKCdsaW5lJylcbiAgICAgIC5lYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIGxldCBwYXRoID0gZ3JhcGguZ2V0UGF0aChkLnBhcmVudC5pZCwgZC5jaGlsZC5pZCk7XG4gICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKHtcbiAgICAgICAgICAnZGF0YS1wYXJlbnQnOiBkLnBhcmVudC5nZXRSZWZJZCgpLFxuICAgICAgICAgICdkYXRhLWNoaWxkJzogZC5jaGlsZC5nZXRSZWZJZCgpLFxuICAgICAgICAgIHgxOiBwYXRoLnAxLngsXG4gICAgICAgICAgeTE6IHBhdGgucDEueSxcbiAgICAgICAgICB4MjogcGF0aC5wMi54LFxuICAgICAgICAgIHkyOiBwYXRoLnAyLnksXG4gICAgICAgICAgc3R5bGU6ICdzdHJva2U6cmdiKDI1NSwwLDApO3N0cm9rZS13aWR0aDoyJyxcbiAgICAgICAgICBjbGFzczogJ2VkZ2UtbGluZScsXG4gICAgICAgICAgJ21hcmtlci1lbmQnOiAndXJsKCNhcnJvdyknXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgfVxuICBcbiAgcHJpdmF0ZSBkcmF3Tm9kZXMoKTogdm9pZCB7XG4gICAgbGV0IGVuZ2luZSA9IHRoaXMuZW5naW5lO1xuICAgIGxldCBncmFwaCA9IHRoaXMuZ3JhcGg7XG4gICAgbGV0IGZvcm1hdE5vZGVOYW1lID0gdGhpcy5mb3JtYXROb2RlTmFtZTtcbiAgICBsZXQgZm9ybWF0UGN0ID0gdGhpcy5mb3JtYXRQY3Q7XG4gICAgbGV0IGZvcm1hdFZhbHVlID0gdGhpcy5mb3JtYXRWYWx1ZTtcbiAgICBsZXQgbGVmdFBhZCA9IHRoaXMubGVmdFBhZDtcbiAgICBsZXQgcmlnaHRQYWQgPSB0aGlzLnJpZ2h0UGFkO1xuICAgIFxuICAgIC8vIHNldCB0aGUgbm9kZSBncm91cFxuICAgIGxldCBub2RlcyA9IGQzLnNlbGVjdCh0aGlzLm9wdGlvbnMuaWQpXG4gICAgICAuc2VsZWN0QWxsKCdnJylcbiAgICAgIC5kYXRhKGdyYXBoLmdldE5vZGVzKCkpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAuYXR0cih7XG4gICAgICAgIGlkOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgIHJldHVybiBkLmdldFJlZklkKClcbiAgICAgICAgfSxcbiAgICAgICAgdHJhbnNmb3JtOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgIHJldHVybiBkLmdldFRyYW5zbGF0aW9uKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNsYXNzOiAnbm9kZS1ncm91cCdcbiAgICAgIH0pXG4gICAgICAub24oJ21vdXNlZG93bicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIGQzLnNlbGVjdEFsbCgnZy5ub2RlLWdyb3VwJykuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIGlmIChhLmlkICE9PSBkLmlkKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBkcmF3IHRoZSBub2RlIHJlY3RhbmdsZVxuICAgIG5vZGVzLmFwcGVuZCgncmVjdCcpXG4gICAgICAuYXR0cih7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDAsXG4gICAgICAgIGNsYXNzOiAnbm9kZS1zaGFwZScsXG4gICAgICAgIHN0eWxlOiAnc3Ryb2tlOiMwMDAwMDA7IGZpbGw6bm9uZTsnLFxuICAgICAgICB3aWR0aDogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gZC53aWR0aDtcbiAgICAgICAgfSxcbiAgICAgICAgaGVpZ2h0OiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgIHJldHVybiBkLmhlaWdodDtcbiAgICAgICAgfSxcbiAgICAgICAgJ3BvaW50ZXItZXZlbnRzJzogJ3Zpc2libGUnLFxuICAgICAgICAnZGF0YS1ub2RlJzogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gZC5nZXRSZWZJZCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBkcmF3IHRoZSBub2RlJ3MgbmFtZS9sYWJlbFxuICAgIG5vZGVzLmFwcGVuZCgndGV4dCcpXG4gICAgICAuYXR0cih7XG4gICAgICAgIHg6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgcmV0dXJuIGQud2lkdGggLyAyO1xuICAgICAgICB9LFxuICAgICAgICB5OiAxNSxcbiAgICAgICAgZmlsbDogJ2JsYWNrJyxcbiAgICAgICAgY2xhc3M6ICdub2RlLW5hbWUnLFxuICAgICAgICAnZm9udC1mYW1pbHknOiAnbW9ub3NwYWNlJyxcbiAgICAgICAgJ2ZvbnQtc2l6ZSc6IDE1XG4gICAgICB9KVxuICAgICAgLnRleHQoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdE5vZGVOYW1lKGQubGFiZWwpO1xuICAgICAgfSlcbiAgICAgIC5zdHlsZSgndGV4dC1hbmNob3InLCAnbWlkZGxlJyk7XG4gICAgXG4gICAgLy8gZHJhdyB0aGUgbm9kZSdzIHZhbHVlIGxhYmVsc1xuICAgIG5vZGVzLmVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgIGxldCB5ID0gMzA7XG4gICAgICBkLnZhbHVlcy5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgLmFwcGVuZCgndGV4dCcpXG4gICAgICAgICAgLmF0dHIoe1xuICAgICAgICAgICAgeDogMixcbiAgICAgICAgICAgIHk6IHksXG4gICAgICAgICAgICBjbGFzczogJ25vZGUtdmFsdWUnLFxuICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ21vbm9zcGFjZScsXG4gICAgICAgICAgICAnZGF0YS1ub2RlJzogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGQuZ2V0UmVmSWQoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnZGF0YS12YWx1ZSc6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgbGV0IG5vZGUgPSBlIGFzIFZOb2RlO1xuICAgICAgICAgICAgbGV0IGggPSB0aGlzO1xuICAgICAgICAgICAgbGV0IHYgPSBoLmF0dHJpYnV0ZXNbJ2RhdGEtdmFsdWUnXS52YWx1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZW5naW5lLnVwZGF0ZUV2aWRlbmNlKG5vZGUuaWQsIHYpO1xuICAgICAgICAgICAgZ3JhcGguZ2V0Tm9kZXMoKS5mb3JFYWNoKG5vZGUgPT4gbm9kZS5wcm9icyA9IGVuZ2luZS5nZXRQcm9icyhub2RlLmlkKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGdyYXBoLmdldE5vZGVzKCkuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgICAgICAgbm9kZS52YWx1ZXMuZm9yRWFjaCgodmFsdWUsIGopID0+IHtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgYmVsaWVmIGJhcnNcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0b3IgPSAncmVjdFtkYXRhLW5vZGU9XCInICsgbm9kZS5nZXRSZWZJZCgpICsgJ1wiXVtkYXRhLXZhbHVlPVwiJyArIHZhbHVlICsgJ1wiXSc7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHNlbGVjdG9yKS5hdHRyKHt3aWR0aDogbm9kZS5wcm9ic1tqXSAqIDEwMH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBwcm9iYWJpbGl0eSB0ZXh0c1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gJ3RleHRbZGF0YS1ub2RlPVwiJyArIG5vZGUuZ2V0UmVmSWQoKSArICdcIl1bZGF0YS1wdmFsdWU9XCInICsgdmFsdWUgKyAnXCJdJztcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3Qoc2VsZWN0b3IpLnRleHQoZm9ybWF0UGN0KG5vZGUucHJvYnNbal0sIGxlZnRQYWQpKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0VmFsdWUodmFsdWUsIGxlZnRQYWQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB5ICs9IDE1O1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gZHJhdyB0aGUgbm9kZSdzIHBlcmNlbnRhZ2UgdGV4dFxuICAgIG5vZGVzLmVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgIGxldCB5ID0gMzA7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGQucHJvYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgLmFwcGVuZCgndGV4dCcpXG4gICAgICAgICAgLmF0dHIoe1xuICAgICAgICAgICAgeDogMiArIGQud2lkdGgsXG4gICAgICAgICAgICB5OiB5LFxuICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ21vbm9zcGFjZScsXG4gICAgICAgICAgICBjbGFzczogJ25vZGUtcGN0JyxcbiAgICAgICAgICAgICdkYXRhLW5vZGUnOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZC5nZXRSZWZJZCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdkYXRhLXB2YWx1ZSc6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBkLnZhbHVlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0UGN0KGQucHJvYnNbaV0sIGxlZnRQYWQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB5ICs9IDE1O1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIFxuICAgIC8vIGRyYXcgdGhlIG5vZGUncyBiZWxpZWYgYmFyc1xuICAgIG5vZGVzLmVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgIGxldCB5ID0gMjA7XG4gICAgICBkLnByb2JzLmZvckVhY2goKHByb2IsIGluZGV4KSA9PiB7XG4gICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAgIC5hdHRyKHtcbiAgICAgICAgICAgIHg6IDUwLFxuICAgICAgICAgICAgeTogeSxcbiAgICAgICAgICAgIHdpZHRoOiBwcm9iICogMTAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAxMCxcbiAgICAgICAgICAgIGNsYXNzOiAnbm9kZS1iYXInLFxuICAgICAgICAgICAgJ2RhdGEtbm9kZSc6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBkLmdldFJlZklkKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2RhdGEtdmFsdWUnOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZC52YWx1ZXNbaW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB5ICs9IDE1O1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gZHJhdyB0aGUgbm9kZSdzIGludGVycXVhcnRpbGUgbGluZXNcbiAgICBub2Rlcy5lYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICBsZXQgeTEgPSAyMDtcbiAgICAgIGxldCB5MiA9IGQuaGVpZ2h0IC0gNTtcbiAgICAgIGxldCB3aWR0aCA9IGQud2lkdGggLSA1MDtcbiAgICAgIGxldCB4SW5jID0gd2lkdGggLyA0LjA7XG4gICAgICBsZXQgeCA9IDUwICsgeEluYztcbiAgICAgIFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgLmFwcGVuZCgnbGluZScpXG4gICAgICAgICAgLmF0dHIoe1xuICAgICAgICAgICAgeDE6IHgsXG4gICAgICAgICAgICB5MTogeTEsXG4gICAgICAgICAgICB4MjogeCxcbiAgICAgICAgICAgIHkyOiB5MixcbiAgICAgICAgICAgIGNsYXNzOiAnbm9kZS1pcWxpbmUnLFxuICAgICAgICAgICAgJ3N0cm9rZS1kYXNoYXJyYXknOiAnNSwgMScsXG4gICAgICAgICAgICBzdHlsZTogJ3N0cm9rZTpibGFjazsgc3Ryb2tlLXdpZHRoOjFweCcsXG4gICAgICAgICAgfSk7XG4gICAgICAgIHggKz0geEluYztcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBzZXQgdGhlIGRyYWdnaW5nIGJlaGF2aW9yXG4gICAgbGV0IGRyYWcgPSBkMy5iZWhhdmlvci5kcmFnKClcbiAgICAgIC5vcmlnaW4oKGQsIGkpID0+IHtcbiAgICAgICAgbGV0IG5vZGUgPSBkIGFzIFZOb2RlO1xuICAgICAgICByZXR1cm4gbm9kZS5wb2ludDtcbiAgICAgIH0pXG4gICAgICAub24oJ2RyYWdzdGFydCcsIChkLCBpKSA9PiB7XG4gICAgICAgIGxldCBlID0gZDMuZXZlbnQgYXMgZDMuQmFzZUV2ZW50O1xuICAgICAgICBlLnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfSlcbiAgICAgIC5vbignZHJhZycsIChkLCBpKSA9PiB7XG4gICAgICAgIGxldCBldmVudCA9IGQzLmV2ZW50IGFzIGFueTtcbiAgICAgICAgbGV0IGQzRXZlbnQgPSBkMy5ldmVudCBhcyBkMy5CYXNlRXZlbnQ7XG4gICAgICAgIGxldCBtb3VzZUV2ZW50ID0gZDNFdmVudC5zb3VyY2VFdmVudCBhcyBNb3VzZUV2ZW50O1xuICAgICAgICBsZXQgbm9kZSA9IGQgYXMgVk5vZGU7XG4gICAgICAgIFxuICAgICAgICBub2RlLnBvaW50LnggPSBldmVudC54O1xuICAgICAgICBub2RlLnBvaW50LnkgPSBldmVudC55O1xuICAgICAgICBcbiAgICAgICAgbGV0IGlkID0gJ2cjJyArIG5vZGUuZ2V0UmVmSWQoKTtcbiAgICAgICAgZDMuc2VsZWN0KGlkKS5hdHRyKHtcbiAgICAgICAgICB0cmFuc2Zvcm06IG5vZGUuZ2V0VHJhbnNsYXRpb24oKVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGxldCBhcmNzID0gJ2xpbmVbZGF0YS1wYXJlbnQ9JyArIG5vZGUuZ2V0UmVmSWQoKSArICddJztcbiAgICAgICAgZDMuc2VsZWN0QWxsKGFyY3MpXG4gICAgICAgICAgLmVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIGxldCBlZGdlID0gZCBhcyBWRWRnZTtcbiAgICAgICAgICAgIGxldCBwYXRoID0gZ3JhcGguZ2V0UGF0aChlZGdlLnBhcmVudC5pZCwgZWRnZS5jaGlsZC5pZCk7XG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXR0cih7XG4gICAgICAgICAgICAgIHgxOiBwYXRoLnAxLngsXG4gICAgICAgICAgICAgIHkxOiBwYXRoLnAxLnksXG4gICAgICAgICAgICAgIHgyOiBwYXRoLnAyLngsXG4gICAgICAgICAgICAgIHkyOiBwYXRoLnAyLnlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgYXJjcyA9ICdsaW5lW2RhdGEtY2hpbGQ9JyArIG5vZGUuZ2V0UmVmSWQoKSArICddJztcbiAgICAgICAgZDMuc2VsZWN0QWxsKGFyY3MpXG4gICAgICAgICAgLmVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIGxldCBlZGdlID0gZCBhcyBWRWRnZTtcbiAgICAgICAgICAgIGxldCBwYXRoID0gZ3JhcGguZ2V0UGF0aChlZGdlLnBhcmVudC5pZCwgZWRnZS5jaGlsZC5pZCk7XG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXR0cih7XG4gICAgICAgICAgICAgIHgxOiBwYXRoLnAxLngsXG4gICAgICAgICAgICAgIHkxOiBwYXRoLnAxLnksXG4gICAgICAgICAgICAgIHgyOiBwYXRoLnAyLngsXG4gICAgICAgICAgICAgIHkyOiBwYXRoLnAyLnlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgbm9kZXMuY2FsbChkcmFnKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBsZWZ0UGFkKHBhZDogc3RyaW5nLCB0aHJlaG9sZDogbnVtYmVyLCBzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IG9zdHIgPSBzdHI7XG4gICAgaWYgKG9zdHIubGVuZ3RoIDwgdGhyZWhvbGQpIHtcbiAgICAgIHdoaWxlIChvc3RyLmxlbmd0aCA8IHRocmVob2xkKSB7XG4gICAgICAgIG9zdHIgPSBwYWQgKyBvc3RyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9zdHI7XG4gICAgfVxuICAgIHJldHVybiBvc3RyO1xuICB9XG4gIFxuICBwcml2YXRlIHJpZ2h0UGFkKHBhZDogc3RyaW5nLCB0aHJlaG9sZDogbnVtYmVyLCBzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IG9zdHIgPSBzdHI7XG4gICAgaWYgKG9zdHIubGVuZ3RoIDwgdGhyZWhvbGQpIHtcbiAgICAgIHdoaWxlIChvc3RyLmxlbmd0aCA8IHRocmVob2xkKSB7XG4gICAgICAgIG9zdHIgKz0gcGFkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9zdHI7XG4gICAgfVxuICAgIHJldHVybiBvc3RyO1xuICB9XG4gIFxuICBwcml2YXRlIGZvcm1hdE5vZGVOYW1lKHY6IHN0cmluZykge1xuICAgIHJldHVybiB2Lmxlbmd0aCA+IE1BWF9OT0RFX05BTUVfTEVOR1RIID8gdi5zdWJzdHIoMCwgTUFYX05PREVfTkFNRV9MRU5HVEgpIDogdjtcbiAgfVxuICBcbiAgcHJpdmF0ZSBmb3JtYXRWYWx1ZSh2OiBzdHJpbmcsIHBhZGRpbmc6IChwYWQ6IHN0cmluZywgdGhyZXNob2xkOiBudW1iZXIsIHN0cjogc3RyaW5nKSA9PiBzdHJpbmcpIHtcbiAgICBsZXQgdmFsdWUgPSB2Lmxlbmd0aCA+IE1BWF9WQUxVRV9MRU5HVEggPyB2LnN1YnN0cigwLCBNQVhfVkFMVUVfTEVOR1RIKSA6IHY7XG4gICAgcmV0dXJuIHBhZGRpbmcoREVGQVVMVF9QQURESU5HLCBNQVhfVkFMVUVfTEVOR1RILCB2YWx1ZSk7XG4gIH1cbiAgXG4gIHByaXZhdGUgZm9ybWF0UGN0KHA6IG51bWJlciwgcGFkZGluZzogKHBhZDogc3RyaW5nLCB0aHJlc2hvbGQ6IG51bWJlciwgc3RyOiBzdHJpbmcpID0+IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHBhZGRpbmcoREVGQVVMVF9QQURESU5HLCBNQVhfUENUX1ZBTFVFLCAocCAqIDEwMCkudG9GaXhlZCgyKSk7XG4gIH1cbn0iLCJleHBvcnQge1xuICBCYm5VdGlsLCBWYXJpYWJsZSwgQmJuTm9kZSwgQk5vZGUsIEJFZGdlLCBFZGdlVHlwZSwgQmJuLCBKb2luVHJlZSwgRXZpZGVuY2VUeXBlLCBFdmlkZW5jZUJ1aWxkZXIsIEV2aWRlbmNlXG59ZnJvbSAnLi9ncmFwaCc7XG5leHBvcnQge0luZmVyZW5jZUNvbnRyb2xsZXJ9IGZyb20gJy4vcHB0Yyc7XG5leHBvcnQge1ZOb2RlLCBWRWRnZSwgVkdyYXBoLCBHcmFwaFJlbmRlcmVyLCBSZW5kZXJPcHRpb25zLCBJbmZlcmVuY2VFbmdpbmUsIE5vT3BJbmZlcmVuY2VFbmdpbmV9IGZyb20gJy4vdml6JzsiXX0=
