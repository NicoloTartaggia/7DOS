System.register("graph", [], function (exports_1, context_1) {
    "use strict";
    var Variable, BGraph, BNode, BbnNode, Clique, SepSet, BEdge, JtEdge, EdgeType, Dag, Bbn, DagPathDetector, Pdag, PdagPathDetector, Ug, JoinTree, JoinTreePathDetector, EvidenceType, ChangeType, EvidenceBuilder, Evidence, Potential, PotentialEntry, IdUtil, PotentialUtil, BbnUtil, CompareUtil;
    var __moduleName = context_1 && context_1.id;
    return {
        setters: [],
        execute: function () {
            Variable = class Variable {
                constructor(id, name, _values) {
                    this.id = id;
                    this.name = name;
                    this._values = _values;
                    this.values = [..._values];
                }
            };
            exports_1("Variable", Variable);
            BGraph = class BGraph {
                constructor() {
                    this.nodes = new Map();
                    this.edges = new Map();
                }
                getNeighbors(id) {
                    let keys = Array.from(this.edges.keys());
                    let neighbors1 = keys.filter(key => this.edges.get(key).has(id));
                    let neighbors2 = this.edges.has(id) ? Array.from(this.edges.get(id).values()) : [];
                    let neighbors = neighbors1.concat(neighbors2);
                    return new Set(neighbors);
                }
                getNode(id) {
                    return this.nodes.get(id);
                }
                getNodes() {
                    return Array.from(this.nodes.keys()).map(id => this.nodes.get(id));
                }
                getEdges() {
                    let keys = Array.from(this.edges.keys());
                    let stream = keys.map(lhsId => {
                        let edges = Array.from(this.edges.get(lhsId))
                            .map(rhsId => {
                            let edgeType = EdgeType.UNDIRECTED;
                            let leftId = lhsId;
                            let rightId = rhsId;
                            if (!this.edges.get(rhsId).has(lhsId)) {
                                edgeType = EdgeType.DIRECTED;
                            }
                            else {
                                leftId = Math.min(lhsId, rhsId);
                                rightId = leftId === lhsId ? rhsId : lhsId;
                            }
                            return new BEdge(new BNode(leftId), new BNode(rightId), edgeType);
                        });
                        return edges;
                    });
                    return this.removeDuplicates(this.flatten(stream));
                }
                addNode(node) {
                    if (!this.nodes.has(node.id)) {
                        this.nodes.set(node.id, node);
                    }
                    if (!this.edges.has(node.id)) {
                        this.edges.set(node.id, new Set());
                    }
                    return this;
                }
                addEdge(edge) {
                    let lhs = edge.lhs;
                    let rhs = edge.rhs;
                    this.addNode(lhs);
                    this.addNode(rhs);
                    if (this.shouldAdd(edge)) {
                        let left = lhs.id;
                        let right = rhs.id;
                        if (EdgeType.UNDIRECTED === edge.type) {
                            this.edges.get(left).add(right);
                            this.edges.get(right).add(left);
                        }
                        else {
                            this.edges.get(left).add(right);
                        }
                    }
                    return this;
                }
                edgeExists(id1, id2) {
                    if (this.edges.has(id1) && this.edges.get(id1).has(id2)) {
                        return true;
                    }
                    if (this.edges.has(id2) && this.edges.get(id2).has(id1)) {
                        return true;
                    }
                    return false;
                }
                removeNode(id) {
                    this.nodes.delete(id);
                    this.edges.delete(id);
                    this.edges.forEach((v, k) => v.delete(id));
                }
                shouldAdd(edge) {
                    let lhs = edge.lhs;
                    let rhs = edge.rhs;
                    if (lhs.id === rhs.id) {
                        return false;
                    }
                    if (!this.edges.get(lhs.id).has(rhs.id)) {
                        if (!this.edges.get(rhs.id).has(lhs.id)) {
                            return true;
                        }
                    }
                    return false;
                }
                flatten(edges) {
                    let list = [];
                    for (let i = 0; i < edges.length; i++) {
                        for (let j = 0; j < edges[i].length; j++) {
                            list.push(edges[i][j]);
                        }
                    }
                    return list;
                }
                removeDuplicates(edges) {
                    let map = new Map();
                    let arr = [];
                    edges.forEach(e => {
                        let key = e.toString();
                        if (!map.has(key)) {
                            map.set(key, e);
                            arr.push(e);
                        }
                    });
                    return arr;
                }
            };
            exports_1("BGraph", BGraph);
            BNode = class BNode {
                constructor(id) {
                    this.id = id;
                    this.metadata = new Map();
                }
                addMetadata(key, val) {
                    this.metadata.set(key, val);
                    return this;
                }
            };
            exports_1("BNode", BNode);
            BbnNode = class BbnNode extends BNode {
                constructor(variable, probs = []) {
                    super(variable.id);
                    this.variable = variable;
                    this.probs = probs;
                }
                getWeight() {
                    return this.variable.values.length;
                }
                toString() {
                    let s = this.variable.name + ' {';
                    s += this.variable.values.join(',');
                    s += '}';
                    return s;
                }
            };
            exports_1("BbnNode", BbnNode);
            Clique = class Clique extends BNode {
                constructor(nodes) {
                    super(IdUtil.hashOfArr(nodes.map(n => '' + n.id)));
                    this.nodes = nodes;
                    this._marked = false;
                }
                isMarked() {
                    return this._marked;
                }
                mark() {
                    this._marked = true;
                }
                unmark() {
                    this._marked = false;
                }
                nodesMinus(nodes) {
                    let ids = this.nodes.map(n => n.id);
                    return nodes.filter(n => ids.indexOf(n.id) === -1);
                }
                isSuperset(that) {
                    let s1 = this.nodes.map(n => n.id);
                    let s2 = new Set(that.nodes.map(n => n.id));
                    let s3 = new Set(s1.filter(id => s2.has(id)));
                    if (s2.size === s3.size) {
                        // console.log(this.toString() + ' is superset of ' + that.toString());
                        return true;
                    }
                    // console.log(this.toString() + ' is NOT superset of ' + that.toString());
                    return false;
                }
                getWeight() {
                    let weight = 1;
                    this.nodes.forEach(n => {
                        weight = weight * n.getWeight();
                    });
                    return weight;
                }
                contains(id) {
                    let result = this.nodes.find(n => n.id === id);
                    if (result) {
                        return true;
                    }
                    return false;
                }
                getSepSet(that) {
                    return new SepSet(this, that);
                }
                toString() {
                    return '(' +
                        this.nodes
                            .map(n => n.variable.name)
                            .sort((a, b) => CompareUtil.strCompare(a, b))
                            .join('-') +
                        ')';
                }
            };
            exports_1("Clique", Clique);
            SepSet = class SepSet extends Clique {
                constructor(left, right) {
                    super([]);
                    this.left = left;
                    this.right = right;
                    let set2 = new Set(left.nodes.map(n => n.id));
                    let set1 = new Set(right.nodes.filter(n => set2.has(n.id)).map(n => n.id));
                    this.nodes = left.nodes.filter(n => set1.has(n.id));
                    this.id = IdUtil.hashOfArr(this.nodes.map(n => '' + n.id));
                }
                getCost() {
                    return this.left.getWeight() + this.right.getWeight();
                }
                getMass() {
                    return this.nodes.length;
                }
                toString() {
                    return '[' +
                        this.nodes
                            .map(n => n.variable.name)
                            .sort((a, b) => CompareUtil.strCompare(a, b))
                            .join('-') +
                        ']';
                }
            };
            exports_1("SepSet", SepSet);
            BEdge = class BEdge {
                constructor(lhs, rhs, type = EdgeType.UNDIRECTED) {
                    this.lhs = lhs;
                    this.rhs = rhs;
                    this.type = type;
                }
                toString() {
                    let arrow = EdgeType.UNDIRECTED === this.type ? '--' : '->';
                    let left = this.lhs.id;
                    let right = this.rhs.id;
                    if (EdgeType.UNDIRECTED === this.type) {
                        left = Math.min(this.lhs.id, this.rhs.id);
                        right = (this.lhs.id === left) ? this.rhs.id : this.lhs.id;
                    }
                    return left + arrow + right;
                }
            };
            exports_1("BEdge", BEdge);
            JtEdge = class JtEdge extends BEdge {
                constructor(sepSet) {
                    super(sepSet.left, sepSet.right, EdgeType.UNDIRECTED);
                    this.sepSet = sepSet;
                }
                toString() {
                    return this.sepSet.left.toString() + '--' +
                        this.sepSet.toString() + '--' +
                        this.sepSet.right.toString();
                }
            };
            exports_1("JtEdge", JtEdge);
            (function (EdgeType) {
                EdgeType[EdgeType["UNDIRECTED"] = 1] = "UNDIRECTED";
                EdgeType[EdgeType["DIRECTED"] = 2] = "DIRECTED";
            })(EdgeType || (EdgeType = {}));
            exports_1("EdgeType", EdgeType);
            Dag = class Dag extends BGraph {
                constructor() {
                    super();
                }
                getParents(id) {
                    let keys = Array.from(this.edges.keys());
                    let parents = keys.filter(key => this.edges.get(key).has(id));
                    return new Set(parents);
                }
                getChildren(id) {
                    return this.edges.get(id);
                }
                edgeExists(id1, id2) {
                    if (this.edges.has(id1) && this.edges.get(id1).has(id2)) {
                        return true;
                    }
                    return false;
                }
                shouldAdd(edge) {
                    let parent = edge.lhs;
                    let child = edge.rhs;
                    if (parent.id === child.id) {
                        return false;
                    }
                    if (!this.edges.get(parent.id).has(child.id)) {
                        if (!this.edges.get(child.id).has(parent.id)) {
                            if (!(new DagPathDetector(this, child.id, parent.id)).exists()) {
                                return true;
                            }
                        }
                    }
                    return false;
                }
            };
            exports_1("Dag", Dag);
            Bbn = class Bbn extends Dag {
                shouldAdd(edge) {
                    if (!(edge.lhs instanceof BbnNode) || !(edge.rhs instanceof BbnNode)) {
                        return false;
                    }
                    return super.shouldAdd(edge);
                }
            };
            exports_1("Bbn", Bbn);
            DagPathDetector = class DagPathDetector {
                constructor(graph, start, stop) {
                    this.seen = new Set();
                    this.graph = graph;
                    this.start = start;
                    this.stop = stop;
                }
                exists() {
                    if (this.start === this.stop) {
                        return true;
                    }
                    return this.find(this.start);
                }
                find(id) {
                    let children = this.graph.getChildren(id);
                    if (children.has(this.stop)) {
                        return true;
                    }
                    else {
                        this.seen.add(id);
                        for (let child of children) {
                            if (!this.seen.has(child) && this.find(child)) {
                                return true;
                            }
                        }
                    }
                    return false;
                }
            };
            Pdag = class Pdag extends BGraph {
                getParents(id) {
                    let parents = Array.from(this.edges.keys())
                        .filter(key => this.edges.get(key).has(id) && !this.edges.get(id).has(key));
                    return new Set(parents);
                }
                getOutNodes(id) {
                    let parents = this.getParents(id);
                    let subset = Array.from(this.getNeighbors(id)).filter(item => !parents.has(item));
                    return new Set(subset);
                }
                shouldAdd(edge) {
                    let parent = edge.lhs;
                    let child = edge.rhs;
                    if (parent.id === child.id) {
                        return false;
                    }
                    if (!this.edges.get(parent.id).has(child.id)) {
                        if (!this.edges.get(child.id).has(parent.id)) {
                            if (!(new PdagPathDetector(this, child.id, parent.id)).exists()) {
                                return true;
                            }
                        }
                    }
                    return false;
                }
            };
            exports_1("Pdag", Pdag);
            PdagPathDetector = class PdagPathDetector {
                constructor(graph, start, stop) {
                    this.seen = new Set();
                    this.graph = graph;
                    this.start = start;
                    this.stop = stop;
                }
                exists() {
                    if (this.start === this.stop) {
                        return true;
                    }
                    return this.find(this.start);
                }
                find(id) {
                    let outNodes = this.graph.getOutNodes(id);
                    if (outNodes.has(this.stop)) {
                        return true;
                    }
                    else {
                        this.seen.add(id);
                        for (let outNode of outNodes) {
                            if (!this.seen.has(outNode)) {
                                if (this.find(outNode)) {
                                    return true;
                                }
                            }
                        }
                    }
                    return false;
                }
            };
            Ug = class Ug extends BGraph {
                constructor() {
                    super();
                }
            };
            exports_1("Ug", Ug);
            JoinTree = class JoinTree extends Ug {
                constructor() {
                    super();
                    this.potentials = new Map();
                    this.evidences = new Map();
                }
                getBbnPotential(node) {
                    let clique = node.metadata.get('parent.clique');
                    return PotentialUtil.normalize(PotentialUtil.marginalizeFor(this, clique, [node]));
                }
                unmarkCliques() {
                    this.getCliques().forEach(clique => clique.unmark());
                }
                getBbnNodes() {
                    let nodes = new Map();
                    this.getCliques().forEach(clique => {
                        clique.nodes.forEach(node => nodes.set(node.id, node));
                    });
                    let bbnNodes = [];
                    nodes.forEach((v, k) => bbnNodes.push(v));
                    return bbnNodes;
                }
                getBbnNode(id) {
                    let bbnNodes = this.getBbnNodes();
                    for (let i = 0; i < bbnNodes.length; i++) {
                        if (id === bbnNodes[i].id) {
                            return bbnNodes[i];
                        }
                    }
                    return new BbnNode(new Variable(-1, '_dummy_', new Set()));
                }
                getBbnNodeByName(name) {
                    return this.getBbnNodes().filter(n => n.variable.name === name)[0];
                }
                findCliquesWithNodeAndParents(id) {
                    return this.getCliques()
                        .filter(clique => {
                        if (!(clique.contains(id))) {
                            return false;
                        }
                        let bbnNode = this.getBbnNode(id);
                        if (bbnNode.metadata.has('parents')) {
                            let parents = bbnNode.metadata.get('parents');
                            for (let i = 0; i < parents.length; i++) {
                                let parent = parents[i];
                                if (!(clique.contains(parent.id))) {
                                    return false;
                                }
                            }
                        }
                        return true;
                    });
                }
                addPotential(clique, potential) {
                    this.potentials.set(clique.id, potential);
                    return this;
                }
                getCliques() {
                    return this.getNodes()
                        .filter(n => !(n instanceof SepSet))
                        .map(n => n);
                }
                getSepSets() {
                    return this.getNodes()
                        .filter(n => (n instanceof SepSet))
                        .map(n => n);
                }
                addEdge(edge) {
                    if (!(edge instanceof JtEdge)) {
                        return this;
                    }
                    let jtEdge = edge;
                    let sepSet = jtEdge.sepSet;
                    let lhs = jtEdge.lhs;
                    let rhs = jtEdge.rhs;
                    this.addNode(sepSet);
                    this.addNode(lhs);
                    this.addNode(rhs);
                    if (this.shouldAdd(edge)) {
                        this.edges.get(lhs.id).add(sepSet.id);
                        this.edges.get(sepSet.id).add(lhs.id);
                        this.edges.get(rhs.id).add(sepSet.id);
                        this.edges.get(sepSet.id).add(rhs.id);
                    }
                    return this;
                }
                setListener(listener) {
                    this.listener = listener;
                }
                getEvidence(node, value) {
                    if (!this.evidences.has(node.id)) {
                        this.evidences.set(node.id, new Map());
                    }
                    if (!this.evidences.get(node.id).has(value)) {
                        let potentialEntry = new PotentialEntry();
                        potentialEntry.add(node.id, value);
                        potentialEntry.value = 1.0;
                        let potential = new Potential();
                        potential.addEntry(potentialEntry);
                        this.evidences.get(node.id).set(value, potential);
                    }
                    return this.evidences.get(node.id).get(value);
                }
                unobserve(nodes) {
                    let evidences = nodes.map(n => this.getUnobservedEvidence(n));
                    this.updateEvidences(evidences);
                    return this;
                }
                unobserveAll() {
                    this.unobserve(this.getBbnNodes());
                    return this;
                }
                updateEvidences(evidences) {
                    evidences.forEach(e => e.validate());
                    let change = this.getChangeType(evidences);
                    evidences.forEach(evidence => {
                        let node = evidence.node;
                        let potentials = this.evidences.get(node.id);
                        evidence.values.forEach((v, k) => {
                            let potential = potentials.get(k);
                            potential.entries[0].value = v;
                        });
                    });
                    this.notifyListener(change);
                    return this;
                }
                setObservation(evidence) {
                    // only deal with observation types in this method
                    if (EvidenceType.OBSERVATION !== evidence.type) {
                        // console.log('evidence not observation type returning');
                        return this;
                    }
                    // check to see if previous evidence was also observation
                    // evidence that is observation type always has only one value that is 1
                    let potentials = this.evidences.get(evidence.node.id);
                    let pvalues = Array.from(potentials.keys())
                        .filter(v => {
                        let potential = potentials.get(v);
                        let entry = potential.entries[0];
                        let p = entry.value;
                        if (p === 1.0) {
                            return true;
                        }
                        return false;
                    });
                    let cvalues = Array.from(evidence.values.keys())
                        .filter(v => 1.0 === evidence.values.get(v));
                    if (1 === pvalues.length) {
                        // previous evidence was of type observation
                        // both current and previous evidences are observation type
                        // console.log('both previous and current evidences are of type observation');
                        let lastValue = pvalues[0];
                        let currValue = cvalues[0];
                        if (lastValue === currValue) {
                            // if the last value is equal to the current value, unobserve it
                            // console.log(lastValue + ' equals ' + currValue + ' so will unobserve');
                            this.unobserve([evidence.node]);
                        }
                        else {
                            // console.log(lastValue + ' NOT equals ' + currValue + ' so will update evidence');
                            this.updateEvidences([evidence]);
                        }
                    }
                    else {
                        // console.log('number previous values === 1 was ' + pvalues.length + ' so will update evidence');
                        this.updateEvidences([evidence]);
                    }
                    return this;
                }
                shouldAdd(edge) {
                    let jtEdge = edge;
                    let sepSet = jtEdge.sepSet;
                    let lhs = jtEdge.lhs;
                    let rhs = jtEdge.rhs;
                    if (lhs.id === rhs.id) {
                        // console.log('false: ' + jtEdge.toString());
                        return false;
                    }
                    if (!(new JoinTreePathDetector(this, lhs.id, rhs.id)).exists()) {
                        // console.log('true: ' +  jtEdge.toString());
                        return true;
                    }
                    // console.log('false: ' + jtEdge.toString());
                    return false;
                }
                getChangeType(evidences) {
                    let changes = evidences.map(evidence => {
                        let node = evidence.node;
                        let potentials = this.evidences.get(node.id);
                        let change = evidence.compare(potentials);
                        return change;
                    });
                    let count = changes.filter(c => ChangeType.RETRACTION === c).length;
                    if (count > 0) {
                        return ChangeType.RETRACTION;
                    }
                    count = changes.filter(c => ChangeType.UPDATE === c).length;
                    if (count > 0) {
                        return ChangeType.UPDATE;
                    }
                    return ChangeType.NONE;
                }
                getUnobservedEvidence(node) {
                    let evidence = new Evidence(node, EvidenceType.UNOBSERVE);
                    node.variable.values.forEach(v => evidence.addValue(v, 1.0));
                    return evidence;
                }
                notifyListener(change) {
                    if (this.listener) {
                        if (ChangeType.RETRACTION === change) {
                            this.listener.evidenceRetracted(this);
                        }
                        else if (ChangeType.UPDATE === change) {
                            this.listener.evidenceUpdated(this);
                        }
                    }
                }
            };
            exports_1("JoinTree", JoinTree);
            JoinTreePathDetector = class JoinTreePathDetector {
                constructor(graph, start, stop) {
                    this.seen = new Set();
                    this.graph = graph;
                    this.start = start;
                    this.stop = stop;
                }
                exists() {
                    if (this.start === this.stop) {
                        return true;
                    }
                    return this.find(this.start);
                }
                find(id) {
                    let neighbors = this.graph.getNeighbors(id);
                    if (neighbors.has(this.stop)) {
                        return true;
                    }
                    else {
                        this.seen.add(id);
                        for (let neighbor of neighbors) {
                            if (!this.seen.has(neighbor)) {
                                if (this.find(neighbor)) {
                                    return true;
                                }
                            }
                        }
                    }
                    return false;
                }
            };
            (function (EvidenceType) {
                EvidenceType[EvidenceType["VIRTUAL"] = 1] = "VIRTUAL";
                EvidenceType[EvidenceType["FINDING"] = 2] = "FINDING";
                EvidenceType[EvidenceType["OBSERVATION"] = 3] = "OBSERVATION";
                EvidenceType[EvidenceType["UNOBSERVE"] = 4] = "UNOBSERVE";
            })(EvidenceType || (EvidenceType = {}));
            exports_1("EvidenceType", EvidenceType);
            (function (ChangeType) {
                ChangeType[ChangeType["NONE"] = 1] = "NONE";
                ChangeType[ChangeType["UPDATE"] = 2] = "UPDATE";
                ChangeType[ChangeType["RETRACTION"] = 3] = "RETRACTION";
            })(ChangeType || (ChangeType = {}));
            exports_1("ChangeType", ChangeType);
            EvidenceBuilder = class EvidenceBuilder {
                constructor() {
                    this.values = new Map();
                    this.type = EvidenceType.OBSERVATION;
                }
                withNode(node) {
                    this.node = node;
                    return this;
                }
                withType(type) {
                    this.type = type;
                    return this;
                }
                withEvidence(val, likelihood) {
                    this.values.set(val, likelihood);
                    return this;
                }
                build() {
                    let evidence = new Evidence(this.node, this.type);
                    this.values.forEach((v, k) => evidence.values.set(k, v));
                    return evidence;
                }
            };
            exports_1("EvidenceBuilder", EvidenceBuilder);
            Evidence = class Evidence {
                constructor(node, type) {
                    this.node = node;
                    this.type = type;
                    this.values = new Map();
                }
                addValue(value, likelihood) {
                    this.values.set(value, likelihood);
                    return this;
                }
                compare(potentials) {
                    let that = this.convert(potentials);
                    let unobserveThat = this.isUnobserved(that);
                    let unobserveThis = this.isUnobserved(this.values);
                    if (unobserveThat && unobserveThis) {
                        return ChangeType.NONE;
                    }
                    let observeThat = this.isObserved(that);
                    let observeThis = this.isObserved(this.values);
                    if (observeThat && observeThis) {
                        let s1 = this.getObservedValue(that);
                        let s2 = this.getObservedValue(this.values);
                        if (s1 === s2) {
                            return ChangeType.NONE;
                        }
                        else {
                            return ChangeType.RETRACTION;
                        }
                    }
                    return ChangeType.RETRACTION;
                }
                validate() {
                    this.node.variable.values.forEach(value => {
                        if (!this.values.has(value)) {
                            this.values.set(value, 0.0);
                        }
                    });
                    if (EvidenceType.VIRTUAL === this.type) {
                        let sum = this.node.variable.values
                            .map(value => this.values.get(value))
                            .reduce((a, b) => a + b);
                        this.node.variable.values.forEach(value => {
                            let d = this.values.get(value) / sum;
                            this.values.set(value, d);
                        });
                    }
                    else if (EvidenceType.FINDING === this.type) {
                        this.node.variable.values.forEach(value => {
                            let d = this.values.get(value) > 0.0 ? 1.0 : 0.0;
                            this.values.set(value, d);
                        });
                        let count = this.node.variable.values
                            .map(value => this.values.get(value))
                            .reduce((a, b) => a + b);
                        if (0 === count) {
                            this.node.variable.values.forEach(value => this.values.set(value, 1.0));
                        }
                    }
                    else if (EvidenceType.OBSERVATION === this.type) {
                        let keys = Array.from(this.values.keys())
                            .sort((a, b) => -1 * CompareUtil.intCompare(this.values.get(a), this.values.get(b)));
                        let key = keys[0];
                        this.node.variable.values.forEach(value => {
                            if (key === value) {
                                this.values.set(value, 1.0);
                            }
                            else {
                                this.values.set(value, 0.0);
                            }
                        });
                    }
                    else if (EvidenceType.UNOBSERVE === this.type) {
                        this.node.variable.values.forEach(value => this.values.set(value, 1.0));
                    }
                }
                convert(map) {
                    let m = new Map();
                    map.forEach((v, k) => {
                        let likelihood = v.entries[0].value;
                        m.set(k, likelihood);
                    });
                    return m;
                }
                isUnobserved(values) {
                    let counts = 0;
                    values.forEach((v, k) => counts += v);
                    return (counts === values.size);
                }
                isObserved(values) {
                    let countOne = 0;
                    let countZero = 0;
                    values.forEach((v, k) => {
                        if (1.0 === v) {
                            countOne++;
                        }
                        else if (0.0 === v) {
                            countZero++;
                        }
                    });
                    return (1 === countOne && values.size - 1 === countZero);
                }
                getObservedValue(values) {
                    let strs = Array.from(values.keys())
                        .filter(k => (1.0 === values.get(k)));
                    return strs[0];
                }
            };
            exports_1("Evidence", Evidence);
            Potential = class Potential {
                constructor() {
                    this.entries = [];
                }
                addEntry(entry) {
                    this.entries.push(entry);
                }
                getMatchingEntries(entry) {
                    return this.entries.filter(e => e.matches(entry));
                }
                toString() {
                    let s = '';
                    this.entries.forEach(entry => s += entry.toString() + '\n');
                    return s.substr(0, s.length - 1);
                }
            };
            exports_1("Potential", Potential);
            PotentialEntry = class PotentialEntry {
                constructor() {
                    this.entries = new Map();
                    this.value = 1.0;
                }
                add(id, value) {
                    if (!this.entries.has(id)) {
                        this.entries.set(id, value);
                    }
                    return this;
                }
                matches(that) {
                    for (let key of that.entries.keys()) {
                        if (!this.entries.has(key) || !(this.entries.get(key) === that.entries.get(key))) {
                            return false;
                        }
                    }
                    return true;
                }
                toString() {
                    let s = '';
                    this.entries.forEach((v, k) => {
                        s += k + '=' + v + ',';
                    });
                    s += this.value;
                    return s;
                }
                duplicate() {
                    let entry = new PotentialEntry();
                    this.entries.forEach((v, k) => entry.add(k, v));
                    entry.value = this.value;
                    return entry;
                }
            };
            exports_1("PotentialEntry", PotentialEntry);
            IdUtil = class IdUtil {
                static hashOfStr(s) {
                    let hash = 0;
                    if (s.length === 0) {
                        return hash;
                    }
                    for (let i = 0, len = s.length; i < len; i++) {
                        let chr = s.charCodeAt(i);
                        hash = ((hash << 5) - hash) + chr;
                        hash |= 0; // Convert to 32bit integer
                    }
                    return hash;
                }
                static hashOfArr(arr) {
                    return this.hashOfStr(arr.sort().join('-'));
                }
            };
            exports_1("IdUtil", IdUtil);
            PotentialUtil = class PotentialUtil {
                static passSingleMessage(jointree, x, s, y) {
                    // console.log('passing message ' + x.toString() + ' -- ' + s.toString() + ' -- ' + y.toString());
                    let oldSepSetPotential = jointree.potentials.get(s.id);
                    let yPotential = jointree.potentials.get(y.id);
                    let newSepSetPotential = this.marginalizeFor(jointree, x, s.nodes);
                    jointree.addPotential(s, newSepSetPotential);
                    this.multiply(yPotential, this.divide(newSepSetPotential, oldSepSetPotential));
                }
                static marginalizeFor(joinTree, clique, nodes) {
                    let potential = this.getPotentialFromNodes(nodes);
                    let cliquePotential = joinTree.potentials.get(clique.id);
                    potential.entries.forEach(entry => {
                        let matchedEntries = cliquePotential.getMatchingEntries(entry);
                        let t = 0.0;
                        matchedEntries.forEach(matchedEntry => t += matchedEntry.value);
                        entry.value = t;
                    });
                    return potential;
                }
                static normalize(potential) {
                    let sum = 0.0;
                    potential.entries.forEach(entry => {
                        sum += entry.value;
                    });
                    potential.entries.forEach(entry => {
                        let d = entry.value / sum;
                        entry.value = d;
                    });
                    return potential;
                }
                static divide(numerator, denominator) {
                    let potential = new Potential();
                    numerator.entries.forEach(entry => {
                        let entries = denominator.entries;
                        if (entries.length > 0) {
                            let e = entries[0];
                            let d = (this.isZero(entry.value) || this.isZero(e.value)) ? 0.0 : entry.value / e.value;
                            let newEntry = entry.duplicate();
                            newEntry.value = d;
                            potential.addEntry(newEntry);
                        }
                    });
                    return potential;
                }
                static multiply(bigger, smaller) {
                    smaller.entries.forEach(entry => {
                        let entries = bigger.getMatchingEntries(entry);
                        entries.forEach(e => {
                            let d = e.value * entry.value;
                            e.value = d;
                        });
                    });
                }
                static getPotential(node, parents) {
                    let potential = this.getPotentialFromNodes(this.merge(node, parents));
                    let total = potential.entries.length;
                    for (let i = 0; i < total; i++) {
                        let prob = node.probs[i];
                        potential.entries[i].value = prob;
                    }
                    return potential;
                }
                static getPotentialFromNodes(nodes) {
                    let valueLists = nodes.map(n => n.variable.values);
                    let cartesian = this.getCartesianProduct(valueLists);
                    let potential = new Potential();
                    cartesian.forEach(values => {
                        let entry = new PotentialEntry();
                        for (let i = 0; i < nodes.length; i++) {
                            let value = values[i];
                            let id = nodes[i].id;
                            entry.add(id, value);
                        }
                        potential.addEntry(entry);
                    });
                    return potential;
                }
                static isZero(d) {
                    return (0 === d);
                }
                static getCartesianProduct(lists) {
                    let results = [];
                    if (lists.length === 0) {
                        return results;
                    }
                    else {
                        let first = lists[0];
                        let tail = lists.slice(0).splice(1);
                        let remaining = this.getCartesianProduct(tail);
                        first.forEach(condition => {
                            if (remaining.length > 0) {
                                remaining.forEach(rlist => {
                                    let result = [];
                                    result.push(condition);
                                    rlist.forEach(r => result.push(r));
                                    results.push(result);
                                });
                            }
                            else {
                                let result = [];
                                result.push(condition);
                                results.push(result);
                            }
                        });
                    }
                    return results;
                }
                static merge(node, parents) {
                    let nodes = [];
                    parents.forEach(n => nodes.push(n));
                    nodes.push(node);
                    return nodes;
                }
            };
            exports_1("PotentialUtil", PotentialUtil);
            BbnUtil = class BbnUtil {
                static getHuangGraph() {
                    let a = new BbnNode(new Variable(0, 'a', new Set(['on', 'off'])), [0.5, 0.5]);
                    let b = new BbnNode(new Variable(1, 'b', new Set(['on', 'off'])), [0.5, 0.5, 0.4, 0.6]);
                    let c = new BbnNode(new Variable(2, 'c', new Set(['on', 'off'])), [0.7, 0.3, 0.2, 0.8]);
                    let d = new BbnNode(new Variable(3, 'd', new Set(['on', 'off'])), [0.9, 0.1, 0.5, 0.5]);
                    let e = new BbnNode(new Variable(4, 'e', new Set(['on', 'off'])), [0.3, 0.7, 0.6, 0.4]);
                    let f = new BbnNode(new Variable(5, 'f', new Set(['on', 'off'])), [0.01, 0.99, 0.01, 0.99, 0.01, 0.99, 0.99, 0.01]);
                    let g = new BbnNode(new Variable(6, 'g', new Set(['on', 'off'])), [0.8, 0.2, 0.1, 0.9]);
                    let h = new BbnNode(new Variable(7, 'h', new Set(['on', 'off'])), [0.05, 0.95, 0.95, 0.05, 0.95, 0.05, 0.95, 0.05]);
                    let bbn = new Bbn()
                        .addNode(a)
                        .addNode(b)
                        .addNode(c)
                        .addNode(d)
                        .addNode(e)
                        .addNode(f)
                        .addNode(g)
                        .addNode(h)
                        .addEdge(new BEdge(a, b, EdgeType.DIRECTED))
                        .addEdge(new BEdge(a, c, EdgeType.DIRECTED))
                        .addEdge(new BEdge(b, d, EdgeType.DIRECTED))
                        .addEdge(new BEdge(c, e, EdgeType.DIRECTED))
                        .addEdge(new BEdge(d, f, EdgeType.DIRECTED))
                        .addEdge(new BEdge(e, f, EdgeType.DIRECTED))
                        .addEdge(new BEdge(c, g, EdgeType.DIRECTED))
                        .addEdge(new BEdge(e, h, EdgeType.DIRECTED))
                        .addEdge(new BEdge(g, h, EdgeType.DIRECTED));
                    return bbn;
                }
            };
            exports_1("BbnUtil", BbnUtil);
            CompareUtil = class CompareUtil {
                static intCompare(x, y) {
                    return (x < y) ? -1 : ((x === y) ? 0 : 1);
                }
                static strCompare(x, y) {
                    return x.localeCompare(y);
                }
            };
            exports_1("CompareUtil", CompareUtil);
        }
    };
});
System.register("pptc", ["graph"], function (exports_2, context_2) {
    "use strict";
    var graph_1, InferenceController, Initializer, Moralizer, PotentialInitializer, Propagator, Transformer, Triangulator, NodeClique, EvidenceCollector, EvidenceDistributor;
    var __moduleName = context_2 && context_2.id;
    return {
        setters: [
            function (graph_1_1) {
                graph_1 = graph_1_1;
            }
        ],
        execute: function () {
            InferenceController = class InferenceController {
                static apply(bbn) {
                    PotentialInitializer.init(bbn);
                    let ug = Moralizer.moralize(bbn);
                    let cliques = Triangulator.triangulate(ug);
                    let joinTree = Transformer.transform(cliques);
                    Initializer.initialize(joinTree);
                    Propagator.propagate(joinTree);
                    joinTree.setListener(new InferenceController());
                    return joinTree;
                }
                evidenceRetracted(jointree) {
                    Initializer.initialize(jointree);
                    Propagator.propagate(jointree);
                }
                evidenceUpdated(jointree) {
                    Propagator.propagate(jointree);
                }
            };
            exports_2("InferenceController", InferenceController);
            Initializer = class Initializer {
                static initialize(joinTree) {
                    joinTree.getCliques().forEach(clique => {
                        let potential = graph_1.PotentialUtil.getPotentialFromNodes(clique.nodes);
                        joinTree.addPotential(clique, potential);
                    });
                    joinTree.getSepSets().forEach(sepSet => {
                        let potential = graph_1.PotentialUtil.getPotentialFromNodes(sepSet.nodes);
                        joinTree.addPotential(sepSet, potential);
                    });
                    joinTree.getBbnNodes().forEach(node => {
                        let clique = this.getClique(node, joinTree);
                        // console.log(node.variable.name + ' mapped to clique ' + clique.toString());
                        let p1 = joinTree.potentials.get(clique.id);
                        let p2 = node.potential;
                        // console.log(p1.toString());
                        // console.log('>>>>');
                        // console.log(p2.toString());
                        // console.log('----');
                        graph_1.PotentialUtil.multiply(p1, p2);
                        // console.log(p1.toString());
                        // console.log('****');
                    });
                    joinTree.getBbnNodes().forEach(node => {
                        node.variable.values.forEach(value => {
                            let clique = node.metadata.get('parent.clique');
                            let cliquePotential = joinTree.potentials.get(clique.id);
                            let nodePotential = joinTree.getEvidence(node, value);
                            graph_1.PotentialUtil.multiply(cliquePotential, nodePotential);
                            // console.log(clique.toString());
                            // console.log(cliquePotential.toString());
                        });
                    });
                    return joinTree;
                }
                static getClique(node, jointree) {
                    let clique;
                    if (!node.metadata.has('parent.clique')) {
                        let cliques = jointree.findCliquesWithNodeAndParents(node.id)
                            .sort((a, b) => graph_1.CompareUtil.intCompare(a.id, b.id));
                        clique = cliques[0];
                    }
                    else {
                        clique = node.metadata.get('parent.clique');
                    }
                    node.addMetadata('parent.clique', clique);
                    return clique;
                }
            };
            exports_2("Initializer", Initializer);
            Moralizer = class Moralizer {
                static moralize(dag) {
                    let ug = new graph_1.Ug();
                    dag.getNodes().forEach(node => ug.addNode(node));
                    dag.getEdges().forEach(edge => ug.addEdge(new graph_1.BEdge(edge.lhs, edge.rhs)));
                    dag.getNodes().forEach(node => {
                        let parents = Array.from(dag.getParents(node.id));
                        let size = parents.length;
                        for (let i = 0; i < size; i++) {
                            let pa1 = dag.getNode(parents[i]);
                            for (let j = i + 1; j < size; j++) {
                                let pa2 = dag.getNode(parents[j]);
                                ug.addEdge(new graph_1.BEdge(pa1, pa2));
                            }
                        }
                    });
                    dag.getNodes().forEach(node => {
                        let parents = Array.from(dag.getParents(node.id)).map(id => dag.getNode(id));
                        node.addMetadata('parents', parents);
                    });
                    return ug;
                }
            };
            exports_2("Moralizer", Moralizer);
            PotentialInitializer = class PotentialInitializer {
                static init(bbn) {
                    bbn.getNodes().forEach(node => {
                        let bbnNode = node;
                        let parents = Array.from(bbn.getParents(node.id)).map(id => bbn.getNode(id));
                        bbnNode.potential = graph_1.PotentialUtil.getPotential(bbnNode, parents);
                    });
                }
            };
            exports_2("PotentialInitializer", PotentialInitializer);
            Propagator = class Propagator {
                static propagate(joinTree) {
                    let cliques = joinTree.getCliques().sort((a, b) => graph_1.CompareUtil.intCompare(a.id, b.id));
                    let x = cliques[0];
                    // console.log(x.toString());
                    joinTree.unmarkCliques();
                    this.collectEvidence(joinTree, x);
                    joinTree.unmarkCliques();
                    this.distributeEvidence(joinTree, x);
                    return joinTree;
                }
                static collectEvidence(jointree, start) {
                    let collector = new EvidenceCollector(jointree, start);
                    collector.start();
                }
                static distributeEvidence(jointree, start) {
                    let distributor = new EvidenceDistributor(jointree, start);
                    distributor.start();
                }
            };
            exports_2("Propagator", Propagator);
            Transformer = class Transformer {
                static transform(cliques) {
                    let jointree = new graph_1.JoinTree();
                    let sepSets = this.getSepSets(cliques);
                    let n = (cliques.length - 1) * 2;
                    let total = 0;
                    for (let i = 0; i < sepSets.length; i++) {
                        let sepSet = sepSets[i];
                        jointree.addEdge(new graph_1.JtEdge(sepSet));
                        total += 2;
                        if (total === n) {
                            break;
                        }
                    }
                    return jointree;
                }
                static getSepSets(cliques) {
                    let sepSets = [];
                    let size = cliques.length;
                    for (let i = 0; i < size; i++) {
                        for (let j = i + 1; j < size; j++) {
                            sepSets.push(new graph_1.SepSet(cliques[i], cliques[j]));
                        }
                    }
                    return sepSets.sort((a, b) => {
                        let result = -1 * graph_1.CompareUtil.intCompare(a.getMass(), b.getMass());
                        if (0 === result) {
                            result = graph_1.CompareUtil.intCompare(a.getCost(), b.getCost());
                            if (0 === result) {
                                result = graph_1.CompareUtil.intCompare(a.id, b.id);
                            }
                        }
                        return result;
                    });
                }
            };
            exports_2("Transformer", Transformer);
            Triangulator = class Triangulator {
                static triangulate(m) {
                    let cliques = [];
                    let mm = this.duplicate(m);
                    while (mm.getNodes().length > 0) {
                        let nodeClique = this.selectNode(mm);
                        let clique = new graph_1.Clique(nodeClique.getBbnNodes());
                        if (!this.isSubset(cliques, clique)) {
                            cliques.push(clique);
                        }
                        mm.removeNode(nodeClique.node.id);
                        nodeClique.edges.forEach(e => {
                            m.addEdge(e);
                            mm.addEdge(e);
                        });
                    }
                    return cliques;
                }
                static duplicate(g) {
                    let ug = new graph_1.Ug();
                    g.getNodes().forEach(n => ug.addNode(n));
                    g.getEdges().forEach(e => ug.addEdge(e));
                    return ug;
                }
                static selectNode(m) {
                    let cliques = m.getNodes()
                        .map(node => {
                        let weight = this.getWeight(node, m);
                        let edges = this.getEdgesToAdd(node, m);
                        let neighbors = Array.from(m.getNeighbors(node.id)).map(id => m.getNode(id));
                        return new NodeClique(node, neighbors, weight, edges);
                    })
                        .sort((a, b) => {
                        let result = graph_1.CompareUtil.intCompare(a.edges.length, b.edges.length);
                        if (0 === result) {
                            result = graph_1.CompareUtil.intCompare(a.weight, b.weight);
                            if (0 === result) {
                                result = graph_1.CompareUtil.intCompare(a.node.id, b.node.id);
                            }
                        }
                        return result;
                    });
                    return cliques[0];
                }
                static getWeight(n, m) {
                    let weight = n.getWeight();
                    Array.from(m.getNeighbors(n.id))
                        .map(id => m.getNode(id))
                        .forEach(neighbor => weight *= neighbor.getWeight());
                    return weight;
                }
                static getEdgesToAdd(n, m) {
                    let edges = [];
                    let neighbors = Array.from(m.getNeighbors(n.id)).map(id => m.getNode(id));
                    let size = neighbors.length;
                    for (let i = 0; i < size; i++) {
                        let ne1 = neighbors[i];
                        for (let j = 0; j < size; j++) {
                            let ne2 = neighbors[j];
                            if (!m.edgeExists(ne1.id, ne2.id)) {
                                edges.push(new graph_1.BEdge(ne1, ne2));
                            }
                        }
                    }
                    return edges;
                }
                static isSubset(cliques, clique) {
                    for (let i = 0; i < cliques.length; i++) {
                        if (cliques[i].isSuperset(clique)) {
                            return true;
                        }
                    }
                    return false;
                }
            };
            exports_2("Triangulator", Triangulator);
            NodeClique = class NodeClique {
                constructor(node, neighbors, weight, edges) {
                    this.node = node;
                    this.neighbors = neighbors;
                    this.weight = weight;
                    this.edges = edges;
                }
                getBbnNodes() {
                    let nodes = this.neighbors.slice(0);
                    nodes.push(this.node);
                    return nodes.map(n => n);
                }
            };
            EvidenceCollector = class EvidenceCollector {
                constructor(joinTree, startClique) {
                    this.joinTree = joinTree;
                    this.startClique = startClique;
                }
                start() {
                    // console.log('STARTING EVIDENCE COLLECTION from ' + this.startClique.toString());
                    this.startClique.mark();
                    this.joinTree.getNeighbors(this.startClique.id).forEach(sepSetId => {
                        let sepSet = this.joinTree.getNode(sepSetId);
                        Array.from(this.joinTree.getNeighbors(sepSetId))
                            .map(id => this.joinTree.getNode(id))
                            .filter(clique => !clique.isMarked())
                            .forEach(y => {
                            this.walk(this.startClique, sepSet, y);
                        });
                    });
                }
                walk(x, s, y) {
                    y.mark();
                    Array.from(this.joinTree.getNeighbors(y.id))
                        .map(id => this.joinTree.getNode(id))
                        .forEach(sepSet => {
                        Array.from(this.joinTree.getNeighbors(sepSet.id))
                            .map(id => this.joinTree.getNode(id))
                            .filter(clique => !clique.isMarked())
                            .forEach(clique => this.walk(y, sepSet, clique));
                    });
                    graph_1.PotentialUtil.passSingleMessage(this.joinTree, y, s, x);
                }
            };
            exports_2("EvidenceCollector", EvidenceCollector);
            EvidenceDistributor = class EvidenceDistributor {
                constructor(joinTree, startClique) {
                    this.joinTree = joinTree;
                    this.startClique = startClique;
                }
                start() {
                    // console.log('STARTING EVIDENCE DISTRIBUTION from ' + this.startClique.toString());
                    this.startClique.mark();
                    this.joinTree.getNeighbors(this.startClique.id).forEach(sepSetId => {
                        let sepSet = this.joinTree.getNode(sepSetId);
                        Array.from(this.joinTree.getNeighbors(sepSetId))
                            .map(id => this.joinTree.getNode(id))
                            .filter(clique => !clique.isMarked())
                            .forEach(y => {
                            graph_1.PotentialUtil.passSingleMessage(this.joinTree, this.startClique, sepSet, y);
                            this.walk(this.startClique, sepSet, y);
                        });
                    });
                }
                walk(x, s, y) {
                    y.mark();
                    Array.from(this.joinTree.getNeighbors(y.id))
                        .map(id => this.joinTree.getNode(id))
                        .forEach(sepSet => {
                        Array.from(this.joinTree.getNeighbors(sepSet.id))
                            .map(id => this.joinTree.getNode(id))
                            .filter(clique => !clique.isMarked())
                            .forEach(clique => {
                            graph_1.PotentialUtil.passSingleMessage(this.joinTree, y, sepSet, clique);
                            this.walk(y, sepSet, clique);
                        });
                    });
                }
            };
            exports_2("EvidenceDistributor", EvidenceDistributor);
        }
    };
});
System.register("viz", ["d3"], function (exports_3, context_3) {
    "use strict";
    var d3, OUT_LEFT, OUT_TOP, OUT_RIGHT, OUT_BOTTOM, MAX_NODE_NAME_LENGTH, MAX_VALUE_LENGTH, MAX_PCT_VALUE, DEFAULT_PADDING, VGraph, VEdge, VNode, VPoint, VPath, Util, NoOpInferenceEngine, RenderOptions, GraphRenderer;
    var __moduleName = context_3 && context_3.id;
    return {
        setters: [
            function (d3_1) {
                d3 = d3_1;
            }
        ],
        execute: function () {
            OUT_LEFT = 1, OUT_TOP = 2, OUT_RIGHT = 4, OUT_BOTTOM = 8;
            MAX_NODE_NAME_LENGTH = 15;
            MAX_VALUE_LENGTH = 5;
            MAX_PCT_VALUE = 6;
            DEFAULT_PADDING = '\u00A0';
            VGraph = class VGraph {
                constructor() {
                    this.nodes = new Map();
                    this.edges = new Map();
                }
                getNodes() {
                    return Array.from(this.nodes.values());
                }
                getEdges() {
                    return Array.from(this.edges.values());
                }
                addNode(node) {
                    this.nodes.set(node.id, node);
                    return this;
                }
                addEdge(edge) {
                    this.edges.set(edge.getId(), edge);
                    return this;
                }
                getNode(id) {
                    return this.nodes.get(id);
                }
                getPath(id1, id2) {
                    return this.getNode(id1).getPath(this.getNode(id2));
                }
            };
            exports_3("VGraph", VGraph);
            VEdge = class VEdge {
                constructor(parent, child) {
                    this.parent = parent;
                    this.child = child;
                    this.points = [];
                }
                getId() {
                    return Util.hashOfStr(this.toString());
                }
                toString() {
                    return this.parent.label + '->' + this.child.label;
                }
            };
            exports_3("VEdge", VEdge);
            VNode = class VNode {
                constructor(id, label, values, probs) {
                    this.id = id;
                    this.label = label;
                    this.values = values;
                    this.probs = probs;
                    this.width = 150;
                    this.probs = this.normalizeProbs(this.probs);
                    this.height = values.length * 15 + 20;
                    this.point = new VPoint(Math.random(), Math.random());
                }
                updatePoint(point) {
                    this.point.x = point.x;
                    this.point.y = point.y;
                }
                getRefId() {
                    return this.label;
                }
                getTranslation() {
                    return 'translate(' + this.point.x + ',' + this.point.y + ')';
                }
                getMid() {
                    let dx = this.width / 2.0 + this.point.x;
                    let dy = this.height / 2.0 + this.point.y;
                    return new VPoint(dx, dy);
                }
                normalizeProbs(probs) {
                    let sum = probs.reduce((a, b) => a + b);
                    return probs.map(p => p / sum);
                }
                getPath(that) {
                    let theta = that.point.getTheta(this.point);
                    let p1 = this.getPoint(theta);
                    let p2 = that.getPoint(theta + Math.PI);
                    let error = p1.error || p2.error ? true : false;
                    let path = new VPath(p1, p2);
                    path.error = error;
                    return path;
                }
                toString() {
                    return this.id + '|' +
                        this.label + '|' +
                        this.values.join(',') + '|' +
                        this.probs.join(',') + '|' +
                        this.point.toString();
                }
                getPoint(theta) {
                    let c = this.getMid();
                    let cx = c.x;
                    let cy = c.y;
                    let w = this.width / 2.0;
                    let h = this.height / 2.0;
                    let d = this.getDistance(new VPoint(cx, cy), new VPoint(cx + w, cy + h));
                    let x = cx + d * Math.cos(theta);
                    let y = cy + d * Math.sin(theta);
                    let ocode = this.getOutCode(new VPoint(x, y));
                    let px = 0;
                    let py = 0;
                    let error = false;
                    switch (ocode) {
                        case OUT_TOP:
                            px = cx - h * ((x - cx) / (y - cy));
                            py = cy - h;
                            break;
                        case OUT_LEFT:
                            px = cx - w;
                            py = cy - w * ((y - cy) / (x - cx));
                            break;
                        case OUT_BOTTOM:
                            px = cx + h * ((x - cx) / (y - cy));
                            py = cy + h;
                            break;
                        case OUT_RIGHT:
                            px = cx + w;
                            py = cy + w * ((y - cy) / (x - cx));
                            break;
                        default:
                            error = true;
                    }
                    let p = new VPoint(px, py);
                    p.error = error;
                    return p;
                }
                getDistance(p1, p2) {
                    let x = p1.x - p2.x;
                    let y = p1.y - p2.y;
                    let d = Math.sqrt((x * x) + (y * y));
                    return d;
                }
                getOutCode(point) {
                    let out = 0;
                    if (this.width <= 0) {
                        out |= OUT_LEFT | OUT_RIGHT;
                    }
                    else if (point.x < this.point.x) {
                        out |= OUT_LEFT;
                    }
                    else if (point.x > this.point.x + this.width) {
                        out |= OUT_RIGHT;
                    }
                    if (this.height <= 0) {
                        out |= OUT_TOP | OUT_BOTTOM;
                    }
                    else if (point.y < this.point.y) {
                        out |= OUT_TOP;
                    }
                    else if (point.y > this.point.y + this.height) {
                        out |= OUT_BOTTOM;
                    }
                    return out;
                }
            };
            exports_3("VNode", VNode);
            VPoint = class VPoint {
                constructor(x, y) {
                    this.x = x;
                    this.y = y;
                    this.error = false;
                }
                toString() {
                    return '(' + this.x + ',' + this.y + ')';
                }
                getTheta(that) {
                    return Math.atan2(this.y - that.y, this.x - that.x);
                }
            };
            exports_3("VPoint", VPoint);
            VPath = class VPath {
                constructor(p1, p2) {
                    this.p1 = p1;
                    this.p2 = p2;
                    this.error = false;
                }
                toString() {
                    return this.p1.toString() + ' to ' + this.p2.toString();
                }
            };
            exports_3("VPath", VPath);
            Util = class Util {
                static hashOfStr(s) {
                    let hash = 0;
                    if (s.length === 0) {
                        return hash;
                    }
                    for (let i = 0, len = s.length; i < len; i++) {
                        let chr = s.charCodeAt(i);
                        hash = ((hash << 5) - hash) + chr;
                        hash |= 0; // Convert to 32bit integer
                    }
                    return hash;
                }
                static hashOfArr(arr) {
                    return this.hashOfStr(arr.sort().join('-'));
                }
            };
            exports_3("Util", Util);
            NoOpInferenceEngine = class NoOpInferenceEngine {
                constructor(graph) {
                    this.graph = graph;
                }
                getGraph() {
                    return this.graph;
                }
                updateEvidence(id, value) {
                }
                getProbs(id) {
                    return this.graph.getNode(id).probs;
                }
            };
            exports_3("NoOpInferenceEngine", NoOpInferenceEngine);
            RenderOptions = class RenderOptions {
                constructor(id, width, height) {
                    this.id = id;
                    this.width = width;
                    this.height = height;
                }
            };
            exports_3("RenderOptions", RenderOptions);
            GraphRenderer = class GraphRenderer {
                constructor(engine, options) {
                    this.engine = engine;
                    this.options = options;
                    this.graph = this.engine.getGraph();
                }
                draw() {
                    this.initSvg();
                    this.layoutGraph();
                    this.drawEdges();
                    this.drawNodes();
                }
                initSvg() {
                    d3.select(this.options.id)
                        .attr({
                        width: this.options.width,
                        height: this.options.height
                    })
                        .append('defs')
                        .append('marker')
                        .attr({
                        id: 'arrow',
                        markerWidth: 10,
                        markerHeight: 10,
                        refX: 5,
                        refY: 3,
                        orient: 'auto',
                        markerUnits: 'strokeWidth'
                    })
                        .append('path')
                        .attr({
                        d: 'M0,0 L0,6, L5,3 z',
                        fill: '#f00',
                        class: 'edge-head'
                    });
                }
                getDagreGraph() {
                    let g = new dagre.graphlib.Graph();
                    g.setGraph({});
                    g.setDefaultEdgeLabel(() => {
                        return {};
                    });
                    this.graph.getNodes()
                        .forEach(n => {
                        g.setNode(n.getRefId(), {
                            label: n.getRefId(),
                            width: n.width,
                            height: n.height
                        });
                    });
                    this.graph.getEdges()
                        .forEach(e => {
                        g.setEdge(e.parent.getRefId(), e.child.getRefId());
                    });
                    return g;
                }
                layoutGraph() {
                    let g = this.getDagreGraph();
                    dagre.layout(g);
                    this.graph.getNodes()
                        .forEach(n => {
                        let dagreNode = g.node(n.getRefId());
                        if (dagreNode) {
                            n.updatePoint(new VPoint(dagreNode.x, dagreNode.y));
                        }
                    });
                    this.graph.getEdges()
                        .forEach(e => {
                        let dagreEdge = g.edge({ v: e.parent.getRefId(), w: e.child.getRefId() });
                        if (dagreEdge) {
                            e.points = Array.from(dagreEdge.points)
                                .map(point => {
                                let p = point;
                                return new VPoint(p.x, p.y);
                            });
                        }
                    });
                }
                drawEdges() {
                    let graph = this.graph;
                    let edges = d3.select(this.options.id)
                        .selectAll('line')
                        .data(graph.getEdges())
                        .enter()
                        .append('line')
                        .each(function (d) {
                        let path = graph.getPath(d.parent.id, d.child.id);
                        d3.select(this).attr({
                            'data-parent': d.parent.getRefId(),
                            'data-child': d.child.getRefId(),
                            x1: path.p1.x,
                            y1: path.p1.y,
                            x2: path.p2.x,
                            y2: path.p2.y,
                            style: 'stroke:rgb(255,0,0);stroke-width:2',
                            class: 'edge-line',
                            'marker-end': 'url(#arrow)'
                        });
                    });
                }
                drawNodes() {
                    let engine = this.engine;
                    let graph = this.graph;
                    let formatNodeName = this.formatNodeName;
                    let formatPct = this.formatPct;
                    let formatValue = this.formatValue;
                    let leftPad = this.leftPad;
                    let rightPad = this.rightPad;
                    // set the node group
                    let nodes = d3.select(this.options.id)
                        .selectAll('g')
                        .data(graph.getNodes())
                        .enter()
                        .append('g')
                        .attr({
                        id: function (d) {
                            return d.getRefId();
                        },
                        transform: function (d) {
                            return d.getTranslation();
                        },
                        class: 'node-group'
                    })
                        .on('mousedown', function (d) {
                        d3.selectAll('g.node-group').sort((a, b) => {
                            if (a.id !== d.id) {
                                return -1;
                            }
                            else {
                                return 1;
                            }
                        });
                    });
                    // draw the node rectangle
                    nodes.append('rect')
                        .attr({
                        x: 0,
                        y: 0,
                        class: 'node-shape',
                        style: 'stroke:#000000; fill:none;',
                        width: function (d) {
                            return d.width;
                        },
                        height: function (d) {
                            return d.height;
                        },
                        'pointer-events': 'visible',
                        'data-node': function (d) {
                            return d.getRefId();
                        }
                    });
                    // draw the node's name/label
                    nodes.append('text')
                        .attr({
                        x: function (d) {
                            return d.width / 2;
                        },
                        y: 15,
                        fill: 'black',
                        class: 'node-name',
                        'font-family': 'monospace',
                        'font-size': 15
                    })
                        .text(function (d) {
                        return formatNodeName(d.label);
                    })
                        .style('text-anchor', 'middle');
                    // draw the node's value labels
                    nodes.each(function (d) {
                        let y = 30;
                        d.values.forEach(value => {
                            d3.select(this)
                                .append('text')
                                .attr({
                                x: 2,
                                y: y,
                                class: 'node-value',
                                'font-family': 'monospace',
                                'data-node': function (d) {
                                    return d.getRefId();
                                },
                                'data-value': function (d) {
                                    return value;
                                }
                            })
                                .on('click', function (e) {
                                let node = e;
                                let h = this;
                                let v = h.attributes['data-value'].value;
                                engine.updateEvidence(node.id, v);
                                graph.getNodes().forEach(node => node.probs = engine.getProbs(node.id));
                                graph.getNodes().forEach(node => {
                                    node.values.forEach((value, j) => {
                                        // update belief bars
                                        let selector = 'rect[data-node="' + node.getRefId() + '"][data-value="' + value + '"]';
                                        d3.select(selector).attr({ width: node.probs[j] * 100 });
                                        // update probability texts
                                        selector = 'text[data-node="' + node.getRefId() + '"][data-pvalue="' + value + '"]';
                                        d3.select(selector).text(formatPct(node.probs[j], leftPad));
                                    });
                                });
                            })
                                .text(function (d) {
                                return formatValue(value, leftPad);
                            });
                            y += 15;
                        });
                    });
                    // draw the node's percentage text
                    nodes.each(function (d) {
                        let y = 30;
                        for (let i = 0; i < d.probs.length; i++) {
                            d3.select(this)
                                .append('text')
                                .attr({
                                x: 2 + d.width,
                                y: y,
                                'font-family': 'monospace',
                                class: 'node-pct',
                                'data-node': function (d) {
                                    return d.getRefId();
                                },
                                'data-pvalue': function (d) {
                                    return d.values[i];
                                }
                            })
                                .text(function (d) {
                                return formatPct(d.probs[i], leftPad);
                            });
                            y += 15;
                        }
                    });
                    // draw the node's belief bars
                    nodes.each(function (d) {
                        let y = 20;
                        d.probs.forEach((prob, index) => {
                            d3.select(this)
                                .append('rect')
                                .attr({
                                x: 50,
                                y: y,
                                width: prob * 100,
                                height: 10,
                                class: 'node-bar',
                                'data-node': function (d) {
                                    return d.getRefId();
                                },
                                'data-value': function (d) {
                                    return d.values[index];
                                }
                            });
                            y += 15;
                        });
                    });
                    // draw the node's interquartile lines
                    nodes.each(function (d) {
                        let y1 = 20;
                        let y2 = d.height - 5;
                        let width = d.width - 50;
                        let xInc = width / 4.0;
                        let x = 50 + xInc;
                        for (let i = 0; i < 3; i++) {
                            d3.select(this)
                                .append('line')
                                .attr({
                                x1: x,
                                y1: y1,
                                x2: x,
                                y2: y2,
                                class: 'node-iqline',
                                'stroke-dasharray': '5, 1',
                                style: 'stroke:black; stroke-width:1px',
                            });
                            x += xInc;
                        }
                    });
                    // set the dragging behavior
                    let drag = d3.behavior.drag()
                        .origin((d, i) => {
                        let node = d;
                        return node.point;
                    })
                        .on('dragstart', (d, i) => {
                        let e = d3.event;
                        e.sourceEvent.stopPropagation();
                    })
                        .on('drag', (d, i) => {
                        let event = d3.event;
                        let d3Event = d3.event;
                        let mouseEvent = d3Event.sourceEvent;
                        let node = d;
                        node.point.x = event.x;
                        node.point.y = event.y;
                        let id = 'g#' + node.getRefId();
                        d3.select(id).attr({
                            transform: node.getTranslation()
                        });
                        let arcs = 'line[data-parent=' + node.getRefId() + ']';
                        d3.selectAll(arcs)
                            .each(function (d) {
                            let edge = d;
                            let path = graph.getPath(edge.parent.id, edge.child.id);
                            d3.select(this).attr({
                                x1: path.p1.x,
                                y1: path.p1.y,
                                x2: path.p2.x,
                                y2: path.p2.y
                            });
                        });
                        arcs = 'line[data-child=' + node.getRefId() + ']';
                        d3.selectAll(arcs)
                            .each(function (d) {
                            let edge = d;
                            let path = graph.getPath(edge.parent.id, edge.child.id);
                            d3.select(this).attr({
                                x1: path.p1.x,
                                y1: path.p1.y,
                                x2: path.p2.x,
                                y2: path.p2.y
                            });
                        });
                    });
                    nodes.call(drag);
                }
                leftPad(pad, threhold, str) {
                    let ostr = str;
                    if (ostr.length < threhold) {
                        while (ostr.length < threhold) {
                            ostr = pad + ostr;
                        }
                        return ostr;
                    }
                    return ostr;
                }
                rightPad(pad, threhold, str) {
                    let ostr = str;
                    if (ostr.length < threhold) {
                        while (ostr.length < threhold) {
                            ostr += pad;
                        }
                        return ostr;
                    }
                    return ostr;
                }
                formatNodeName(v) {
                    return v.length > MAX_NODE_NAME_LENGTH ? v.substr(0, MAX_NODE_NAME_LENGTH) : v;
                }
                formatValue(v, padding) {
                    let value = v.length > MAX_VALUE_LENGTH ? v.substr(0, MAX_VALUE_LENGTH) : v;
                    return padding(DEFAULT_PADDING, MAX_VALUE_LENGTH, value);
                }
                formatPct(p, padding) {
                    return padding(DEFAULT_PADDING, MAX_PCT_VALUE, (p * 100).toFixed(2));
                }
            };
            exports_3("GraphRenderer", GraphRenderer);
        }
    };
});
System.register("tsbbn", ["graph", "pptc", "viz"], function (exports_4, context_4) {
    "use strict";
    var __moduleName = context_4 && context_4.id;
    return {
        setters: [
            function (graph_2_1) {
                exports_4({
                    "BbnUtil": graph_2_1["BbnUtil"],
                    "Variable": graph_2_1["Variable"],
                    "BbnNode": graph_2_1["BbnNode"],
                    "BNode": graph_2_1["BNode"],
                    "BEdge": graph_2_1["BEdge"],
                    "EdgeType": graph_2_1["EdgeType"],
                    "Bbn": graph_2_1["Bbn"],
                    "JoinTree": graph_2_1["JoinTree"],
                    "EvidenceType": graph_2_1["EvidenceType"],
                    "EvidenceBuilder": graph_2_1["EvidenceBuilder"],
                    "Evidence": graph_2_1["Evidence"]
                });
            },
            function (pptc_1_1) {
                exports_4({
                    "InferenceController": pptc_1_1["InferenceController"]
                });
            },
            function (viz_1_1) {
                exports_4({
                    "VNode": viz_1_1["VNode"],
                    "VEdge": viz_1_1["VEdge"],
                    "VGraph": viz_1_1["VGraph"],
                    "GraphRenderer": viz_1_1["GraphRenderer"],
                    "RenderOptions": viz_1_1["RenderOptions"],
                    "NoOpInferenceEngine": viz_1_1["NoOpInferenceEngine"]
                });
            }
        ],
        execute: function () {
        }
    };
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9ncmFwaC50cyIsInNyYy9wcHRjLnRzIiwic3JjL3Zpei50cyIsInNyYy90c2Jibi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O1lBQUEsV0FBQTtnQkFHRSxZQUFtQixFQUFVLEVBQVMsSUFBWSxFQUFVLE9BQW9CO29CQUE3RCxPQUFFLEdBQUYsRUFBRSxDQUFRO29CQUFTLFNBQUksR0FBSixJQUFJLENBQVE7b0JBQVUsWUFBTyxHQUFQLE9BQU8sQ0FBYTtvQkFDOUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUM7Z0JBQzdCLENBQUM7YUFDRixDQUFBOztZQUVELFNBQUE7Z0JBSUU7b0JBQ0UsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLEdBQUcsRUFBaUIsQ0FBQztvQkFDdEMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLEdBQUcsRUFBdUIsQ0FBQztnQkFDOUMsQ0FBQztnQkFFTSxZQUFZLENBQUMsRUFBVTtvQkFDNUIsSUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7b0JBQ3pDLElBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFDakUsSUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO29CQUNuRixJQUFJLFNBQVMsR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFD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QyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO29CQUNoRyxJQUFJLENBQUMsR0FBRyxJQUFJLE9BQU8sQ0FBQyxJQUFJLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksR0FBRyxDQUFTLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7b0JBQ2hHLElBQUksQ0FBQyxHQUFHLElBQUksT0FBTyxDQUFDLElBQUksUUFBUSxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsSUFBSSxHQUFHLENBQVMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztvQkFDaEcsSUFBSSxDQUFDLEdBQUcsSUFBSSxPQUFPLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxJQUFJLEdBQUcsQ0FBUyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO29CQUNoRyxJQUFJLENBQUMsR0FBRyxJQUFJLE9BQU8sQ0FBQyxJQUFJLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksR0FBRyxDQUFTLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO29CQUM1SCxJQUFJLENBQUMsR0FBRyxJQUFJLE9BQU8sQ0FBQyxJQUFJLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksR0FB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LENBQVM7b0JBQzlCLE9BQU8sQ0FBQyxDQUFDLE1BQU0sR0FBRyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNqRixDQUFDO2dCQUVPLFdBQVcsQ0FBQyxDQUFTLEVBQUUsT0FBZ0U7b0JBQzdGLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxNQUFNLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDNUUsT0FBTyxPQUFPLENBQUMsZUFBZSxFQUFFLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxDQUFDO2dCQUMzRCxDQUFDO2dCQUVPLFNBQVMsQ0FBQyxDQUFTLEVBQUUsT0FBZ0U7b0JBQzNGLE9BQU8sT0FBTyxDQUFDLGVBQWUsRUFBRSxhQUFhLEVBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZFLENBQUM7YUFDRixDQUFBOztRQUFBLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7UUN6b0I2RyxDQUFDIiwiZmlsZSI6InRzYmJuLXN5c3RlbS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBWYXJpYWJsZSB7XG4gIHB1YmxpYyB2YWx1ZXM6IHN0cmluZ1tdO1xuICBcbiAgY29uc3RydWN0b3IocHVibGljIGlkOiBudW1iZXIsIHB1YmxpYyBuYW1lOiBzdHJpbmcsIHByaXZhdGUgX3ZhbHVlczogU2V0PHN0cmluZz4pIHtcbiAgICB0aGlzLnZhbHVlcyA9IFsuLi5fdmFsdWVzXTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQkdyYXBoIHtcbiAgcHJvdGVjdGVkIG5vZGVzOiBNYXA8bnVtYmVyLCBCTm9kZT47XG4gIHByb3RlY3RlZCBlZGdlczogTWFwPG51bWJlciwgU2V0PG51bWJlcj4+O1xuICBcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ub2RlcyA9IG5ldyBNYXA8bnVtYmVyLCBCTm9kZT4oKTtcbiAgICB0aGlzLmVkZ2VzID0gbmV3IE1hcDxudW1iZXIsIFNldDxudW1iZXI+PigpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0TmVpZ2hib3JzKGlkOiBudW1iZXIpOiBTZXQ8bnVtYmVyPiB7XG4gICAgbGV0IGtleXMgPSBBcnJheS5mcm9tKHRoaXMuZWRnZXMua2V5cygpKTtcbiAgICBsZXQgbmVpZ2hib3JzMSA9IGtleXMuZmlsdGVyKGtleSA9PiB0aGlzLmVkZ2VzLmdldChrZXkpLmhhcyhpZCkpO1xuICAgIGxldCBuZWlnaGJvcnMyID0gdGhpcy5lZGdlcy5oYXMoaWQpID8gQXJyYXkuZnJvbSh0aGlzLmVkZ2VzLmdldChpZCkudmFsdWVzKCkpIDogW107XG4gICAgbGV0IG5laWdoYm9ycyA9IG5laWdoYm9yczEuY29uY2F0KG5laWdoYm9yczIpO1xuICAgIHJldHVybiBuZXcgU2V0KG5laWdoYm9ycyk7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXROb2RlKGlkOiBudW1iZXIpOiBCTm9kZSB7XG4gICAgcmV0dXJuIHRoaXMubm9kZXMuZ2V0KGlkKTtcbiAgfVxuICBcbiAgcHVibGljIGdldE5vZGVzKCk6IEJOb2RlW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMubm9kZXMua2V5cygpKS5tYXAoaWQgPT4gdGhpcy5ub2Rlcy5nZXQoaWQpKTtcbiAgfVxuICBcbiAgcHVibGljIGdldEVkZ2VzKCk6IEJFZGdlW10ge1xuICAgIGxldCBrZXlzOiBudW1iZXJbXSA9IEFycmF5LmZyb20odGhpcy5lZGdlcy5rZXlzKCkpO1xuICAgIGxldCBzdHJlYW0gPSBrZXlzLm1hcChsaHNJZCA9PiB7XG4gICAgICBsZXQgZWRnZXMgPSBBcnJheS5mcm9tKHRoaXMuZWRnZXMuZ2V0KGxoc0lkKSlcbiAgICAgICAgLm1hcChyaHNJZCA9PiB7XG4gICAgICAgICAgbGV0IGVkZ2VUeXBlID0gRWRnZVR5cGUuVU5ESVJFQ1RFRDtcbiAgICAgICAgICBsZXQgbGVmdElkID0gbGhzSWQ7XG4gICAgICAgICAgbGV0IHJpZ2h0SWQgPSByaHNJZDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIXRoaXMuZWRnZXMuZ2V0KHJoc0lkKS5oYXMobGhzSWQpKSB7XG4gICAgICAgICAgICBlZGdlVHlwZSA9IEVkZ2VUeXBlLkRJUkVDVEVEO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZWZ0SWQgPSBNYXRoLm1pbihsaHNJZCwgcmhzSWQpO1xuICAgICAgICAgICAgcmlnaHRJZCA9IGxlZnRJZCA9PT0gbGhzSWQgPyByaHNJZCA6IGxoc0lkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gbmV3IEJFZGdlKG5ldyBCTm9kZShsZWZ0SWQpLCBuZXcgQk5vZGUocmlnaHRJZCksIGVkZ2VUeXBlKTtcbiAgICAgICAgfSk7XG4gICAgICByZXR1cm4gZWRnZXM7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlRHVwbGljYXRlcyh0aGlzLmZsYXR0ZW4oc3RyZWFtKSk7XG4gIH1cbiAgXG4gIHB1YmxpYyBhZGROb2RlKG5vZGU6IEJOb2RlKTogQkdyYXBoIHtcbiAgICBpZiAoIXRoaXMubm9kZXMuaGFzKG5vZGUuaWQpKSB7XG4gICAgICB0aGlzLm5vZGVzLnNldChub2RlLmlkLCBub2RlKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCF0aGlzLmVkZ2VzLmhhcyhub2RlLmlkKSkge1xuICAgICAgdGhpcy5lZGdlcy5zZXQobm9kZS5pZCwgbmV3IFNldDxudW1iZXI+KCkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgcHVibGljIGFkZEVkZ2UoZWRnZTogQkVkZ2UpOiBCR3JhcGgge1xuICAgIGxldCBsaHMgPSBlZGdlLmxocztcbiAgICBsZXQgcmhzID0gZWRnZS5yaHM7XG4gICAgXG4gICAgdGhpcy5hZGROb2RlKGxocyk7XG4gICAgdGhpcy5hZGROb2RlKHJocyk7XG4gICAgXG4gICAgaWYgKHRoaXMuc2hvdWxkQWRkKGVkZ2UpKSB7XG4gICAgICBsZXQgbGVmdCA9IGxocy5pZDtcbiAgICAgIGxldCByaWdodCA9IHJocy5pZDtcbiAgICAgIFxuICAgICAgaWYgKEVkZ2VUeXBlLlVORElSRUNURUQgPT09IGVkZ2UudHlwZSkge1xuICAgICAgICB0aGlzLmVkZ2VzLmdldChsZWZ0KS5hZGQocmlnaHQpO1xuICAgICAgICB0aGlzLmVkZ2VzLmdldChyaWdodCkuYWRkKGxlZnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5lZGdlcy5nZXQobGVmdCkuYWRkKHJpZ2h0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHB1YmxpYyBlZGdlRXhpc3RzKGlkMTogbnVtYmVyLCBpZDI6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLmVkZ2VzLmhhcyhpZDEpICYmIHRoaXMuZWRnZXMuZ2V0KGlkMSkuaGFzKGlkMikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAodGhpcy5lZGdlcy5oYXMoaWQyKSAmJiB0aGlzLmVkZ2VzLmdldChpZDIpLmhhcyhpZDEpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICBwdWJsaWMgcmVtb3ZlTm9kZShpZDogbnVtYmVyKSB7XG4gICAgdGhpcy5ub2Rlcy5kZWxldGUoaWQpO1xuICAgIHRoaXMuZWRnZXMuZGVsZXRlKGlkKTtcbiAgICB0aGlzLmVkZ2VzLmZvckVhY2goKHYsIGspID0+IHYuZGVsZXRlKGlkKSk7XG4gIH1cbiAgXG4gIHByb3RlY3RlZCBzaG91bGRBZGQoZWRnZTogQkVkZ2UpOiBib29sZWFuIHtcbiAgICBsZXQgbGhzID0gZWRnZS5saHM7XG4gICAgbGV0IHJocyA9IGVkZ2UucmhzO1xuICAgIFxuICAgIGlmIChsaHMuaWQgPT09IHJocy5pZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIXRoaXMuZWRnZXMuZ2V0KGxocy5pZCkuaGFzKHJocy5pZCkpIHtcbiAgICAgIGlmICghdGhpcy5lZGdlcy5nZXQocmhzLmlkKS5oYXMobGhzLmlkKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICBwcml2YXRlIGZsYXR0ZW4oZWRnZXM6IEJFZGdlW11bXSk6IEJFZGdlW10ge1xuICAgIGxldCBsaXN0OiBCRWRnZVtdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlZGdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBlZGdlc1tpXS5sZW5ndGg7IGorKykge1xuICAgICAgICBsaXN0LnB1c2goZWRnZXNbaV1bal0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGlzdDtcbiAgfVxuICBcbiAgcHJpdmF0ZSByZW1vdmVEdXBsaWNhdGVzKGVkZ2VzOiBCRWRnZVtdKTogQkVkZ2VbXSB7XG4gICAgbGV0IG1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCRWRnZT4oKTtcbiAgICBsZXQgYXJyOiBCRWRnZVtdID0gW107XG4gICAgXG4gICAgZWRnZXMuZm9yRWFjaChlID0+IHtcbiAgICAgIGxldCBrZXkgPSBlLnRvU3RyaW5nKCk7XG4gICAgICBpZiAoIW1hcC5oYXMoa2V5KSkge1xuICAgICAgICBtYXAuc2V0KGtleSwgZSk7XG4gICAgICAgIGFyci5wdXNoKGUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBhcnI7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJOb2RlIHtcbiAgbWV0YWRhdGE6IE1hcDxTdHJpbmcsIGFueT47XG4gIFxuICBjb25zdHJ1Y3RvcihwdWJsaWMgaWQ6IG51bWJlcikge1xuICAgIHRoaXMubWV0YWRhdGEgPSBuZXcgTWFwPFN0cmluZywgYW55PigpO1xuICB9XG4gIFxuICBwdWJsaWMgYWRkTWV0YWRhdGEoa2V5OiBTdHJpbmcsIHZhbDogYW55KTogQk5vZGUge1xuICAgIHRoaXMubWV0YWRhdGEuc2V0KGtleSwgdmFsKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQmJuTm9kZSBleHRlbmRzIEJOb2RlIHtcbiAgcHJvYnM6IG51bWJlcltdO1xuICBwb3RlbnRpYWw6IFBvdGVudGlhbDtcbiAgXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyB2YXJpYWJsZTogVmFyaWFibGUsIHByb2JzOiBudW1iZXJbXSA9IFtdKSB7XG4gICAgc3VwZXIodmFyaWFibGUuaWQpO1xuICAgIHRoaXMucHJvYnMgPSBwcm9icztcbiAgfVxuICBcbiAgZ2V0V2VpZ2h0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudmFyaWFibGUudmFsdWVzLmxlbmd0aDtcbiAgfVxuICBcbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgbGV0IHMgPSB0aGlzLnZhcmlhYmxlLm5hbWUgKyAnIHsnO1xuICAgIHMgKz0gdGhpcy52YXJpYWJsZS52YWx1ZXMuam9pbignLCcpO1xuICAgIHMgKz0gJ30nO1xuICAgIHJldHVybiBzO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDbGlxdWUgZXh0ZW5kcyBCTm9kZSB7XG4gIHByaXZhdGUgX21hcmtlZCA9IGZhbHNlO1xuICBcbiAgY29uc3RydWN0b3IocHVibGljIG5vZGVzOiBCYm5Ob2RlW10pIHtcbiAgICBzdXBlcihJZFV0aWwuaGFzaE9mQXJyKG5vZGVzLm1hcChuID0+ICcnICsgbi5pZCkpKTtcbiAgfVxuICBcbiAgcHVibGljIGlzTWFya2VkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9tYXJrZWQ7XG4gIH1cbiAgXG4gIHB1YmxpYyBtYXJrKCkge1xuICAgIHRoaXMuX21hcmtlZCA9IHRydWU7XG4gIH1cbiAgXG4gIHB1YmxpYyB1bm1hcmsoKSB7XG4gICAgdGhpcy5fbWFya2VkID0gZmFsc2U7XG4gIH1cbiAgXG4gIHB1YmxpYyBub2Rlc01pbnVzKG5vZGVzOiBCYm5Ob2RlW10pOiBCYm5Ob2RlW10ge1xuICAgIGxldCBpZHMgPSB0aGlzLm5vZGVzLm1hcChuID0+IG4uaWQpO1xuICAgIHJldHVybiBub2Rlcy5maWx0ZXIobiA9PiBpZHMuaW5kZXhPZihuLmlkKSA9PT0gLTEpO1xuICB9XG4gIFxuICBwdWJsaWMgaXNTdXBlcnNldCh0aGF0OiBDbGlxdWUpOiBib29sZWFuIHtcbiAgICBsZXQgczEgPSB0aGlzLm5vZGVzLm1hcChuID0+IG4uaWQpO1xuICAgIGxldCBzMiA9IG5ldyBTZXQodGhhdC5ub2Rlcy5tYXAobiA9PiBuLmlkKSk7XG4gICAgbGV0IHMzID0gbmV3IFNldChzMS5maWx0ZXIoaWQgPT4gczIuaGFzKGlkKSkpO1xuICAgIFxuICAgIGlmIChzMi5zaXplID09PSBzMy5zaXplKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnRvU3RyaW5nKCkgKyAnIGlzIHN1cGVyc2V0IG9mICcgKyB0aGF0LnRvU3RyaW5nKCkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudG9TdHJpbmcoKSArICcgaXMgTk9UIHN1cGVyc2V0IG9mICcgKyB0aGF0LnRvU3RyaW5nKCkpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgcHVibGljIGdldFdlaWdodCgpOiBudW1iZXIge1xuICAgIGxldCB3ZWlnaHQgPSAxO1xuICAgIHRoaXMubm9kZXMuZm9yRWFjaChuID0+IHtcbiAgICAgIHdlaWdodCA9IHdlaWdodCAqIG4uZ2V0V2VpZ2h0KCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHdlaWdodDtcbiAgfVxuICBcbiAgcHVibGljIGNvbnRhaW5zKGlkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5ub2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gaWQpO1xuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRTZXBTZXQodGhhdDogQ2xpcXVlKTogU2VwU2V0IHtcbiAgICByZXR1cm4gbmV3IFNlcFNldCh0aGlzLCB0aGF0KTtcbiAgfVxuICBcbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICcoJyArXG4gICAgICB0aGlzLm5vZGVzXG4gICAgICAgIC5tYXAobiA9PiBuLnZhcmlhYmxlLm5hbWUpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBDb21wYXJlVXRpbC5zdHJDb21wYXJlKGEsIGIpKVxuICAgICAgICAuam9pbignLScpICtcbiAgICAgICcpJztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2VwU2V0IGV4dGVuZHMgQ2xpcXVlIHtcbiAgY29uc3RydWN0b3IocHVibGljIGxlZnQ6IENsaXF1ZSwgcHVibGljIHJpZ2h0OiBDbGlxdWUpIHtcbiAgICBzdXBlcihbXSk7XG4gICAgXG4gICAgbGV0IHNldDIgPSBuZXcgU2V0KGxlZnQubm9kZXMubWFwKG4gPT4gbi5pZCkpO1xuICAgIGxldCBzZXQxID0gbmV3IFNldChyaWdodC5ub2Rlcy5maWx0ZXIobiA9PiBzZXQyLmhhcyhuLmlkKSkubWFwKG4gPT4gbi5pZCkpO1xuICAgIHRoaXMubm9kZXMgPSBsZWZ0Lm5vZGVzLmZpbHRlcihuID0+IHNldDEuaGFzKG4uaWQpKTtcbiAgICB0aGlzLmlkID0gSWRVdGlsLmhhc2hPZkFycih0aGlzLm5vZGVzLm1hcChuID0+ICcnICsgbi5pZCkpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0Q29zdCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmxlZnQuZ2V0V2VpZ2h0KCkgKyB0aGlzLnJpZ2h0LmdldFdlaWdodCgpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0TWFzcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm5vZGVzLmxlbmd0aDtcbiAgfVxuICBcbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdbJyArXG4gICAgICB0aGlzLm5vZGVzXG4gICAgICAgIC5tYXAobiA9PiBuLnZhcmlhYmxlLm5hbWUpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBDb21wYXJlVXRpbC5zdHJDb21wYXJlKGEsIGIpKVxuICAgICAgICAuam9pbignLScpICtcbiAgICAgICddJztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQkVkZ2Uge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgbGhzOiBCTm9kZSwgcHVibGljIHJoczogQk5vZGUsIHB1YmxpYyB0eXBlOiBFZGdlVHlwZSA9IEVkZ2VUeXBlLlVORElSRUNURUQpIHtcbiAgXG4gIH1cbiAgXG4gIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIGxldCBhcnJvdyA9IEVkZ2VUeXBlLlVORElSRUNURUQgPT09IHRoaXMudHlwZSA/ICctLScgOiAnLT4nO1xuICAgIGxldCBsZWZ0ID0gdGhpcy5saHMuaWQ7XG4gICAgbGV0IHJpZ2h0ID0gdGhpcy5yaHMuaWQ7XG4gICAgXG4gICAgaWYgKEVkZ2VUeXBlLlVORElSRUNURUQgPT09IHRoaXMudHlwZSkge1xuICAgICAgbGVmdCA9IE1hdGgubWluKHRoaXMubGhzLmlkLCB0aGlzLnJocy5pZCk7XG4gICAgICByaWdodCA9ICh0aGlzLmxocy5pZCA9PT0gbGVmdCkgPyB0aGlzLnJocy5pZCA6IHRoaXMubGhzLmlkO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbGVmdCArIGFycm93ICsgcmlnaHQ7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEp0RWRnZSBleHRlbmRzIEJFZGdlIHtcbiAgY29uc3RydWN0b3IocHVibGljIHNlcFNldDogU2VwU2V0KSB7XG4gICAgc3VwZXIoc2VwU2V0LmxlZnQsIHNlcFNldC5yaWdodCwgRWRnZVR5cGUuVU5ESVJFQ1RFRCk7XG4gIH1cbiAgXG4gIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnNlcFNldC5sZWZ0LnRvU3RyaW5nKCkgKyAnLS0nICtcbiAgICAgIHRoaXMuc2VwU2V0LnRvU3RyaW5nKCkgKyAnLS0nICtcbiAgICAgIHRoaXMuc2VwU2V0LnJpZ2h0LnRvU3RyaW5nKCk7XG4gIH1cbn1cblxuZXhwb3J0IGVudW0gRWRnZVR5cGUge1xuICBVTkRJUkVDVEVEID0gMSwgRElSRUNURURcbn1cblxuZXhwb3J0IGNsYXNzIERhZyBleHRlbmRzIEJHcmFwaCB7XG4gIFxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0UGFyZW50cyhpZDogbnVtYmVyKTogU2V0PG51bWJlcj4ge1xuICAgIGxldCBrZXlzID0gQXJyYXkuZnJvbSh0aGlzLmVkZ2VzLmtleXMoKSk7XG4gICAgbGV0IHBhcmVudHMgPSBrZXlzLmZpbHRlcihrZXkgPT4gdGhpcy5lZGdlcy5nZXQoa2V5KS5oYXMoaWQpKTtcbiAgICByZXR1cm4gbmV3IFNldChwYXJlbnRzKTtcbiAgfVxuICBcbiAgcHVibGljIGdldENoaWxkcmVuKGlkOiBudW1iZXIpOiBTZXQ8bnVtYmVyPiB7XG4gICAgcmV0dXJuIHRoaXMuZWRnZXMuZ2V0KGlkKTtcbiAgfVxuICBcbiAgcHVibGljIGVkZ2VFeGlzdHMoaWQxOiBudW1iZXIsIGlkMjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuZWRnZXMuaGFzKGlkMSkgJiYgdGhpcy5lZGdlcy5nZXQoaWQxKS5oYXMoaWQyKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgcHJvdGVjdGVkIHNob3VsZEFkZChlZGdlOiBCRWRnZSk6IGJvb2xlYW4ge1xuICAgIGxldCBwYXJlbnQgPSBlZGdlLmxocztcbiAgICBsZXQgY2hpbGQgPSBlZGdlLnJocztcbiAgICBcbiAgICBpZiAocGFyZW50LmlkID09PSBjaGlsZC5pZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIXRoaXMuZWRnZXMuZ2V0KHBhcmVudC5pZCkuaGFzKGNoaWxkLmlkKSkge1xuICAgICAgaWYgKCF0aGlzLmVkZ2VzLmdldChjaGlsZC5pZCkuaGFzKHBhcmVudC5pZCkpIHtcbiAgICAgICAgaWYgKCEobmV3IERhZ1BhdGhEZXRlY3Rvcih0aGlzLCBjaGlsZC5pZCwgcGFyZW50LmlkKSkuZXhpc3RzKCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJibiBleHRlbmRzIERhZyB7XG4gIHByb3RlY3RlZCBzaG91bGRBZGQoZWRnZTogQkVkZ2UpOiBib29sZWFuIHtcbiAgICBpZiAoIShlZGdlLmxocyBpbnN0YW5jZW9mIEJibk5vZGUpIHx8ICEoZWRnZS5yaHMgaW5zdGFuY2VvZiBCYm5Ob2RlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuc2hvdWxkQWRkKGVkZ2UpO1xuICB9XG59XG5cbmNsYXNzIERhZ1BhdGhEZXRlY3RvciB7XG4gIHNlZW46IFNldDxudW1iZXI+O1xuICBncmFwaDogRGFnO1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG4gIFxuICBjb25zdHJ1Y3RvcihncmFwaDogRGFnLCBzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpIHtcbiAgICB0aGlzLnNlZW4gPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICB0aGlzLmdyYXBoID0gZ3JhcGg7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuc3RvcCA9IHN0b3A7XG4gIH1cbiAgXG4gIHB1YmxpYyBleGlzdHMoKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuc3RhcnQgPT09IHRoaXMuc3RvcCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZpbmQodGhpcy5zdGFydCk7XG4gIH1cbiAgXG4gIHByaXZhdGUgZmluZChpZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgbGV0IGNoaWxkcmVuID0gdGhpcy5ncmFwaC5nZXRDaGlsZHJlbihpZCk7XG4gICAgaWYgKGNoaWxkcmVuLmhhcyh0aGlzLnN0b3ApKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWVuLmFkZChpZCk7XG4gICAgICBmb3IgKGxldCBjaGlsZCBvZiBjaGlsZHJlbikge1xuICAgICAgICBpZiAoIXRoaXMuc2Vlbi5oYXMoY2hpbGQpICYmIHRoaXMuZmluZChjaGlsZCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBkYWcgZXh0ZW5kcyBCR3JhcGgge1xuICBwdWJsaWMgZ2V0UGFyZW50cyhpZDogbnVtYmVyKTogU2V0PG51bWJlcj4ge1xuICAgIGxldCBwYXJlbnRzID0gQXJyYXkuZnJvbSh0aGlzLmVkZ2VzLmtleXMoKSlcbiAgICAgIC5maWx0ZXIoa2V5ID0+IHRoaXMuZWRnZXMuZ2V0KGtleSkuaGFzKGlkKSAmJiAhdGhpcy5lZGdlcy5nZXQoaWQpLmhhcyhrZXkpKTtcbiAgICByZXR1cm4gbmV3IFNldChwYXJlbnRzKTtcbiAgfVxuICBcbiAgcHVibGljIGdldE91dE5vZGVzKGlkOiBudW1iZXIpOiBTZXQ8bnVtYmVyPiB7XG4gICAgbGV0IHBhcmVudHMgPSB0aGlzLmdldFBhcmVudHMoaWQpO1xuICAgIGxldCBzdWJzZXQgPSBBcnJheS5mcm9tKHRoaXMuZ2V0TmVpZ2hib3JzKGlkKSkuZmlsdGVyKGl0ZW0gPT4gIXBhcmVudHMuaGFzKGl0ZW0pKTtcbiAgICByZXR1cm4gbmV3IFNldChzdWJzZXQpO1xuICB9XG4gIFxuICBwcm90ZWN0ZWQgc2hvdWxkQWRkKGVkZ2U6IEJFZGdlKTogYm9vbGVhbiB7XG4gICAgbGV0IHBhcmVudCA9IGVkZ2UubGhzO1xuICAgIGxldCBjaGlsZCA9IGVkZ2UucmhzO1xuICAgIFxuICAgIGlmIChwYXJlbnQuaWQgPT09IGNoaWxkLmlkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGlmICghdGhpcy5lZGdlcy5nZXQocGFyZW50LmlkKS5oYXMoY2hpbGQuaWQpKSB7XG4gICAgICBpZiAoIXRoaXMuZWRnZXMuZ2V0KGNoaWxkLmlkKS5oYXMocGFyZW50LmlkKSkge1xuICAgICAgICBpZiAoIShuZXcgUGRhZ1BhdGhEZXRlY3Rvcih0aGlzLCBjaGlsZC5pZCwgcGFyZW50LmlkKSkuZXhpc3RzKCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuY2xhc3MgUGRhZ1BhdGhEZXRlY3RvciB7XG4gIHNlZW46IFNldDxudW1iZXI+O1xuICBncmFwaDogUGRhZztcbiAgc3RhcnQ6IG51bWJlcjtcbiAgc3RvcDogbnVtYmVyO1xuICBcbiAgY29uc3RydWN0b3IoZ3JhcGg6IFBkYWcsIHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlcikge1xuICAgIHRoaXMuc2VlbiA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgIHRoaXMuZ3JhcGggPSBncmFwaDtcbiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gICAgdGhpcy5zdG9wID0gc3RvcDtcbiAgfVxuICBcbiAgcHVibGljIGV4aXN0cygpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5zdGFydCA9PT0gdGhpcy5zdG9wKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmluZCh0aGlzLnN0YXJ0KTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBmaW5kKGlkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBsZXQgb3V0Tm9kZXMgPSB0aGlzLmdyYXBoLmdldE91dE5vZGVzKGlkKTtcbiAgICBpZiAob3V0Tm9kZXMuaGFzKHRoaXMuc3RvcCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlZW4uYWRkKGlkKTtcbiAgICAgIGZvciAobGV0IG91dE5vZGUgb2Ygb3V0Tm9kZXMpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlZW4uaGFzKG91dE5vZGUpKSB7XG4gICAgICAgICAgaWYgKHRoaXMuZmluZChvdXROb2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVWcgZXh0ZW5kcyBCR3JhcGgge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBKb2luVHJlZSBleHRlbmRzIFVnIHtcbiAgbGlzdGVuZXI6IEpvaW5UcmVlTGlzdGVuZXI7XG4gIHBvdGVudGlhbHM6IE1hcDxudW1iZXIsIFBvdGVudGlhbD47XG4gIGV2aWRlbmNlczogTWFwPG51bWJlciwgTWFwPHN0cmluZywgUG90ZW50aWFsPj47XG4gIFxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucG90ZW50aWFscyA9IG5ldyBNYXA8bnVtYmVyLCBQb3RlbnRpYWw+KCk7XG4gICAgdGhpcy5ldmlkZW5jZXMgPSBuZXcgTWFwPG51bWJlciwgTWFwPHN0cmluZywgUG90ZW50aWFsPj4oKTtcbiAgfVxuICBcbiAgcHVibGljIGdldEJiblBvdGVudGlhbChub2RlOiBCYm5Ob2RlKTogUG90ZW50aWFsIHtcbiAgICBsZXQgY2xpcXVlID0gbm9kZS5tZXRhZGF0YS5nZXQoJ3BhcmVudC5jbGlxdWUnKSBhcyBDbGlxdWU7XG4gICAgcmV0dXJuIFBvdGVudGlhbFV0aWwubm9ybWFsaXplKFBvdGVudGlhbFV0aWwubWFyZ2luYWxpemVGb3IodGhpcywgY2xpcXVlLCBbbm9kZV0pKTtcbiAgfVxuICBcbiAgcHVibGljIHVubWFya0NsaXF1ZXMoKSB7XG4gICAgdGhpcy5nZXRDbGlxdWVzKCkuZm9yRWFjaChjbGlxdWUgPT4gY2xpcXVlLnVubWFyaygpKTtcbiAgfVxuICBcbiAgcHVibGljIGdldEJibk5vZGVzKCk6IEJibk5vZGVbXSB7XG4gICAgbGV0IG5vZGVzID0gbmV3IE1hcDxudW1iZXIsIEJibk5vZGU+KCk7XG4gICAgXG4gICAgdGhpcy5nZXRDbGlxdWVzKCkuZm9yRWFjaChjbGlxdWUgPT4ge1xuICAgICAgY2xpcXVlLm5vZGVzLmZvckVhY2gobm9kZSA9PiBub2Rlcy5zZXQobm9kZS5pZCwgbm9kZSkpO1xuICAgIH0pO1xuICAgIFxuICAgIGxldCBiYm5Ob2RlczogQmJuTm9kZVtdID0gW107XG4gICAgbm9kZXMuZm9yRWFjaCgodiwgaykgPT4gYmJuTm9kZXMucHVzaCh2KSk7XG4gICAgcmV0dXJuIGJibk5vZGVzO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0QmJuTm9kZShpZDogbnVtYmVyKTogQmJuTm9kZSB7XG4gICAgbGV0IGJibk5vZGVzID0gdGhpcy5nZXRCYm5Ob2RlcygpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmJuTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpZCA9PT0gYmJuTm9kZXNbaV0uaWQpIHtcbiAgICAgICAgcmV0dXJuIGJibk5vZGVzW2ldO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IEJibk5vZGUobmV3IFZhcmlhYmxlKC0xLCAnX2R1bW15XycsIG5ldyBTZXQoKSkpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0QmJuTm9kZUJ5TmFtZShuYW1lOiBzdHJpbmcpOiBCYm5Ob2RlIHtcbiAgICByZXR1cm4gdGhpcy5nZXRCYm5Ob2RlcygpLmZpbHRlcihuID0+IG4udmFyaWFibGUubmFtZSA9PT0gbmFtZSlbMF07XG4gIH1cbiAgXG4gIHB1YmxpYyBmaW5kQ2xpcXVlc1dpdGhOb2RlQW5kUGFyZW50cyhpZDogbnVtYmVyKTogQ2xpcXVlW10ge1xuICAgIHJldHVybiB0aGlzLmdldENsaXF1ZXMoKVxuICAgICAgLmZpbHRlcihjbGlxdWUgPT4ge1xuICAgICAgICBpZiAoIShjbGlxdWUuY29udGFpbnMoaWQpKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGV0IGJibk5vZGUgPSB0aGlzLmdldEJibk5vZGUoaWQpO1xuICAgICAgICBpZiAoYmJuTm9kZS5tZXRhZGF0YS5oYXMoJ3BhcmVudHMnKSkge1xuICAgICAgICAgIGxldCBwYXJlbnRzOiBCTm9kZVtdID0gYmJuTm9kZS5tZXRhZGF0YS5nZXQoJ3BhcmVudHMnKSBhcyBCTm9kZVtdO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHBhcmVudCA9IHBhcmVudHNbaV07XG4gICAgICAgICAgICBpZiAoIShjbGlxdWUuY29udGFpbnMocGFyZW50LmlkKSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgfVxuICBcbiAgcHVibGljIGFkZFBvdGVudGlhbChjbGlxdWU6IENsaXF1ZSwgcG90ZW50aWFsOiBQb3RlbnRpYWwpOiBKb2luVHJlZSB7XG4gICAgdGhpcy5wb3RlbnRpYWxzLnNldChjbGlxdWUuaWQsIHBvdGVudGlhbCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRDbGlxdWVzKCk6IENsaXF1ZVtdIHtcbiAgICByZXR1cm4gdGhpcy5nZXROb2RlcygpXG4gICAgICAuZmlsdGVyKG4gPT4gIShuIGluc3RhbmNlb2YgU2VwU2V0KSlcbiAgICAgIC5tYXAobiA9PiBuIGFzIENsaXF1ZSk7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRTZXBTZXRzKCk6IFNlcFNldFtdIHtcbiAgICByZXR1cm4gdGhpcy5nZXROb2RlcygpXG4gICAgICAuZmlsdGVyKG4gPT4gKG4gaW5zdGFuY2VvZiBTZXBTZXQpKVxuICAgICAgLm1hcChuID0+IG4gYXMgU2VwU2V0KTtcbiAgfVxuICBcbiAgcHVibGljIGFkZEVkZ2UoZWRnZTogQkVkZ2UpOiBCR3JhcGgge1xuICAgIGlmICghKGVkZ2UgaW5zdGFuY2VvZiBKdEVkZ2UpKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgXG4gICAgbGV0IGp0RWRnZSA9IGVkZ2UgYXMgSnRFZGdlO1xuICAgIGxldCBzZXBTZXQgPSBqdEVkZ2Uuc2VwU2V0O1xuICAgIGxldCBsaHMgPSBqdEVkZ2UubGhzO1xuICAgIGxldCByaHMgPSBqdEVkZ2UucmhzO1xuICAgIFxuICAgIHRoaXMuYWRkTm9kZShzZXBTZXQpO1xuICAgIHRoaXMuYWRkTm9kZShsaHMpO1xuICAgIHRoaXMuYWRkTm9kZShyaHMpO1xuICAgIFxuICAgIGlmICh0aGlzLnNob3VsZEFkZChlZGdlKSkge1xuICAgICAgdGhpcy5lZGdlcy5nZXQobGhzLmlkKS5hZGQoc2VwU2V0LmlkKTtcbiAgICAgIHRoaXMuZWRnZXMuZ2V0KHNlcFNldC5pZCkuYWRkKGxocy5pZCk7XG4gICAgICBcbiAgICAgIHRoaXMuZWRnZXMuZ2V0KHJocy5pZCkuYWRkKHNlcFNldC5pZCk7XG4gICAgICB0aGlzLmVkZ2VzLmdldChzZXBTZXQuaWQpLmFkZChyaHMuaWQpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgcHVibGljIHNldExpc3RlbmVyKGxpc3RlbmVyOiBKb2luVHJlZUxpc3RlbmVyKSB7XG4gICAgdGhpcy5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0RXZpZGVuY2Uobm9kZTogQmJuTm9kZSwgdmFsdWU6IHN0cmluZyk6IFBvdGVudGlhbCB7XG4gICAgaWYgKCF0aGlzLmV2aWRlbmNlcy5oYXMobm9kZS5pZCkpIHtcbiAgICAgIHRoaXMuZXZpZGVuY2VzLnNldChub2RlLmlkLCBuZXcgTWFwPHN0cmluZywgUG90ZW50aWFsPigpKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCF0aGlzLmV2aWRlbmNlcy5nZXQobm9kZS5pZCkuaGFzKHZhbHVlKSkge1xuICAgICAgbGV0IHBvdGVudGlhbEVudHJ5ID0gbmV3IFBvdGVudGlhbEVudHJ5KCk7XG4gICAgICBwb3RlbnRpYWxFbnRyeS5hZGQobm9kZS5pZCwgdmFsdWUpO1xuICAgICAgcG90ZW50aWFsRW50cnkudmFsdWUgPSAxLjA7XG4gICAgICBcbiAgICAgIGxldCBwb3RlbnRpYWwgPSBuZXcgUG90ZW50aWFsKCk7XG4gICAgICBwb3RlbnRpYWwuYWRkRW50cnkocG90ZW50aWFsRW50cnkpO1xuICAgICAgXG4gICAgICB0aGlzLmV2aWRlbmNlcy5nZXQobm9kZS5pZCkuc2V0KHZhbHVlLCBwb3RlbnRpYWwpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdGhpcy5ldmlkZW5jZXMuZ2V0KG5vZGUuaWQpLmdldCh2YWx1ZSk7XG4gIH1cbiAgXG4gIHB1YmxpYyB1bm9ic2VydmUobm9kZXM6IEJibk5vZGVbXSk6IEpvaW5UcmVlIHtcbiAgICBsZXQgZXZpZGVuY2VzID0gbm9kZXMubWFwKG4gPT4gdGhpcy5nZXRVbm9ic2VydmVkRXZpZGVuY2UobikpO1xuICAgIHRoaXMudXBkYXRlRXZpZGVuY2VzKGV2aWRlbmNlcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHB1YmxpYyB1bm9ic2VydmVBbGwoKTogSm9pblRyZWUge1xuICAgIHRoaXMudW5vYnNlcnZlKHRoaXMuZ2V0QmJuTm9kZXMoKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHB1YmxpYyB1cGRhdGVFdmlkZW5jZXMoZXZpZGVuY2VzOiBFdmlkZW5jZVtdKTogSm9pblRyZWUge1xuICAgIGV2aWRlbmNlcy5mb3JFYWNoKGUgPT4gZS52YWxpZGF0ZSgpKTtcbiAgICBsZXQgY2hhbmdlID0gdGhpcy5nZXRDaGFuZ2VUeXBlKGV2aWRlbmNlcyk7XG4gICAgZXZpZGVuY2VzLmZvckVhY2goZXZpZGVuY2UgPT4ge1xuICAgICAgbGV0IG5vZGUgPSBldmlkZW5jZS5ub2RlO1xuICAgICAgbGV0IHBvdGVudGlhbHMgPSB0aGlzLmV2aWRlbmNlcy5nZXQobm9kZS5pZCk7XG4gICAgICBcbiAgICAgIGV2aWRlbmNlLnZhbHVlcy5mb3JFYWNoKCh2LCBrKSA9PiB7XG4gICAgICAgIGxldCBwb3RlbnRpYWwgPSBwb3RlbnRpYWxzLmdldChrKTtcbiAgICAgICAgcG90ZW50aWFsLmVudHJpZXNbMF0udmFsdWUgPSB2O1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5ub3RpZnlMaXN0ZW5lcihjaGFuZ2UpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBwdWJsaWMgc2V0T2JzZXJ2YXRpb24oZXZpZGVuY2U6IEV2aWRlbmNlKTogSm9pblRyZWUge1xuICAgIC8vIG9ubHkgZGVhbCB3aXRoIG9ic2VydmF0aW9uIHR5cGVzIGluIHRoaXMgbWV0aG9kXG4gICAgaWYgKEV2aWRlbmNlVHlwZS5PQlNFUlZBVElPTiAhPT0gZXZpZGVuY2UudHlwZSkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ2V2aWRlbmNlIG5vdCBvYnNlcnZhdGlvbiB0eXBlIHJldHVybmluZycpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIFxuICAgIC8vIGNoZWNrIHRvIHNlZSBpZiBwcmV2aW91cyBldmlkZW5jZSB3YXMgYWxzbyBvYnNlcnZhdGlvblxuICAgIC8vIGV2aWRlbmNlIHRoYXQgaXMgb2JzZXJ2YXRpb24gdHlwZSBhbHdheXMgaGFzIG9ubHkgb25lIHZhbHVlIHRoYXQgaXMgMVxuICAgIGxldCBwb3RlbnRpYWxzID0gdGhpcy5ldmlkZW5jZXMuZ2V0KGV2aWRlbmNlLm5vZGUuaWQpO1xuICAgIGxldCBwdmFsdWVzID0gQXJyYXkuZnJvbShwb3RlbnRpYWxzLmtleXMoKSlcbiAgICAgIC5maWx0ZXIodiA9PiB7XG4gICAgICAgIGxldCBwb3RlbnRpYWwgPSBwb3RlbnRpYWxzLmdldCh2KTtcbiAgICAgICAgbGV0IGVudHJ5ID0gcG90ZW50aWFsLmVudHJpZXNbMF07XG4gICAgICAgIGxldCBwID0gZW50cnkudmFsdWU7XG4gICAgICAgIGlmIChwID09PSAxLjApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcbiAgICBsZXQgY3ZhbHVlcyA9IEFycmF5LmZyb20oZXZpZGVuY2UudmFsdWVzLmtleXMoKSlcbiAgICAgIC5maWx0ZXIodiA9PiAxLjAgPT09IGV2aWRlbmNlLnZhbHVlcy5nZXQodikpO1xuICAgIFxuICAgIGlmICgxID09PSBwdmFsdWVzLmxlbmd0aCkge1xuICAgICAgLy8gcHJldmlvdXMgZXZpZGVuY2Ugd2FzIG9mIHR5cGUgb2JzZXJ2YXRpb25cbiAgICAgIC8vIGJvdGggY3VycmVudCBhbmQgcHJldmlvdXMgZXZpZGVuY2VzIGFyZSBvYnNlcnZhdGlvbiB0eXBlXG4gICAgICAvLyBjb25zb2xlLmxvZygnYm90aCBwcmV2aW91cyBhbmQgY3VycmVudCBldmlkZW5jZXMgYXJlIG9mIHR5cGUgb2JzZXJ2YXRpb24nKTtcbiAgICAgIFxuICAgICAgbGV0IGxhc3RWYWx1ZSA9IHB2YWx1ZXNbMF07XG4gICAgICBsZXQgY3VyclZhbHVlID0gY3ZhbHVlc1swXTtcbiAgICAgIGlmIChsYXN0VmFsdWUgPT09IGN1cnJWYWx1ZSkge1xuICAgICAgICAvLyBpZiB0aGUgbGFzdCB2YWx1ZSBpcyBlcXVhbCB0byB0aGUgY3VycmVudCB2YWx1ZSwgdW5vYnNlcnZlIGl0XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGxhc3RWYWx1ZSArICcgZXF1YWxzICcgKyBjdXJyVmFsdWUgKyAnIHNvIHdpbGwgdW5vYnNlcnZlJyk7XG4gICAgICAgIHRoaXMudW5vYnNlcnZlKFtldmlkZW5jZS5ub2RlXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhsYXN0VmFsdWUgKyAnIE5PVCBlcXVhbHMgJyArIGN1cnJWYWx1ZSArICcgc28gd2lsbCB1cGRhdGUgZXZpZGVuY2UnKTtcbiAgICAgICAgdGhpcy51cGRhdGVFdmlkZW5jZXMoW2V2aWRlbmNlXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdudW1iZXIgcHJldmlvdXMgdmFsdWVzID09PSAxIHdhcyAnICsgcHZhbHVlcy5sZW5ndGggKyAnIHNvIHdpbGwgdXBkYXRlIGV2aWRlbmNlJyk7XG4gICAgICB0aGlzLnVwZGF0ZUV2aWRlbmNlcyhbZXZpZGVuY2VdKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHByb3RlY3RlZCBzaG91bGRBZGQoZWRnZTogQkVkZ2UpOiBib29sZWFuIHtcbiAgICBsZXQganRFZGdlID0gZWRnZSBhcyBKdEVkZ2U7XG4gICAgbGV0IHNlcFNldCA9IGp0RWRnZS5zZXBTZXQ7XG4gICAgbGV0IGxocyA9IGp0RWRnZS5saHMgYXMgQ2xpcXVlO1xuICAgIGxldCByaHMgPSBqdEVkZ2UucmhzIGFzIENsaXF1ZTtcbiAgICBcbiAgICBpZiAobGhzLmlkID09PSByaHMuaWQpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdmYWxzZTogJyArIGp0RWRnZS50b1N0cmluZygpKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCEobmV3IEpvaW5UcmVlUGF0aERldGVjdG9yKHRoaXMsIGxocy5pZCwgcmhzLmlkKSkuZXhpc3RzKCkpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCd0cnVlOiAnICsgIGp0RWRnZS50b1N0cmluZygpKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBjb25zb2xlLmxvZygnZmFsc2U6ICcgKyBqdEVkZ2UudG9TdHJpbmcoKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICBwcml2YXRlIGdldENoYW5nZVR5cGUoZXZpZGVuY2VzOiBFdmlkZW5jZVtdKTogQ2hhbmdlVHlwZSB7XG4gICAgbGV0IGNoYW5nZXMgPSBldmlkZW5jZXMubWFwKGV2aWRlbmNlID0+IHtcbiAgICAgIGxldCBub2RlID0gZXZpZGVuY2Uubm9kZTtcbiAgICAgIGxldCBwb3RlbnRpYWxzID0gdGhpcy5ldmlkZW5jZXMuZ2V0KG5vZGUuaWQpO1xuICAgICAgbGV0IGNoYW5nZSA9IGV2aWRlbmNlLmNvbXBhcmUocG90ZW50aWFscyk7XG4gICAgICByZXR1cm4gY2hhbmdlO1xuICAgIH0pO1xuICAgIGxldCBjb3VudCA9IGNoYW5nZXMuZmlsdGVyKGMgPT4gQ2hhbmdlVHlwZS5SRVRSQUNUSU9OID09PSBjKS5sZW5ndGg7XG4gICAgaWYgKGNvdW50ID4gMCkge1xuICAgICAgcmV0dXJuIENoYW5nZVR5cGUuUkVUUkFDVElPTjtcbiAgICB9XG4gICAgXG4gICAgY291bnQgPSBjaGFuZ2VzLmZpbHRlcihjID0+IENoYW5nZVR5cGUuVVBEQVRFID09PSBjKS5sZW5ndGg7XG4gICAgaWYgKGNvdW50ID4gMCkge1xuICAgICAgcmV0dXJuIENoYW5nZVR5cGUuVVBEQVRFO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gQ2hhbmdlVHlwZS5OT05FO1xuICB9XG4gIFxuICBwcml2YXRlIGdldFVub2JzZXJ2ZWRFdmlkZW5jZShub2RlOiBCYm5Ob2RlKTogRXZpZGVuY2Uge1xuICAgIGxldCBldmlkZW5jZSA9IG5ldyBFdmlkZW5jZShub2RlLCBFdmlkZW5jZVR5cGUuVU5PQlNFUlZFKTtcbiAgICBub2RlLnZhcmlhYmxlLnZhbHVlcy5mb3JFYWNoKHYgPT4gZXZpZGVuY2UuYWRkVmFsdWUodiwgMS4wKSk7XG4gICAgcmV0dXJuIGV2aWRlbmNlO1xuICB9XG4gIFxuICBwcml2YXRlIG5vdGlmeUxpc3RlbmVyKGNoYW5nZTogQ2hhbmdlVHlwZSkge1xuICAgIGlmICh0aGlzLmxpc3RlbmVyKSB7XG4gICAgICBpZiAoQ2hhbmdlVHlwZS5SRVRSQUNUSU9OID09PSBjaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lci5ldmlkZW5jZVJldHJhY3RlZCh0aGlzKTtcbiAgICAgIH0gZWxzZSBpZiAoQ2hhbmdlVHlwZS5VUERBVEUgPT09IGNoYW5nZSkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyLmV2aWRlbmNlVXBkYXRlZCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgSm9pblRyZWVQYXRoRGV0ZWN0b3Ige1xuICBzZWVuOiBTZXQ8bnVtYmVyPjtcbiAgZ3JhcGg6IEpvaW5UcmVlO1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG4gIFxuICBjb25zdHJ1Y3RvcihncmFwaDogSm9pblRyZWUsIHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlcikge1xuICAgIHRoaXMuc2VlbiA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgIHRoaXMuZ3JhcGggPSBncmFwaDtcbiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gICAgdGhpcy5zdG9wID0gc3RvcDtcbiAgfVxuICBcbiAgcHVibGljIGV4aXN0cygpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5zdGFydCA9PT0gdGhpcy5zdG9wKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmluZCh0aGlzLnN0YXJ0KTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBmaW5kKGlkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBsZXQgbmVpZ2hib3JzID0gdGhpcy5ncmFwaC5nZXROZWlnaGJvcnMoaWQpO1xuICAgIGlmIChuZWlnaGJvcnMuaGFzKHRoaXMuc3RvcCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlZW4uYWRkKGlkKTtcbiAgICAgIGZvciAobGV0IG5laWdoYm9yIG9mIG5laWdoYm9ycykge1xuICAgICAgICBpZiAoIXRoaXMuc2Vlbi5oYXMobmVpZ2hib3IpKSB7XG4gICAgICAgICAgaWYgKHRoaXMuZmluZChuZWlnaGJvcikpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBKb2luVHJlZUxpc3RlbmVyIHtcbiAgZXZpZGVuY2VSZXRyYWN0ZWQoam9pbnRyZWU6IEpvaW5UcmVlKTogdm9pZDtcbiAgXG4gIGV2aWRlbmNlVXBkYXRlZChqb2ludHJlZTogSm9pblRyZWUpOiB2b2lkO1xufVxuXG5leHBvcnQgZW51bSBFdmlkZW5jZVR5cGUge1xuICBWSVJUVUFMID0gMSwgRklORElORywgT0JTRVJWQVRJT04sIFVOT0JTRVJWRVxufVxuXG5leHBvcnQgZW51bSBDaGFuZ2VUeXBlIHtcbiAgTk9ORSA9IDEsIFVQREFURSwgUkVUUkFDVElPTlxufVxuXG5leHBvcnQgY2xhc3MgRXZpZGVuY2VCdWlsZGVyIHtcbiAgdmFsdWVzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgbm9kZTogQmJuTm9kZTtcbiAgdHlwZSA9IEV2aWRlbmNlVHlwZS5PQlNFUlZBVElPTjtcbiAgXG4gIHB1YmxpYyB3aXRoTm9kZShub2RlOiBCYm5Ob2RlKTogRXZpZGVuY2VCdWlsZGVyIHtcbiAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBwdWJsaWMgd2l0aFR5cGUodHlwZTogRXZpZGVuY2VUeXBlKTogRXZpZGVuY2VCdWlsZGVyIHtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBwdWJsaWMgd2l0aEV2aWRlbmNlKHZhbDogc3RyaW5nLCBsaWtlbGlob29kOiBudW1iZXIpOiBFdmlkZW5jZUJ1aWxkZXIge1xuICAgIHRoaXMudmFsdWVzLnNldCh2YWwsIGxpa2VsaWhvb2QpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBwdWJsaWMgYnVpbGQoKTogRXZpZGVuY2Uge1xuICAgIGxldCBldmlkZW5jZSA9IG5ldyBFdmlkZW5jZSh0aGlzLm5vZGUsIHRoaXMudHlwZSk7XG4gICAgdGhpcy52YWx1ZXMuZm9yRWFjaCgodiwgaykgPT4gZXZpZGVuY2UudmFsdWVzLnNldChrLCB2KSk7XG4gICAgcmV0dXJuIGV2aWRlbmNlO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBFdmlkZW5jZSB7XG4gIHZhbHVlczogTWFwPHN0cmluZywgbnVtYmVyPjtcbiAgXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBub2RlOiBCYm5Ob2RlLCBwdWJsaWMgdHlwZTogRXZpZGVuY2VUeXBlKSB7XG4gICAgdGhpcy52YWx1ZXMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICB9XG4gIFxuICBwdWJsaWMgYWRkVmFsdWUodmFsdWU6IHN0cmluZywgbGlrZWxpaG9vZDogbnVtYmVyKTogRXZpZGVuY2Uge1xuICAgIHRoaXMudmFsdWVzLnNldCh2YWx1ZSwgbGlrZWxpaG9vZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHB1YmxpYyBjb21wYXJlKHBvdGVudGlhbHM6IE1hcDxzdHJpbmcsIFBvdGVudGlhbD4pOiBDaGFuZ2VUeXBlIHtcbiAgICBsZXQgdGhhdCA9IHRoaXMuY29udmVydChwb3RlbnRpYWxzKTtcbiAgICBcbiAgICBsZXQgdW5vYnNlcnZlVGhhdCA9IHRoaXMuaXNVbm9ic2VydmVkKHRoYXQpO1xuICAgIGxldCB1bm9ic2VydmVUaGlzID0gdGhpcy5pc1Vub2JzZXJ2ZWQodGhpcy52YWx1ZXMpO1xuICAgIFxuICAgIGlmICh1bm9ic2VydmVUaGF0ICYmIHVub2JzZXJ2ZVRoaXMpIHtcbiAgICAgIHJldHVybiBDaGFuZ2VUeXBlLk5PTkU7XG4gICAgfVxuICAgIFxuICAgIGxldCBvYnNlcnZlVGhhdCA9IHRoaXMuaXNPYnNlcnZlZCh0aGF0KTtcbiAgICBsZXQgb2JzZXJ2ZVRoaXMgPSB0aGlzLmlzT2JzZXJ2ZWQodGhpcy52YWx1ZXMpO1xuICAgIFxuICAgIGlmIChvYnNlcnZlVGhhdCAmJiBvYnNlcnZlVGhpcykge1xuICAgICAgbGV0IHMxID0gdGhpcy5nZXRPYnNlcnZlZFZhbHVlKHRoYXQpO1xuICAgICAgbGV0IHMyID0gdGhpcy5nZXRPYnNlcnZlZFZhbHVlKHRoaXMudmFsdWVzKTtcbiAgICAgIFxuICAgICAgaWYgKHMxID09PSBzMikge1xuICAgICAgICByZXR1cm4gQ2hhbmdlVHlwZS5OT05FO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIENoYW5nZVR5cGUuUkVUUkFDVElPTjtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIENoYW5nZVR5cGUuUkVUUkFDVElPTjtcbiAgfVxuICBcbiAgcHVibGljIHZhbGlkYXRlKCkge1xuICAgIHRoaXMubm9kZS52YXJpYWJsZS52YWx1ZXMuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICBpZiAoIXRoaXMudmFsdWVzLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy52YWx1ZXMuc2V0KHZhbHVlLCAwLjApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGlmIChFdmlkZW5jZVR5cGUuVklSVFVBTCA9PT0gdGhpcy50eXBlKSB7XG4gICAgICBsZXQgc3VtID0gdGhpcy5ub2RlLnZhcmlhYmxlLnZhbHVlc1xuICAgICAgICAubWFwKHZhbHVlID0+IHRoaXMudmFsdWVzLmdldCh2YWx1ZSkpXG4gICAgICAgIC5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiKTtcbiAgICAgIHRoaXMubm9kZS52YXJpYWJsZS52YWx1ZXMuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgIGxldCBkID0gdGhpcy52YWx1ZXMuZ2V0KHZhbHVlKSAvIHN1bTtcbiAgICAgICAgdGhpcy52YWx1ZXMuc2V0KHZhbHVlLCBkKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoRXZpZGVuY2VUeXBlLkZJTkRJTkcgPT09IHRoaXMudHlwZSkge1xuICAgICAgdGhpcy5ub2RlLnZhcmlhYmxlLnZhbHVlcy5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgICAgbGV0IGQgPSB0aGlzLnZhbHVlcy5nZXQodmFsdWUpID4gMC4wID8gMS4wIDogMC4wO1xuICAgICAgICB0aGlzLnZhbHVlcy5zZXQodmFsdWUsIGQpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGxldCBjb3VudCA9IHRoaXMubm9kZS52YXJpYWJsZS52YWx1ZXNcbiAgICAgICAgLm1hcCh2YWx1ZSA9PiB0aGlzLnZhbHVlcy5nZXQodmFsdWUpKVxuICAgICAgICAucmVkdWNlKChhLCBiKSA9PiBhICsgYik7XG4gICAgICBcbiAgICAgIGlmICgwID09PSBjb3VudCkge1xuICAgICAgICB0aGlzLm5vZGUudmFyaWFibGUudmFsdWVzLmZvckVhY2godmFsdWUgPT4gdGhpcy52YWx1ZXMuc2V0KHZhbHVlLCAxLjApKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKEV2aWRlbmNlVHlwZS5PQlNFUlZBVElPTiA9PT0gdGhpcy50eXBlKSB7XG4gICAgICBsZXQga2V5cyA9IEFycmF5LmZyb20odGhpcy52YWx1ZXMua2V5cygpKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gLTEgKiBDb21wYXJlVXRpbC5pbnRDb21wYXJlKHRoaXMudmFsdWVzLmdldChhKSwgdGhpcy52YWx1ZXMuZ2V0KGIpKSk7XG4gICAgICBsZXQga2V5ID0ga2V5c1swXTtcbiAgICAgIFxuICAgICAgdGhpcy5ub2RlLnZhcmlhYmxlLnZhbHVlcy5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgICAgaWYgKGtleSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICB0aGlzLnZhbHVlcy5zZXQodmFsdWUsIDEuMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy52YWx1ZXMuc2V0KHZhbHVlLCAwLjApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKEV2aWRlbmNlVHlwZS5VTk9CU0VSVkUgPT09IHRoaXMudHlwZSkge1xuICAgICAgdGhpcy5ub2RlLnZhcmlhYmxlLnZhbHVlcy5mb3JFYWNoKHZhbHVlID0+IHRoaXMudmFsdWVzLnNldCh2YWx1ZSwgMS4wKSk7XG4gICAgfVxuICB9XG4gIFxuICBwcml2YXRlIGNvbnZlcnQobWFwOiBNYXA8c3RyaW5nLCBQb3RlbnRpYWw+KTogTWFwPHN0cmluZywgbnVtYmVyPiB7XG4gICAgbGV0IG0gPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICAgIG1hcC5mb3JFYWNoKCh2LCBrKSA9PiB7XG4gICAgICBsZXQgbGlrZWxpaG9vZCA9IHYuZW50cmllc1swXS52YWx1ZTtcbiAgICAgIG0uc2V0KGssIGxpa2VsaWhvb2QpO1xuICAgIH0pO1xuICAgIHJldHVybiBtO1xuICB9XG4gIFxuICBwcml2YXRlIGlzVW5vYnNlcnZlZCh2YWx1ZXM6IE1hcDxzdHJpbmcsIG51bWJlcj4pOiBib29sZWFuIHtcbiAgICBsZXQgY291bnRzID0gMDtcbiAgICB2YWx1ZXMuZm9yRWFjaCgodiwgaykgPT4gY291bnRzICs9IHYpO1xuICAgIHJldHVybiAoY291bnRzID09PSB2YWx1ZXMuc2l6ZSk7XG4gIH1cbiAgXG4gIHByaXZhdGUgaXNPYnNlcnZlZCh2YWx1ZXM6IE1hcDxzdHJpbmcsIG51bWJlcj4pOiBib29sZWFuIHtcbiAgICBsZXQgY291bnRPbmUgPSAwO1xuICAgIGxldCBjb3VudFplcm8gPSAwO1xuICAgIHZhbHVlcy5mb3JFYWNoKCh2LCBrKSA9PiB7XG4gICAgICBpZiAoMS4wID09PSB2KSB7XG4gICAgICAgIGNvdW50T25lKys7XG4gICAgICB9IGVsc2UgaWYgKDAuMCA9PT0gdikge1xuICAgICAgICBjb3VudFplcm8rKztcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gKDEgPT09IGNvdW50T25lICYmIHZhbHVlcy5zaXplIC0gMSA9PT0gY291bnRaZXJvKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBnZXRPYnNlcnZlZFZhbHVlKHZhbHVlczogTWFwPHN0cmluZywgbnVtYmVyPik6IHN0cmluZyB7XG4gICAgbGV0IHN0cnMgPSBBcnJheS5mcm9tKHZhbHVlcy5rZXlzKCkpXG4gICAgICAuZmlsdGVyKGsgPT4gKDEuMCA9PT0gdmFsdWVzLmdldChrKSkpO1xuICAgIHJldHVybiBzdHJzWzBdO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQb3RlbnRpYWwge1xuICBwdWJsaWMgZW50cmllczogUG90ZW50aWFsRW50cnlbXTtcbiAgXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZW50cmllcyA9IFtdO1xuICB9XG4gIFxuICBwdWJsaWMgYWRkRW50cnkoZW50cnk6IFBvdGVudGlhbEVudHJ5KSB7XG4gICAgdGhpcy5lbnRyaWVzLnB1c2goZW50cnkpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0TWF0Y2hpbmdFbnRyaWVzKGVudHJ5OiBQb3RlbnRpYWxFbnRyeSk6IFBvdGVudGlhbEVudHJ5W10ge1xuICAgIHJldHVybiB0aGlzLmVudHJpZXMuZmlsdGVyKGUgPT4gZS5tYXRjaGVzKGVudHJ5KSk7XG4gIH1cbiAgXG4gIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIGxldCBzID0gJyc7XG4gICAgdGhpcy5lbnRyaWVzLmZvckVhY2goZW50cnkgPT4gcyArPSBlbnRyeS50b1N0cmluZygpICsgJ1xcbicpO1xuICAgIHJldHVybiBzLnN1YnN0cigwLCBzLmxlbmd0aCAtIDEpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQb3RlbnRpYWxFbnRyeSB7XG4gIHB1YmxpYyBlbnRyaWVzOiBNYXA8bnVtYmVyLCBzdHJpbmc+O1xuICBwdWJsaWMgdmFsdWU6IG51bWJlcjtcbiAgXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZW50cmllcyA9IG5ldyBNYXA8bnVtYmVyLCBzdHJpbmc+KCk7XG4gICAgdGhpcy52YWx1ZSA9IDEuMDtcbiAgfVxuICBcbiAgcHVibGljIGFkZChpZDogbnVtYmVyLCB2YWx1ZTogc3RyaW5nKTogUG90ZW50aWFsRW50cnkge1xuICAgIGlmICghdGhpcy5lbnRyaWVzLmhhcyhpZCkpIHtcbiAgICAgIHRoaXMuZW50cmllcy5zZXQoaWQsIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHB1YmxpYyBtYXRjaGVzKHRoYXQ6IFBvdGVudGlhbEVudHJ5KTogYm9vbGVhbiB7XG4gICAgZm9yIChsZXQga2V5IG9mIHRoYXQuZW50cmllcy5rZXlzKCkpIHtcbiAgICAgIGlmICghdGhpcy5lbnRyaWVzLmhhcyhrZXkpIHx8ICEodGhpcy5lbnRyaWVzLmdldChrZXkpID09PSB0aGF0LmVudHJpZXMuZ2V0KGtleSkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgXG4gIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIGxldCBzID0gJyc7XG4gICAgdGhpcy5lbnRyaWVzLmZvckVhY2goKHYsIGspID0+IHtcbiAgICAgIHMgKz0gayArICc9JyArIHYgKyAnLCc7XG4gICAgfSk7XG4gICAgcyArPSB0aGlzLnZhbHVlO1xuICAgIHJldHVybiBzO1xuICB9XG4gIFxuICBwdWJsaWMgZHVwbGljYXRlKCk6IFBvdGVudGlhbEVudHJ5IHtcbiAgICBsZXQgZW50cnkgPSBuZXcgUG90ZW50aWFsRW50cnkoKTtcbiAgICB0aGlzLmVudHJpZXMuZm9yRWFjaCgodiwgaykgPT4gZW50cnkuYWRkKGssIHYpKTtcbiAgICBlbnRyeS52YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgcmV0dXJuIGVudHJ5O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBJZFV0aWwge1xuICBzdGF0aWMgaGFzaE9mU3RyKHM6IHN0cmluZyk6IG51bWJlciB7XG4gICAgbGV0IGhhc2ggPSAwO1xuICAgIGlmIChzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGhhc2g7XG4gICAgfVxuICAgIFxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBsZXQgY2hyID0gcy5jaGFyQ29kZUF0KGkpO1xuICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hyO1xuICAgICAgaGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcbiAgICB9XG4gICAgcmV0dXJuIGhhc2g7XG4gIH1cbiAgXG4gIHN0YXRpYyBoYXNoT2ZBcnIoYXJyOiBzdHJpbmdbXSk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaGFzaE9mU3RyKGFyci5zb3J0KCkuam9pbignLScpKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUG90ZW50aWFsVXRpbCB7XG4gIHB1YmxpYyBzdGF0aWMgcGFzc1NpbmdsZU1lc3NhZ2Uoam9pbnRyZWU6IEpvaW5UcmVlLCB4OiBDbGlxdWUsIHM6IFNlcFNldCwgeTogQ2xpcXVlKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ3Bhc3NpbmcgbWVzc2FnZSAnICsgeC50b1N0cmluZygpICsgJyAtLSAnICsgcy50b1N0cmluZygpICsgJyAtLSAnICsgeS50b1N0cmluZygpKTtcbiAgICBsZXQgb2xkU2VwU2V0UG90ZW50aWFsID0gam9pbnRyZWUucG90ZW50aWFscy5nZXQocy5pZCk7XG4gICAgbGV0IHlQb3RlbnRpYWwgPSBqb2ludHJlZS5wb3RlbnRpYWxzLmdldCh5LmlkKTtcbiAgICBcbiAgICBsZXQgbmV3U2VwU2V0UG90ZW50aWFsID0gdGhpcy5tYXJnaW5hbGl6ZUZvcihqb2ludHJlZSwgeCwgcy5ub2Rlcyk7XG4gICAgam9pbnRyZWUuYWRkUG90ZW50aWFsKHMsIG5ld1NlcFNldFBvdGVudGlhbCk7XG4gICAgXG4gICAgdGhpcy5tdWx0aXBseSh5UG90ZW50aWFsLCB0aGlzLmRpdmlkZShuZXdTZXBTZXRQb3RlbnRpYWwsIG9sZFNlcFNldFBvdGVudGlhbCkpO1xuICB9XG4gIFxuICBwdWJsaWMgc3RhdGljIG1hcmdpbmFsaXplRm9yKGpvaW5UcmVlOiBKb2luVHJlZSwgY2xpcXVlOiBDbGlxdWUsIG5vZGVzOiBCYm5Ob2RlW10pOiBQb3RlbnRpYWwge1xuICAgIGxldCBwb3RlbnRpYWwgPSB0aGlzLmdldFBvdGVudGlhbEZyb21Ob2Rlcyhub2Rlcyk7XG4gICAgbGV0IGNsaXF1ZVBvdGVudGlhbCA9IGpvaW5UcmVlLnBvdGVudGlhbHMuZ2V0KGNsaXF1ZS5pZCk7XG4gICAgXG4gICAgcG90ZW50aWFsLmVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICBsZXQgbWF0Y2hlZEVudHJpZXMgPSBjbGlxdWVQb3RlbnRpYWwuZ2V0TWF0Y2hpbmdFbnRyaWVzKGVudHJ5KTtcbiAgICAgIGxldCB0ID0gMC4wO1xuICAgICAgbWF0Y2hlZEVudHJpZXMuZm9yRWFjaChtYXRjaGVkRW50cnkgPT4gdCArPSBtYXRjaGVkRW50cnkudmFsdWUpO1xuICAgICAgZW50cnkudmFsdWUgPSB0O1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBwb3RlbnRpYWw7XG4gIH1cbiAgXG4gIHB1YmxpYyBzdGF0aWMgbm9ybWFsaXplKHBvdGVudGlhbDogUG90ZW50aWFsKTogUG90ZW50aWFsIHtcbiAgICBsZXQgc3VtID0gMC4wO1xuICAgIHBvdGVudGlhbC5lbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgc3VtICs9IGVudHJ5LnZhbHVlO1xuICAgIH0pO1xuICAgIFxuICAgIHBvdGVudGlhbC5lbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgbGV0IGQgPSBlbnRyeS52YWx1ZSAvIHN1bTtcbiAgICAgIGVudHJ5LnZhbHVlID0gZDtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gcG90ZW50aWFsO1xuICB9XG4gIFxuICBwdWJsaWMgc3RhdGljIGRpdmlkZShudW1lcmF0b3I6IFBvdGVudGlhbCwgZGVub21pbmF0b3I6IFBvdGVudGlhbCk6IFBvdGVudGlhbCB7XG4gICAgbGV0IHBvdGVudGlhbCA9IG5ldyBQb3RlbnRpYWwoKTtcbiAgICBudW1lcmF0b3IuZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgIGxldCBlbnRyaWVzID0gZGVub21pbmF0b3IuZW50cmllcztcbiAgICAgIGlmIChlbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbGV0IGUgPSBlbnRyaWVzWzBdO1xuICAgICAgICBsZXQgZCA9ICh0aGlzLmlzWmVybyhlbnRyeS52YWx1ZSkgfHwgdGhpcy5pc1plcm8oZS52YWx1ZSkpID8gMC4wIDogZW50cnkudmFsdWUgLyBlLnZhbHVlO1xuICAgICAgICBsZXQgbmV3RW50cnkgPSBlbnRyeS5kdXBsaWNhdGUoKTtcbiAgICAgICAgbmV3RW50cnkudmFsdWUgPSBkO1xuICAgICAgICBwb3RlbnRpYWwuYWRkRW50cnkobmV3RW50cnkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBwb3RlbnRpYWw7XG4gIH1cbiAgXG4gIHB1YmxpYyBzdGF0aWMgbXVsdGlwbHkoYmlnZ2VyOiBQb3RlbnRpYWwsIHNtYWxsZXI6IFBvdGVudGlhbCkge1xuICAgIHNtYWxsZXIuZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgIGxldCBlbnRyaWVzID0gYmlnZ2VyLmdldE1hdGNoaW5nRW50cmllcyhlbnRyeSk7XG4gICAgICBlbnRyaWVzLmZvckVhY2goZSA9PiB7XG4gICAgICAgIGxldCBkID0gZS52YWx1ZSAqIGVudHJ5LnZhbHVlO1xuICAgICAgICBlLnZhbHVlID0gZDtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIFxuICBwdWJsaWMgc3RhdGljIGdldFBvdGVudGlhbChub2RlOiBCYm5Ob2RlLCBwYXJlbnRzOiBCYm5Ob2RlW10pIHtcbiAgICBsZXQgcG90ZW50aWFsID0gdGhpcy5nZXRQb3RlbnRpYWxGcm9tTm9kZXModGhpcy5tZXJnZShub2RlLCBwYXJlbnRzKSk7XG4gICAgbGV0IHRvdGFsID0gcG90ZW50aWFsLmVudHJpZXMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWw7IGkrKykge1xuICAgICAgbGV0IHByb2IgPSBub2RlLnByb2JzW2ldO1xuICAgICAgcG90ZW50aWFsLmVudHJpZXNbaV0udmFsdWUgPSBwcm9iO1xuICAgIH1cbiAgICByZXR1cm4gcG90ZW50aWFsO1xuICB9XG4gIFxuICBwdWJsaWMgc3RhdGljIGdldFBvdGVudGlhbEZyb21Ob2Rlcyhub2RlczogQmJuTm9kZVtdKTogUG90ZW50aWFsIHtcbiAgICBsZXQgdmFsdWVMaXN0cyA9IG5vZGVzLm1hcChuID0+IG4udmFyaWFibGUudmFsdWVzKTtcbiAgICBsZXQgY2FydGVzaWFuID0gdGhpcy5nZXRDYXJ0ZXNpYW5Qcm9kdWN0KHZhbHVlTGlzdHMpO1xuICAgIGxldCBwb3RlbnRpYWwgPSBuZXcgUG90ZW50aWFsKCk7XG4gICAgY2FydGVzaWFuLmZvckVhY2godmFsdWVzID0+IHtcbiAgICAgIGxldCBlbnRyeSA9IG5ldyBQb3RlbnRpYWxFbnRyeSgpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgdmFsdWUgPSB2YWx1ZXNbaV07XG4gICAgICAgIGxldCBpZCA9IG5vZGVzW2ldLmlkO1xuICAgICAgICBlbnRyeS5hZGQoaWQsIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHBvdGVudGlhbC5hZGRFbnRyeShlbnRyeSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHBvdGVudGlhbDtcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgaXNaZXJvKGQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoMCA9PT0gZCk7XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGdldENhcnRlc2lhblByb2R1Y3QobGlzdHM6IHN0cmluZ1tdW10pOiBzdHJpbmdbXVtdIHtcbiAgICBsZXQgcmVzdWx0czogc3RyaW5nW11bXSA9IFtdO1xuICAgIGlmIChsaXN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZmlyc3QgPSBsaXN0c1swXTtcbiAgICAgIGxldCB0YWlsID0gbGlzdHMuc2xpY2UoMCkuc3BsaWNlKDEpO1xuICAgICAgbGV0IHJlbWFpbmluZyA9IHRoaXMuZ2V0Q2FydGVzaWFuUHJvZHVjdCh0YWlsKTtcbiAgICAgIGZpcnN0LmZvckVhY2goY29uZGl0aW9uID0+IHtcbiAgICAgICAgaWYgKHJlbWFpbmluZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmVtYWluaW5nLmZvckVhY2gocmxpc3QgPT4ge1xuICAgICAgICAgICAgbGV0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNvbmRpdGlvbik7XG4gICAgICAgICAgICBybGlzdC5mb3JFYWNoKHIgPT4gcmVzdWx0LnB1c2gocikpO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICByZXN1bHQucHVzaChjb25kaXRpb24pO1xuICAgICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIG1lcmdlKG5vZGU6IEJibk5vZGUsIHBhcmVudHM6IEJibk5vZGVbXSk6IEJibk5vZGVbXSB7XG4gICAgbGV0IG5vZGVzOiBCYm5Ob2RlW10gPSBbXTtcbiAgICBwYXJlbnRzLmZvckVhY2gobiA9PiBub2Rlcy5wdXNoKG4pKTtcbiAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgIFxuICAgIHJldHVybiBub2RlcztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQmJuVXRpbCB7XG4gIHB1YmxpYyBzdGF0aWMgZ2V0SHVhbmdHcmFwaCgpOiBCYm4ge1xuICAgIGxldCBhID0gbmV3IEJibk5vZGUobmV3IFZhcmlhYmxlKDAsICdhJywgbmV3IFNldDxzdHJpbmc+KFsnb24nLCAnb2ZmJ10pKSwgWzAuNSwgMC41XSk7XG4gICAgbGV0IGIgPSBuZXcgQmJuTm9kZShuZXcgVmFyaWFibGUoMSwgJ2InLCBuZXcgU2V0PHN0cmluZz4oWydvbicsICdvZmYnXSkpLCBbMC41LCAwLjUsIDAuNCwgMC42XSk7XG4gICAgbGV0IGMgPSBuZXcgQmJuTm9kZShuZXcgVmFyaWFibGUoMiwgJ2MnLCBuZXcgU2V0PHN0cmluZz4oWydvbicsICdvZmYnXSkpLCBbMC43LCAwLjMsIDAuMiwgMC44XSk7XG4gICAgbGV0IGQgPSBuZXcgQmJuTm9kZShuZXcgVmFyaWFibGUoMywgJ2QnLCBuZXcgU2V0PHN0cmluZz4oWydvbicsICdvZmYnXSkpLCBbMC45LCAwLjEsIDAuNSwgMC41XSk7XG4gICAgbGV0IGUgPSBuZXcgQmJuTm9kZShuZXcgVmFyaWFibGUoNCwgJ2UnLCBuZXcgU2V0PHN0cmluZz4oWydvbicsICdvZmYnXSkpLCBbMC4zLCAwLjcsIDAuNiwgMC40XSk7XG4gICAgbGV0IGYgPSBuZXcgQmJuTm9kZShuZXcgVmFyaWFibGUoNSwgJ2YnLCBuZXcgU2V0PHN0cmluZz4oWydvbicsICdvZmYnXSkpLCBbMC4wMSwgMC45OSwgMC4wMSwgMC45OSwgMC4wMSwgMC45OSwgMC45OSwgMC4wMV0pO1xuICAgIGxldCBnID0gbmV3IEJibk5vZGUobmV3IFZhcmlhYmxlKDYsICdnJywgbmV3IFNldDxzdHJpbmc+KFsnb24nLCAnb2ZmJ10pKSwgWzAuOCwgMC4yLCAwLjEsIDAuOV0pO1xuICAgIGxldCBoID0gbmV3IEJibk5vZGUobmV3IFZhcmlhYmxlKDcsICdoJywgbmV3IFNldDxzdHJpbmc+KFsnb24nLCAnb2ZmJ10pKSwgWzAuMDUsIDAuOTUsIDAuOTUsIDAuMDUsIDAuOTUsIDAuMDUsIDAuOTUsIDAuMDVdKTtcbiAgICBcbiAgICBsZXQgYmJuID0gbmV3IEJibigpXG4gICAgICAuYWRkTm9kZShhKVxuICAgICAgLmFkZE5vZGUoYilcbiAgICAgIC5hZGROb2RlKGMpXG4gICAgICAuYWRkTm9kZShkKVxuICAgICAgLmFkZE5vZGUoZSlcbiAgICAgIC5hZGROb2RlKGYpXG4gICAgICAuYWRkTm9kZShnKVxuICAgICAgLmFkZE5vZGUoaClcbiAgICAgIC5hZGRFZGdlKG5ldyBCRWRnZShhLCBiLCBFZGdlVHlwZS5ESVJFQ1RFRCkpXG4gICAgICAuYWRkRWRnZShuZXcgQkVkZ2UoYSwgYywgRWRnZVR5cGUuRElSRUNURUQpKVxuICAgICAgLmFkZEVkZ2UobmV3IEJFZGdlKGIsIGQsIEVkZ2VUeXBlLkRJUkVDVEVEKSlcbiAgICAgIC5hZGRFZGdlKG5ldyBCRWRnZShjLCBlLCBFZGdlVHlwZS5ESVJFQ1RFRCkpXG4gICAgICAuYWRkRWRnZShuZXcgQkVkZ2UoZCwgZiwgRWRnZVR5cGUuRElSRUNURUQpKVxuICAgICAgLmFkZEVkZ2UobmV3IEJFZGdlKGUsIGYsIEVkZ2VUeXBlLkRJUkVDVEVEKSlcbiAgICAgIC5hZGRFZGdlKG5ldyBCRWRnZShjLCBnLCBFZGdlVHlwZS5ESVJFQ1RFRCkpXG4gICAgICAuYWRkRWRnZShuZXcgQkVkZ2UoZSwgaCwgRWRnZVR5cGUuRElSRUNURUQpKVxuICAgICAgLmFkZEVkZ2UobmV3IEJFZGdlKGcsIGgsIEVkZ2VUeXBlLkRJUkVDVEVEKSkgYXMgQmJuO1xuICAgIHJldHVybiBiYm47XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvbXBhcmVVdGlsIHtcbiAgcHVibGljIHN0YXRpYyBpbnRDb21wYXJlKHg6IG51bWJlciwgeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHggPCB5KSA/IC0xIDogKCh4ID09PSB5KSA/IDAgOiAxKTtcbiAgfVxuICBcbiAgcHVibGljIHN0YXRpYyBzdHJDb21wYXJlKHg6IHN0cmluZywgeTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4geC5sb2NhbGVDb21wYXJlKHkpO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBCYm4sXG4gIEJibk5vZGUsXG4gIEJFZGdlLFxuICBCTm9kZSxcbiAgQ2xpcXVlLFxuICBDb21wYXJlVXRpbCxcbiAgRGFnLFxuICBKb2luVHJlZSxcbiAgSm9pblRyZWVMaXN0ZW5lcixcbiAgSnRFZGdlLFxuICBQb3RlbnRpYWxVdGlsLFxuICBTZXBTZXQsXG4gIFVnXG59IGZyb20gJy4vZ3JhcGgnO1xuXG5leHBvcnQgY2xhc3MgSW5mZXJlbmNlQ29udHJvbGxlciBpbXBsZW1lbnRzIEpvaW5UcmVlTGlzdGVuZXIge1xuICBwdWJsaWMgc3RhdGljIGFwcGx5KGJibjogQmJuKTogSm9pblRyZWUge1xuICAgIFBvdGVudGlhbEluaXRpYWxpemVyLmluaXQoYmJuKTtcbiAgICBcbiAgICBsZXQgdWcgPSBNb3JhbGl6ZXIubW9yYWxpemUoYmJuKTtcbiAgICBsZXQgY2xpcXVlcyA9IFRyaWFuZ3VsYXRvci50cmlhbmd1bGF0ZSh1Zyk7XG4gICAgbGV0IGpvaW5UcmVlID0gVHJhbnNmb3JtZXIudHJhbnNmb3JtKGNsaXF1ZXMpO1xuICAgIFxuICAgIEluaXRpYWxpemVyLmluaXRpYWxpemUoam9pblRyZWUpO1xuICAgIFByb3BhZ2F0b3IucHJvcGFnYXRlKGpvaW5UcmVlKTtcbiAgICBcbiAgICBqb2luVHJlZS5zZXRMaXN0ZW5lcihuZXcgSW5mZXJlbmNlQ29udHJvbGxlcigpKTtcbiAgICBcbiAgICByZXR1cm4gam9pblRyZWU7XG4gIH1cbiAgXG4gIHB1YmxpYyBldmlkZW5jZVJldHJhY3RlZChqb2ludHJlZTogSm9pblRyZWUpIHtcbiAgICBJbml0aWFsaXplci5pbml0aWFsaXplKGpvaW50cmVlKTtcbiAgICBQcm9wYWdhdG9yLnByb3BhZ2F0ZShqb2ludHJlZSk7XG4gIH1cbiAgXG4gIHB1YmxpYyBldmlkZW5jZVVwZGF0ZWQoam9pbnRyZWU6IEpvaW5UcmVlKSB7XG4gICAgUHJvcGFnYXRvci5wcm9wYWdhdGUoam9pbnRyZWUpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBJbml0aWFsaXplciB7XG4gIHB1YmxpYyBzdGF0aWMgaW5pdGlhbGl6ZShqb2luVHJlZTogSm9pblRyZWUpOiBKb2luVHJlZSB7XG4gICAgam9pblRyZWUuZ2V0Q2xpcXVlcygpLmZvckVhY2goY2xpcXVlID0+IHtcbiAgICAgIGxldCBwb3RlbnRpYWwgPSBQb3RlbnRpYWxVdGlsLmdldFBvdGVudGlhbEZyb21Ob2RlcyhjbGlxdWUubm9kZXMpO1xuICAgICAgam9pblRyZWUuYWRkUG90ZW50aWFsKGNsaXF1ZSwgcG90ZW50aWFsKTtcbiAgICB9KTtcbiAgICBcbiAgICBqb2luVHJlZS5nZXRTZXBTZXRzKCkuZm9yRWFjaChzZXBTZXQgPT4ge1xuICAgICAgbGV0IHBvdGVudGlhbCA9IFBvdGVudGlhbFV0aWwuZ2V0UG90ZW50aWFsRnJvbU5vZGVzKHNlcFNldC5ub2Rlcyk7XG4gICAgICBqb2luVHJlZS5hZGRQb3RlbnRpYWwoc2VwU2V0LCBwb3RlbnRpYWwpO1xuICAgIH0pO1xuICAgIFxuICAgIGpvaW5UcmVlLmdldEJibk5vZGVzKCkuZm9yRWFjaChub2RlID0+IHtcbiAgICAgIGxldCBjbGlxdWUgPSB0aGlzLmdldENsaXF1ZShub2RlLCBqb2luVHJlZSk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhub2RlLnZhcmlhYmxlLm5hbWUgKyAnIG1hcHBlZCB0byBjbGlxdWUgJyArIGNsaXF1ZS50b1N0cmluZygpKTtcbiAgICAgIGxldCBwMSA9IGpvaW5UcmVlLnBvdGVudGlhbHMuZ2V0KGNsaXF1ZS5pZCk7XG4gICAgICBsZXQgcDIgPSBub2RlLnBvdGVudGlhbDtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHAxLnRvU3RyaW5nKCkpO1xuICAgICAgLy8gY29uc29sZS5sb2coJz4+Pj4nKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHAyLnRvU3RyaW5nKCkpO1xuICAgICAgLy8gY29uc29sZS5sb2coJy0tLS0nKTtcbiAgICAgIFBvdGVudGlhbFV0aWwubXVsdGlwbHkocDEsIHAyKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHAxLnRvU3RyaW5nKCkpO1xuICAgICAgLy8gY29uc29sZS5sb2coJyoqKionKTtcbiAgICB9KTtcbiAgICBcbiAgICBqb2luVHJlZS5nZXRCYm5Ob2RlcygpLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICBub2RlLnZhcmlhYmxlLnZhbHVlcy5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgICAgbGV0IGNsaXF1ZSA9IG5vZGUubWV0YWRhdGEuZ2V0KCdwYXJlbnQuY2xpcXVlJykgYXMgQ2xpcXVlO1xuICAgICAgICBsZXQgY2xpcXVlUG90ZW50aWFsID0gam9pblRyZWUucG90ZW50aWFscy5nZXQoY2xpcXVlLmlkKTtcbiAgICAgICAgbGV0IG5vZGVQb3RlbnRpYWwgPSBqb2luVHJlZS5nZXRFdmlkZW5jZShub2RlLCB2YWx1ZSk7XG4gICAgICAgIFBvdGVudGlhbFV0aWwubXVsdGlwbHkoY2xpcXVlUG90ZW50aWFsLCBub2RlUG90ZW50aWFsKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coY2xpcXVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhjbGlxdWVQb3RlbnRpYWwudG9TdHJpbmcoKSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gam9pblRyZWU7XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGdldENsaXF1ZShub2RlOiBCYm5Ob2RlLCBqb2ludHJlZTogSm9pblRyZWUpOiBDbGlxdWUge1xuICAgIGxldCBjbGlxdWU6IENsaXF1ZTtcbiAgICBcbiAgICBpZiAoIW5vZGUubWV0YWRhdGEuaGFzKCdwYXJlbnQuY2xpcXVlJykpIHtcbiAgICAgIGxldCBjbGlxdWVzID0gam9pbnRyZWUuZmluZENsaXF1ZXNXaXRoTm9kZUFuZFBhcmVudHMobm9kZS5pZClcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IENvbXBhcmVVdGlsLmludENvbXBhcmUoYS5pZCwgYi5pZCkpO1xuICAgICAgY2xpcXVlID0gY2xpcXVlc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2xpcXVlID0gbm9kZS5tZXRhZGF0YS5nZXQoJ3BhcmVudC5jbGlxdWUnKSBhcyBDbGlxdWU7XG4gICAgfVxuICAgIG5vZGUuYWRkTWV0YWRhdGEoJ3BhcmVudC5jbGlxdWUnLCBjbGlxdWUpO1xuICAgIFxuICAgIHJldHVybiBjbGlxdWU7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vcmFsaXplciB7XG4gIHB1YmxpYyBzdGF0aWMgbW9yYWxpemUoZGFnOiBEYWcpOiBVZyB7XG4gICAgbGV0IHVnID0gbmV3IFVnKCk7XG4gICAgZGFnLmdldE5vZGVzKCkuZm9yRWFjaChub2RlID0+IHVnLmFkZE5vZGUobm9kZSkpO1xuICAgIGRhZy5nZXRFZGdlcygpLmZvckVhY2goZWRnZSA9PiB1Zy5hZGRFZGdlKG5ldyBCRWRnZShlZGdlLmxocywgZWRnZS5yaHMpKSk7XG4gICAgZGFnLmdldE5vZGVzKCkuZm9yRWFjaChub2RlID0+IHtcbiAgICAgIGxldCBwYXJlbnRzID0gQXJyYXkuZnJvbShkYWcuZ2V0UGFyZW50cyhub2RlLmlkKSk7XG4gICAgICBsZXQgc2l6ZSA9IHBhcmVudHMubGVuZ3RoO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgbGV0IHBhMSA9IGRhZy5nZXROb2RlKHBhcmVudHNbaV0pO1xuICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBzaXplOyBqKyspIHtcbiAgICAgICAgICBsZXQgcGEyID0gZGFnLmdldE5vZGUocGFyZW50c1tqXSk7XG4gICAgICAgICAgdWcuYWRkRWRnZShuZXcgQkVkZ2UocGExLCBwYTIpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGRhZy5nZXROb2RlcygpLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICBsZXQgcGFyZW50cyA9IEFycmF5LmZyb20oZGFnLmdldFBhcmVudHMobm9kZS5pZCkpLm1hcChpZCA9PiBkYWcuZ2V0Tm9kZShpZCkpO1xuICAgICAgbm9kZS5hZGRNZXRhZGF0YSgncGFyZW50cycsIHBhcmVudHMpO1xuICAgIH0pO1xuICAgIHJldHVybiB1ZztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUG90ZW50aWFsSW5pdGlhbGl6ZXIge1xuICBwdWJsaWMgc3RhdGljIGluaXQoYmJuOiBCYm4pIHtcbiAgICBiYm4uZ2V0Tm9kZXMoKS5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgbGV0IGJibk5vZGUgPSBub2RlIGFzIEJibk5vZGU7XG4gICAgICBsZXQgcGFyZW50cyA9IEFycmF5LmZyb20oYmJuLmdldFBhcmVudHMobm9kZS5pZCkpLm1hcChpZCA9PiBiYm4uZ2V0Tm9kZShpZCkgYXMgQmJuTm9kZSk7XG4gICAgICBiYm5Ob2RlLnBvdGVudGlhbCA9IFBvdGVudGlhbFV0aWwuZ2V0UG90ZW50aWFsKGJibk5vZGUsIHBhcmVudHMpO1xuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFByb3BhZ2F0b3Ige1xuICBwdWJsaWMgc3RhdGljIHByb3BhZ2F0ZShqb2luVHJlZTogSm9pblRyZWUpOiBKb2luVHJlZSB7XG4gICAgbGV0IGNsaXF1ZXMgPSBqb2luVHJlZS5nZXRDbGlxdWVzKCkuc29ydCgoYSwgYikgPT4gQ29tcGFyZVV0aWwuaW50Q29tcGFyZShhLmlkLCBiLmlkKSk7XG4gICAgbGV0IHggPSBjbGlxdWVzWzBdO1xuICAgIC8vIGNvbnNvbGUubG9nKHgudG9TdHJpbmcoKSk7XG4gICAgXG4gICAgam9pblRyZWUudW5tYXJrQ2xpcXVlcygpO1xuICAgIHRoaXMuY29sbGVjdEV2aWRlbmNlKGpvaW5UcmVlLCB4KTtcbiAgICBcbiAgICBqb2luVHJlZS51bm1hcmtDbGlxdWVzKCk7XG4gICAgdGhpcy5kaXN0cmlidXRlRXZpZGVuY2Uoam9pblRyZWUsIHgpO1xuICAgIFxuICAgIHJldHVybiBqb2luVHJlZTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgY29sbGVjdEV2aWRlbmNlKGpvaW50cmVlOiBKb2luVHJlZSwgc3RhcnQ6IENsaXF1ZSkge1xuICAgIGxldCBjb2xsZWN0b3IgPSBuZXcgRXZpZGVuY2VDb2xsZWN0b3Ioam9pbnRyZWUsIHN0YXJ0KTtcbiAgICBjb2xsZWN0b3Iuc3RhcnQoKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgZGlzdHJpYnV0ZUV2aWRlbmNlKGpvaW50cmVlOiBKb2luVHJlZSwgc3RhcnQ6IENsaXF1ZSkge1xuICAgIGxldCBkaXN0cmlidXRvciA9IG5ldyBFdmlkZW5jZURpc3RyaWJ1dG9yKGpvaW50cmVlLCBzdGFydCk7XG4gICAgZGlzdHJpYnV0b3Iuc3RhcnQoKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVHJhbnNmb3JtZXIge1xuICBwdWJsaWMgc3RhdGljIHRyYW5zZm9ybShjbGlxdWVzOiBDbGlxdWVbXSk6IEpvaW5UcmVlIHtcbiAgICBsZXQgam9pbnRyZWUgPSBuZXcgSm9pblRyZWUoKTtcbiAgICBsZXQgc2VwU2V0cyA9IHRoaXMuZ2V0U2VwU2V0cyhjbGlxdWVzKTtcbiAgICBsZXQgbiA9IChjbGlxdWVzLmxlbmd0aCAtIDEpICogMjtcbiAgICBsZXQgdG90YWwgPSAwO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VwU2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHNlcFNldCA9IHNlcFNldHNbaV07XG4gICAgICBqb2ludHJlZS5hZGRFZGdlKG5ldyBKdEVkZ2Uoc2VwU2V0KSk7XG4gICAgICB0b3RhbCArPSAyO1xuICAgICAgaWYgKHRvdGFsID09PSBuKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gam9pbnRyZWU7XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGdldFNlcFNldHMoY2xpcXVlczogQ2xpcXVlW10pOiBTZXBTZXRbXSB7XG4gICAgbGV0IHNlcFNldHM6IFNlcFNldFtdID0gW107XG4gICAgbGV0IHNpemUgPSBjbGlxdWVzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgc2l6ZTsgaisrKSB7XG4gICAgICAgIHNlcFNldHMucHVzaChuZXcgU2VwU2V0KGNsaXF1ZXNbaV0sIGNsaXF1ZXNbal0pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNlcFNldHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgbGV0IHJlc3VsdCA9IC0xICogQ29tcGFyZVV0aWwuaW50Q29tcGFyZShhLmdldE1hc3MoKSwgYi5nZXRNYXNzKCkpO1xuICAgICAgaWYgKDAgPT09IHJlc3VsdCkge1xuICAgICAgICByZXN1bHQgPSBDb21wYXJlVXRpbC5pbnRDb21wYXJlKGEuZ2V0Q29zdCgpLCBiLmdldENvc3QoKSk7XG4gICAgICAgIGlmICgwID09PSByZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSBDb21wYXJlVXRpbC5pbnRDb21wYXJlKGEuaWQsIGIuaWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRyaWFuZ3VsYXRvciB7XG4gIHB1YmxpYyBzdGF0aWMgdHJpYW5ndWxhdGUobTogVWcpOiBDbGlxdWVbXSB7XG4gICAgbGV0IGNsaXF1ZXM6IENsaXF1ZVtdID0gW107XG4gICAgbGV0IG1tID0gdGhpcy5kdXBsaWNhdGUobSk7XG4gICAgd2hpbGUgKG1tLmdldE5vZGVzKCkubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IG5vZGVDbGlxdWUgPSB0aGlzLnNlbGVjdE5vZGUobW0pO1xuICAgICAgXG4gICAgICBsZXQgY2xpcXVlID0gbmV3IENsaXF1ZShub2RlQ2xpcXVlLmdldEJibk5vZGVzKCkpO1xuICAgICAgXG4gICAgICBpZiAoIXRoaXMuaXNTdWJzZXQoY2xpcXVlcywgY2xpcXVlKSkge1xuICAgICAgICBjbGlxdWVzLnB1c2goY2xpcXVlKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbW0ucmVtb3ZlTm9kZShub2RlQ2xpcXVlLm5vZGUuaWQpO1xuICAgICAgXG4gICAgICBub2RlQ2xpcXVlLmVkZ2VzLmZvckVhY2goZSA9PiB7XG4gICAgICAgIG0uYWRkRWRnZShlKTtcbiAgICAgICAgbW0uYWRkRWRnZShlKTtcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBjbGlxdWVzO1xuICB9XG4gIFxuICBwcml2YXRlIHN0YXRpYyBkdXBsaWNhdGUoZzogVWcpOiBVZyB7XG4gICAgbGV0IHVnID0gbmV3IFVnKCk7XG4gICAgZy5nZXROb2RlcygpLmZvckVhY2gobiA9PiB1Zy5hZGROb2RlKG4pKTtcbiAgICBnLmdldEVkZ2VzKCkuZm9yRWFjaChlID0+IHVnLmFkZEVkZ2UoZSkpO1xuICAgIHJldHVybiB1ZztcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgc2VsZWN0Tm9kZShtOiBVZyk6IE5vZGVDbGlxdWUge1xuICAgIGxldCBjbGlxdWVzID0gbS5nZXROb2RlcygpXG4gICAgICAubWFwKG5vZGUgPT4ge1xuICAgICAgICBsZXQgd2VpZ2h0ID0gdGhpcy5nZXRXZWlnaHQobm9kZSwgbSk7XG4gICAgICAgIGxldCBlZGdlcyA9IHRoaXMuZ2V0RWRnZXNUb0FkZChub2RlLCBtKTtcbiAgICAgICAgbGV0IG5laWdoYm9ycyA9IEFycmF5LmZyb20obS5nZXROZWlnaGJvcnMobm9kZS5pZCkpLm1hcChpZCA9PiBtLmdldE5vZGUoaWQpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlQ2xpcXVlKG5vZGUsIG5laWdoYm9ycywgd2VpZ2h0LCBlZGdlcyk7XG4gICAgICB9KVxuICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IENvbXBhcmVVdGlsLmludENvbXBhcmUoYS5lZGdlcy5sZW5ndGgsIGIuZWRnZXMubGVuZ3RoKTtcbiAgICAgICAgaWYgKDAgPT09IHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdCA9IENvbXBhcmVVdGlsLmludENvbXBhcmUoYS53ZWlnaHQsIGIud2VpZ2h0KTtcbiAgICAgICAgICBpZiAoMCA9PT0gcmVzdWx0KSB7XG4gICAgICAgICAgICByZXN1bHQgPSBDb21wYXJlVXRpbC5pbnRDb21wYXJlKGEubm9kZS5pZCwgYi5ub2RlLmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0pO1xuICAgIHJldHVybiBjbGlxdWVzWzBdO1xuICB9XG4gIFxuICBwcml2YXRlIHN0YXRpYyBnZXRXZWlnaHQobjogQk5vZGUsIG06IFVnKSB7XG4gICAgbGV0IHdlaWdodCA9IChuIGFzIEJibk5vZGUpLmdldFdlaWdodCgpO1xuICAgIEFycmF5LmZyb20obS5nZXROZWlnaGJvcnMobi5pZCkpXG4gICAgICAubWFwKGlkID0+IG0uZ2V0Tm9kZShpZCkpXG4gICAgICAuZm9yRWFjaChuZWlnaGJvciA9PiB3ZWlnaHQgKj0gKG5laWdoYm9yIGFzIEJibk5vZGUpLmdldFdlaWdodCgpKTtcbiAgICByZXR1cm4gd2VpZ2h0O1xuICB9XG4gIFxuICBwcml2YXRlIHN0YXRpYyBnZXRFZGdlc1RvQWRkKG46IEJOb2RlLCBtOiBVZyk6IEJFZGdlW10ge1xuICAgIGxldCBlZGdlczogQkVkZ2VbXSA9IFtdO1xuICAgIGxldCBuZWlnaGJvcnMgPSBBcnJheS5mcm9tKG0uZ2V0TmVpZ2hib3JzKG4uaWQpKS5tYXAoaWQgPT4gbS5nZXROb2RlKGlkKSk7XG4gICAgbGV0IHNpemUgPSBuZWlnaGJvcnMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICBsZXQgbmUxID0gbmVpZ2hib3JzW2ldO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaXplOyBqKyspIHtcbiAgICAgICAgbGV0IG5lMiA9IG5laWdoYm9yc1tqXTtcbiAgICAgICAgaWYgKCFtLmVkZ2VFeGlzdHMobmUxLmlkLCBuZTIuaWQpKSB7XG4gICAgICAgICAgZWRnZXMucHVzaChuZXcgQkVkZ2UobmUxLCBuZTIpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZWRnZXM7XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGlzU3Vic2V0KGNsaXF1ZXM6IENsaXF1ZVtdLCBjbGlxdWU6IENsaXF1ZSk6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2xpcXVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGNsaXF1ZXNbaV0uaXNTdXBlcnNldChjbGlxdWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuY2xhc3MgTm9kZUNsaXF1ZSB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBub2RlOiBCTm9kZSwgcHVibGljIG5laWdoYm9yczogQk5vZGVbXSwgcHVibGljIHdlaWdodDogbnVtYmVyLCBwdWJsaWMgZWRnZXM6IEJFZGdlW10pIHtcbiAgXG4gIH1cbiAgXG4gIGdldEJibk5vZGVzKCk6IEJibk5vZGVbXSB7XG4gICAgbGV0IG5vZGVzID0gdGhpcy5uZWlnaGJvcnMuc2xpY2UoMCk7XG4gICAgbm9kZXMucHVzaCh0aGlzLm5vZGUpO1xuICAgIHJldHVybiBub2Rlcy5tYXAobiA9PiAobiBhcyBCYm5Ob2RlKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEV2aWRlbmNlQ29sbGVjdG9yIHtcbiAgY29uc3RydWN0b3IocHVibGljIGpvaW5UcmVlOiBKb2luVHJlZSwgcHVibGljIHN0YXJ0Q2xpcXVlOiBDbGlxdWUpIHtcbiAgXG4gIH1cbiAgXG4gIHB1YmxpYyBzdGFydCgpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnU1RBUlRJTkcgRVZJREVOQ0UgQ09MTEVDVElPTiBmcm9tICcgKyB0aGlzLnN0YXJ0Q2xpcXVlLnRvU3RyaW5nKCkpO1xuICAgIFxuICAgIHRoaXMuc3RhcnRDbGlxdWUubWFyaygpO1xuICAgIHRoaXMuam9pblRyZWUuZ2V0TmVpZ2hib3JzKHRoaXMuc3RhcnRDbGlxdWUuaWQpLmZvckVhY2goc2VwU2V0SWQgPT4ge1xuICAgICAgbGV0IHNlcFNldCA9IHRoaXMuam9pblRyZWUuZ2V0Tm9kZShzZXBTZXRJZCkgYXMgU2VwU2V0O1xuICAgICAgQXJyYXkuZnJvbSh0aGlzLmpvaW5UcmVlLmdldE5laWdoYm9ycyhzZXBTZXRJZCkpXG4gICAgICAgIC5tYXAoaWQgPT4gdGhpcy5qb2luVHJlZS5nZXROb2RlKGlkKSBhcyBDbGlxdWUpXG4gICAgICAgIC5maWx0ZXIoY2xpcXVlID0+ICFjbGlxdWUuaXNNYXJrZWQoKSlcbiAgICAgICAgLmZvckVhY2goeSA9PiB7XG4gICAgICAgICAgdGhpcy53YWxrKHRoaXMuc3RhcnRDbGlxdWUsIHNlcFNldCwgeSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIFxuICBwcml2YXRlIHdhbGsoeDogQ2xpcXVlLCBzOiBTZXBTZXQsIHk6IENsaXF1ZSkge1xuICAgIHkubWFyaygpO1xuICAgIEFycmF5LmZyb20odGhpcy5qb2luVHJlZS5nZXROZWlnaGJvcnMoeS5pZCkpXG4gICAgICAubWFwKGlkID0+IHRoaXMuam9pblRyZWUuZ2V0Tm9kZShpZCkgYXMgU2VwU2V0KVxuICAgICAgLmZvckVhY2goc2VwU2V0ID0+IHtcbiAgICAgICAgQXJyYXkuZnJvbSh0aGlzLmpvaW5UcmVlLmdldE5laWdoYm9ycyhzZXBTZXQuaWQpKVxuICAgICAgICAgIC5tYXAoaWQgPT4gdGhpcy5qb2luVHJlZS5nZXROb2RlKGlkKSBhcyBDbGlxdWUpXG4gICAgICAgICAgLmZpbHRlcihjbGlxdWUgPT4gIWNsaXF1ZS5pc01hcmtlZCgpKVxuICAgICAgICAgIC5mb3JFYWNoKGNsaXF1ZSA9PiB0aGlzLndhbGsoeSwgc2VwU2V0LCBjbGlxdWUpKTtcbiAgICAgIH0pO1xuICAgIFBvdGVudGlhbFV0aWwucGFzc1NpbmdsZU1lc3NhZ2UodGhpcy5qb2luVHJlZSwgeSwgcywgeCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEV2aWRlbmNlRGlzdHJpYnV0b3Ige1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgam9pblRyZWU6IEpvaW5UcmVlLCBwdWJsaWMgc3RhcnRDbGlxdWU6IENsaXF1ZSkge1xuICBcbiAgfVxuICBcbiAgcHVibGljIHN0YXJ0KCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCdTVEFSVElORyBFVklERU5DRSBESVNUUklCVVRJT04gZnJvbSAnICsgdGhpcy5zdGFydENsaXF1ZS50b1N0cmluZygpKTtcbiAgICBcbiAgICB0aGlzLnN0YXJ0Q2xpcXVlLm1hcmsoKTtcbiAgICB0aGlzLmpvaW5UcmVlLmdldE5laWdoYm9ycyh0aGlzLnN0YXJ0Q2xpcXVlLmlkKS5mb3JFYWNoKHNlcFNldElkID0+IHtcbiAgICAgIGxldCBzZXBTZXQgPSB0aGlzLmpvaW5UcmVlLmdldE5vZGUoc2VwU2V0SWQpIGFzIFNlcFNldDtcbiAgICAgIEFycmF5LmZyb20odGhpcy5qb2luVHJlZS5nZXROZWlnaGJvcnMoc2VwU2V0SWQpKVxuICAgICAgICAubWFwKGlkID0+IHRoaXMuam9pblRyZWUuZ2V0Tm9kZShpZCkgYXMgQ2xpcXVlKVxuICAgICAgICAuZmlsdGVyKGNsaXF1ZSA9PiAhY2xpcXVlLmlzTWFya2VkKCkpXG4gICAgICAgIC5mb3JFYWNoKHkgPT4ge1xuICAgICAgICAgIFBvdGVudGlhbFV0aWwucGFzc1NpbmdsZU1lc3NhZ2UodGhpcy5qb2luVHJlZSwgdGhpcy5zdGFydENsaXF1ZSwgc2VwU2V0LCB5KTtcbiAgICAgICAgICB0aGlzLndhbGsodGhpcy5zdGFydENsaXF1ZSwgc2VwU2V0LCB5KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgXG4gIHByaXZhdGUgd2Fsayh4OiBDbGlxdWUsIHM6IFNlcFNldCwgeTogQ2xpcXVlKSB7XG4gICAgeS5tYXJrKCk7XG4gICAgQXJyYXkuZnJvbSh0aGlzLmpvaW5UcmVlLmdldE5laWdoYm9ycyh5LmlkKSlcbiAgICAgIC5tYXAoaWQgPT4gdGhpcy5qb2luVHJlZS5nZXROb2RlKGlkKSBhcyBTZXBTZXQpXG4gICAgICAuZm9yRWFjaChzZXBTZXQgPT4ge1xuICAgICAgICBBcnJheS5mcm9tKHRoaXMuam9pblRyZWUuZ2V0TmVpZ2hib3JzKHNlcFNldC5pZCkpXG4gICAgICAgICAgLm1hcChpZCA9PiB0aGlzLmpvaW5UcmVlLmdldE5vZGUoaWQpIGFzIENsaXF1ZSlcbiAgICAgICAgICAuZmlsdGVyKGNsaXF1ZSA9PiAhY2xpcXVlLmlzTWFya2VkKCkpXG4gICAgICAgICAgLmZvckVhY2goY2xpcXVlID0+IHtcbiAgICAgICAgICAgIFBvdGVudGlhbFV0aWwucGFzc1NpbmdsZU1lc3NhZ2UodGhpcy5qb2luVHJlZSwgeSwgc2VwU2V0LCBjbGlxdWUpO1xuICAgICAgICAgICAgdGhpcy53YWxrKHksIHNlcFNldCwgY2xpcXVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuICB9XG59IiwiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuXG5jb25zdCBPVVRfTEVGVCA9IDEsIE9VVF9UT1AgPSAyLCBPVVRfUklHSFQgPSA0LCBPVVRfQk9UVE9NID0gODtcbmNvbnN0IE1BWF9OT0RFX05BTUVfTEVOR1RIID0gMTU7XG5jb25zdCBNQVhfVkFMVUVfTEVOR1RIID0gNTtcbmNvbnN0IE1BWF9QQ1RfVkFMVUUgPSA2O1xuY29uc3QgREVGQVVMVF9QQURESU5HID0gJ1xcdTAwQTAnO1xuXG5leHBvcnQgY2xhc3MgVkdyYXBoIHtcbiAgbm9kZXM6IE1hcDxudW1iZXIsIFZOb2RlPjtcbiAgZWRnZXM6IE1hcDxudW1iZXIsIFZFZGdlPjtcbiAgXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubm9kZXMgPSBuZXcgTWFwPG51bWJlciwgVk5vZGU+KCk7XG4gICAgdGhpcy5lZGdlcyA9IG5ldyBNYXA8bnVtYmVyLCBWRWRnZT4oKTtcbiAgfVxuICBcbiAgcHVibGljIGdldE5vZGVzKCk6IFZOb2RlW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMubm9kZXMudmFsdWVzKCkpO1xuICB9XG4gIFxuICBwdWJsaWMgZ2V0RWRnZXMoKTogVkVkZ2VbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5lZGdlcy52YWx1ZXMoKSk7XG4gIH1cbiAgXG4gIHB1YmxpYyBhZGROb2RlKG5vZGU6IFZOb2RlKTogVkdyYXBoIHtcbiAgICB0aGlzLm5vZGVzLnNldChub2RlLmlkLCBub2RlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgcHVibGljIGFkZEVkZ2UoZWRnZTogVkVkZ2UpOiBWR3JhcGgge1xuICAgIHRoaXMuZWRnZXMuc2V0KGVkZ2UuZ2V0SWQoKSwgZWRnZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXROb2RlKGlkOiBudW1iZXIpOiBWTm9kZSB7XG4gICAgcmV0dXJuIHRoaXMubm9kZXMuZ2V0KGlkKTtcbiAgfVxuICBcbiAgcHVibGljIGdldFBhdGgoaWQxOiBudW1iZXIsIGlkMjogbnVtYmVyKTogVlBhdGgge1xuICAgIHJldHVybiB0aGlzLmdldE5vZGUoaWQxKS5nZXRQYXRoKHRoaXMuZ2V0Tm9kZShpZDIpKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVkVkZ2Uge1xuICBwdWJsaWMgcG9pbnRzOiBWUG9pbnRbXTtcbiAgXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBwYXJlbnQ6IFZOb2RlLCBwdWJsaWMgY2hpbGQ6IFZOb2RlKSB7XG4gICAgdGhpcy5wb2ludHMgPSBbXTtcbiAgfVxuICBcbiAgcHVibGljIGdldElkKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIFV0aWwuaGFzaE9mU3RyKHRoaXMudG9TdHJpbmcoKSk7XG4gIH1cbiAgXG4gIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnBhcmVudC5sYWJlbCArICctPicgKyB0aGlzLmNoaWxkLmxhYmVsO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBWTm9kZSB7XG4gIHB1YmxpYyB3aWR0aCA9IDE1MDtcbiAgcHVibGljIGhlaWdodDogbnVtYmVyO1xuICBwdWJsaWMgcG9pbnQ6IFZQb2ludDtcbiAgXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBpZDogbnVtYmVyLCBwdWJsaWMgbGFiZWw6IHN0cmluZywgcHVibGljIHZhbHVlczogc3RyaW5nW10sIHB1YmxpYyBwcm9iczogbnVtYmVyW10pIHtcbiAgICB0aGlzLnByb2JzID0gdGhpcy5ub3JtYWxpemVQcm9icyh0aGlzLnByb2JzKTtcbiAgICB0aGlzLmhlaWdodCA9IHZhbHVlcy5sZW5ndGggKiAxNSArIDIwO1xuICAgIHRoaXMucG9pbnQgPSBuZXcgVlBvaW50KE1hdGgucmFuZG9tKCksIE1hdGgucmFuZG9tKCkpO1xuICB9XG4gIFxuICBwdWJsaWMgdXBkYXRlUG9pbnQocG9pbnQ6IFZQb2ludCk6IHZvaWQge1xuICAgIHRoaXMucG9pbnQueCA9IHBvaW50Lng7XG4gICAgdGhpcy5wb2ludC55ID0gcG9pbnQueTtcbiAgfVxuICBcbiAgcHVibGljIGdldFJlZklkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMubGFiZWw7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRUcmFuc2xhdGlvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyB0aGlzLnBvaW50LnggKyAnLCcgKyB0aGlzLnBvaW50LnkgKyAnKSc7XG4gIH1cbiAgXG4gIHB1YmxpYyBnZXRNaWQoKTogVlBvaW50IHtcbiAgICBsZXQgZHggPSB0aGlzLndpZHRoIC8gMi4wICsgdGhpcy5wb2ludC54O1xuICAgIGxldCBkeSA9IHRoaXMuaGVpZ2h0IC8gMi4wICsgdGhpcy5wb2ludC55O1xuICAgIHJldHVybiBuZXcgVlBvaW50KGR4LCBkeSk7XG4gIH1cbiAgXG4gIHB1YmxpYyBub3JtYWxpemVQcm9icyhwcm9iczogbnVtYmVyW10pOiBudW1iZXJbXSB7XG4gICAgbGV0IHN1bSA9IHByb2JzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIpO1xuICAgIHJldHVybiBwcm9icy5tYXAocCA9PiBwIC8gc3VtKTtcbiAgfVxuICBcbiAgcHVibGljIGdldFBhdGgodGhhdDogVk5vZGUpOiBWUGF0aCB7XG4gICAgbGV0IHRoZXRhID0gdGhhdC5wb2ludC5nZXRUaGV0YSh0aGlzLnBvaW50KTtcbiAgICBsZXQgcDEgPSB0aGlzLmdldFBvaW50KHRoZXRhKTtcbiAgICBsZXQgcDIgPSB0aGF0LmdldFBvaW50KHRoZXRhICsgTWF0aC5QSSk7XG4gICAgbGV0IGVycm9yID0gcDEuZXJyb3IgfHwgcDIuZXJyb3IgPyB0cnVlIDogZmFsc2U7XG4gICAgXG4gICAgbGV0IHBhdGggPSBuZXcgVlBhdGgocDEsIHAyKTtcbiAgICBwYXRoLmVycm9yID0gZXJyb3I7XG4gICAgXG4gICAgcmV0dXJuIHBhdGg7XG4gIH1cbiAgXG4gIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmlkICsgJ3wnICtcbiAgICAgIHRoaXMubGFiZWwgKyAnfCcgK1xuICAgICAgdGhpcy52YWx1ZXMuam9pbignLCcpICsgJ3wnICtcbiAgICAgIHRoaXMucHJvYnMuam9pbignLCcpICsgJ3wnICtcbiAgICAgIHRoaXMucG9pbnQudG9TdHJpbmcoKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBnZXRQb2ludCh0aGV0YTogbnVtYmVyKTogVlBvaW50IHtcbiAgICBsZXQgYyA9IHRoaXMuZ2V0TWlkKCk7XG4gICAgbGV0IGN4ID0gYy54O1xuICAgIGxldCBjeSA9IGMueTtcbiAgICBsZXQgdyA9IHRoaXMud2lkdGggLyAyLjA7XG4gICAgbGV0IGggPSB0aGlzLmhlaWdodCAvIDIuMDtcbiAgICBsZXQgZCA9IHRoaXMuZ2V0RGlzdGFuY2UobmV3IFZQb2ludChjeCwgY3kpLCBuZXcgVlBvaW50KGN4ICsgdywgY3kgKyBoKSk7XG4gICAgbGV0IHggPSBjeCArIGQgKiBNYXRoLmNvcyh0aGV0YSk7XG4gICAgbGV0IHkgPSBjeSArIGQgKiBNYXRoLnNpbih0aGV0YSk7XG4gICAgbGV0IG9jb2RlID0gdGhpcy5nZXRPdXRDb2RlKG5ldyBWUG9pbnQoeCwgeSkpO1xuICAgIFxuICAgIGxldCBweCA9IDA7XG4gICAgbGV0IHB5ID0gMDtcbiAgICBsZXQgZXJyb3IgPSBmYWxzZTtcbiAgICBcbiAgICBzd2l0Y2ggKG9jb2RlKSB7XG4gICAgICBjYXNlIE9VVF9UT1A6XG4gICAgICAgIHB4ID0gY3ggLSBoICogKCh4IC0gY3gpIC8gKHkgLSBjeSkpO1xuICAgICAgICBweSA9IGN5IC0gaDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE9VVF9MRUZUOlxuICAgICAgICBweCA9IGN4IC0gdztcbiAgICAgICAgcHkgPSBjeSAtIHcgKiAoKHkgLSBjeSkgLyAoeCAtIGN4KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBPVVRfQk9UVE9NOlxuICAgICAgICBweCA9IGN4ICsgaCAqICgoeCAtIGN4KSAvICh5IC0gY3kpKTtcbiAgICAgICAgcHkgPSBjeSArIGg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBPVVRfUklHSFQ6XG4gICAgICAgIHB4ID0gY3ggKyB3O1xuICAgICAgICBweSA9IGN5ICsgdyAqICgoeSAtIGN5KSAvICh4IC0gY3gpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBlcnJvciA9IHRydWU7XG4gICAgfVxuICAgIFxuICAgIGxldCBwID0gbmV3IFZQb2ludChweCwgcHkpO1xuICAgIHAuZXJyb3IgPSBlcnJvcjtcbiAgICByZXR1cm4gcDtcbiAgfVxuICBcbiAgcHJpdmF0ZSBnZXREaXN0YW5jZShwMTogVlBvaW50LCBwMjogVlBvaW50KTogbnVtYmVyIHtcbiAgICBsZXQgeCA9IHAxLnggLSBwMi54O1xuICAgIGxldCB5ID0gcDEueSAtIHAyLnk7XG4gICAgbGV0IGQgPSBNYXRoLnNxcnQoKHggKiB4KSArICh5ICogeSkpO1xuICAgIHJldHVybiBkO1xuICB9XG4gIFxuICBwcml2YXRlIGdldE91dENvZGUocG9pbnQ6IFZQb2ludCk6IG51bWJlciB7XG4gICAgbGV0IG91dCA9IDA7XG4gICAgXG4gICAgaWYgKHRoaXMud2lkdGggPD0gMCkge1xuICAgICAgb3V0IHw9IE9VVF9MRUZUIHwgT1VUX1JJR0hUO1xuICAgIH0gZWxzZSBpZiAocG9pbnQueCA8IHRoaXMucG9pbnQueCkge1xuICAgICAgb3V0IHw9IE9VVF9MRUZUO1xuICAgIH0gZWxzZSBpZiAocG9pbnQueCA+IHRoaXMucG9pbnQueCArIHRoaXMud2lkdGgpIHtcbiAgICAgIG91dCB8PSBPVVRfUklHSFQ7XG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmhlaWdodCA8PSAwKSB7XG4gICAgICBvdXQgfD0gT1VUX1RPUCB8IE9VVF9CT1RUT007XG4gICAgfSBlbHNlIGlmIChwb2ludC55IDwgdGhpcy5wb2ludC55KSB7XG4gICAgICBvdXQgfD0gT1VUX1RPUDtcbiAgICB9IGVsc2UgaWYgKHBvaW50LnkgPiB0aGlzLnBvaW50LnkgKyB0aGlzLmhlaWdodCkge1xuICAgICAgb3V0IHw9IE9VVF9CT1RUT007XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBvdXQ7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZQb2ludCB7XG4gIHB1YmxpYyBlcnJvciA9IGZhbHNlO1xuICBcbiAgY29uc3RydWN0b3IocHVibGljIHg6IG51bWJlciwgcHVibGljIHk6IG51bWJlcikge1xuICBcbiAgfVxuICBcbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICcoJyArIHRoaXMueCArICcsJyArIHRoaXMueSArICcpJztcbiAgfVxuICBcbiAgcHVibGljIGdldFRoZXRhKHRoYXQ6IFZQb2ludCk6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy55IC0gdGhhdC55LCB0aGlzLnggLSB0aGF0LngpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBWUGF0aCB7XG4gIHB1YmxpYyBlcnJvciA9IGZhbHNlO1xuICBcbiAgY29uc3RydWN0b3IocHVibGljIHAxOiBWUG9pbnQsIHB1YmxpYyBwMjogVlBvaW50KSB7XG4gIFxuICB9XG4gIFxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5wMS50b1N0cmluZygpICsgJyB0byAnICsgdGhpcy5wMi50b1N0cmluZygpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBVdGlsIHtcbiAgc3RhdGljIGhhc2hPZlN0cihzOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGxldCBoYXNoID0gMDtcbiAgICBpZiAocy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBoYXNoO1xuICAgIH1cbiAgICBcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgbGV0IGNociA9IHMuY2hhckNvZGVBdChpKTtcbiAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIGNocjtcbiAgICAgIGhhc2ggfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXG4gICAgfVxuICAgIHJldHVybiBoYXNoO1xuICB9XG4gIFxuICBzdGF0aWMgaGFzaE9mQXJyKGFycjogc3RyaW5nW10pOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmhhc2hPZlN0cihhcnIuc29ydCgpLmpvaW4oJy0nKSk7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbmZlcmVuY2VFbmdpbmUge1xuICBnZXRHcmFwaCgpOiBWR3JhcGg7XG4gIFxuICB1cGRhdGVFdmlkZW5jZShpZDogbnVtYmVyLCB2YWx1ZTogc3RyaW5nKTogdm9pZDtcbiAgXG4gIGdldFByb2JzKGlkOiBudW1iZXIpOiBudW1iZXJbXTtcbn1cblxuZXhwb3J0IGNsYXNzIE5vT3BJbmZlcmVuY2VFbmdpbmUgaW1wbGVtZW50cyBJbmZlcmVuY2VFbmdpbmUge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgZ3JhcGg6IFZHcmFwaCkge1xuICBcbiAgfVxuICBcbiAgcHVibGljIGdldEdyYXBoKCk6IFZHcmFwaCB7XG4gICAgcmV0dXJuIHRoaXMuZ3JhcGg7XG4gIH1cbiAgXG4gIHB1YmxpYyB1cGRhdGVFdmlkZW5jZShpZDogbnVtYmVyLCB2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG4gIFxuICB9XG4gIFxuICBwdWJsaWMgZ2V0UHJvYnMoaWQ6IG51bWJlcik6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy5ncmFwaC5nZXROb2RlKGlkKS5wcm9icztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmVuZGVyT3B0aW9ucyB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBpZDogc3RyaW5nLCBwdWJsaWMgd2lkdGg6IG51bWJlciwgcHVibGljIGhlaWdodDogbnVtYmVyKSB7XG4gIFxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHcmFwaFJlbmRlcmVyIHtcbiAgZ3JhcGg6IFZHcmFwaDtcbiAgXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBlbmdpbmU6IEluZmVyZW5jZUVuZ2luZSwgcHVibGljIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMpIHtcbiAgICB0aGlzLmdyYXBoID0gdGhpcy5lbmdpbmUuZ2V0R3JhcGgoKTtcbiAgfVxuICBcbiAgcHVibGljIGRyYXcoKTogdm9pZCB7XG4gICAgdGhpcy5pbml0U3ZnKCk7XG4gICAgdGhpcy5sYXlvdXRHcmFwaCgpO1xuICAgIHRoaXMuZHJhd0VkZ2VzKCk7XG4gICAgdGhpcy5kcmF3Tm9kZXMoKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBpbml0U3ZnKCk6IHZvaWQge1xuICAgIGQzLnNlbGVjdCh0aGlzLm9wdGlvbnMuaWQpXG4gICAgICAuYXR0cih7XG4gICAgICAgIHdpZHRoOiB0aGlzLm9wdGlvbnMud2lkdGgsXG4gICAgICAgIGhlaWdodDogdGhpcy5vcHRpb25zLmhlaWdodFxuICAgICAgfSlcbiAgICAgIC5hcHBlbmQoJ2RlZnMnKVxuICAgICAgLmFwcGVuZCgnbWFya2VyJylcbiAgICAgIC5hdHRyKHtcbiAgICAgICAgaWQ6ICdhcnJvdycsXG4gICAgICAgIG1hcmtlcldpZHRoOiAxMCxcbiAgICAgICAgbWFya2VySGVpZ2h0OiAxMCxcbiAgICAgICAgcmVmWDogNSxcbiAgICAgICAgcmVmWTogMyxcbiAgICAgICAgb3JpZW50OiAnYXV0bycsXG4gICAgICAgIG1hcmtlclVuaXRzOiAnc3Ryb2tlV2lkdGgnXG4gICAgICB9KVxuICAgICAgLmFwcGVuZCgncGF0aCcpXG4gICAgICAuYXR0cih7XG4gICAgICAgIGQ6ICdNMCwwIEwwLDYsIEw1LDMgeicsXG4gICAgICAgIGZpbGw6ICcjZjAwJyxcbiAgICAgICAgY2xhc3M6ICdlZGdlLWhlYWQnXG4gICAgICB9KTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBnZXREYWdyZUdyYXBoKCk6IERhZ3JlLkdyYXBoIHtcbiAgICBsZXQgZyA9IG5ldyBkYWdyZS5ncmFwaGxpYi5HcmFwaCgpO1xuICAgIGcuc2V0R3JhcGgoe30pO1xuICAgIGcuc2V0RGVmYXVsdEVkZ2VMYWJlbCgoKSA9PiB7XG4gICAgICByZXR1cm4ge307XG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5ncmFwaC5nZXROb2RlcygpXG4gICAgICAuZm9yRWFjaChuID0+IHtcbiAgICAgICAgZy5zZXROb2RlKG4uZ2V0UmVmSWQoKSwge1xuICAgICAgICAgIGxhYmVsOiBuLmdldFJlZklkKCksXG4gICAgICAgICAgd2lkdGg6IG4ud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiBuLmhlaWdodFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIFxuICAgIHRoaXMuZ3JhcGguZ2V0RWRnZXMoKVxuICAgICAgLmZvckVhY2goZSA9PiB7XG4gICAgICAgIGcuc2V0RWRnZShlLnBhcmVudC5nZXRSZWZJZCgpLCBlLmNoaWxkLmdldFJlZklkKCkpO1xuICAgICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGc7XG4gIH1cbiAgXG4gIHByaXZhdGUgbGF5b3V0R3JhcGgoKTogdm9pZCB7XG4gICAgbGV0IGcgPSB0aGlzLmdldERhZ3JlR3JhcGgoKTtcbiAgICBkYWdyZS5sYXlvdXQoZyk7XG4gICAgXG4gICAgdGhpcy5ncmFwaC5nZXROb2RlcygpXG4gICAgICAuZm9yRWFjaChuID0+IHtcbiAgICAgICAgbGV0IGRhZ3JlTm9kZSA9IGcubm9kZShuLmdldFJlZklkKCkpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGRhZ3JlTm9kZSkge1xuICAgICAgICAgIG4udXBkYXRlUG9pbnQobmV3IFZQb2ludChkYWdyZU5vZGUueCwgZGFncmVOb2RlLnkpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgXG4gICAgdGhpcy5ncmFwaC5nZXRFZGdlcygpXG4gICAgICAuZm9yRWFjaChlID0+IHtcbiAgICAgICAgbGV0IGRhZ3JlRWRnZSA9IGcuZWRnZSh7djogZS5wYXJlbnQuZ2V0UmVmSWQoKSwgdzogZS5jaGlsZC5nZXRSZWZJZCgpfSk7XG4gICAgICAgIGlmIChkYWdyZUVkZ2UpIHtcbiAgICAgICAgICBlLnBvaW50cyA9IEFycmF5LmZyb20oZGFncmVFZGdlLnBvaW50cylcbiAgICAgICAgICAgIC5tYXAocG9pbnQgPT4ge1xuICAgICAgICAgICAgICBsZXQgcCA9IHBvaW50IGFzIGFueTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWUG9pbnQocC54LCBwLnkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG4gIFxuICBwcml2YXRlIGRyYXdFZGdlcygpOiB2b2lkIHtcbiAgICBsZXQgZ3JhcGggPSB0aGlzLmdyYXBoO1xuICAgIGxldCBlZGdlcyA9IGQzLnNlbGVjdCh0aGlzLm9wdGlvbnMuaWQpXG4gICAgICAuc2VsZWN0QWxsKCdsaW5lJylcbiAgICAgIC5kYXRhKGdyYXBoLmdldEVkZ2VzKCkpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZCgnbGluZScpXG4gICAgICAuZWFjaChmdW5jdGlvbiAoZCkge1xuICAgICAgICBsZXQgcGF0aCA9IGdyYXBoLmdldFBhdGgoZC5wYXJlbnQuaWQsIGQuY2hpbGQuaWQpO1xuICAgICAgICBkMy5zZWxlY3QodGhpcykuYXR0cih7XG4gICAgICAgICAgJ2RhdGEtcGFyZW50JzogZC5wYXJlbnQuZ2V0UmVmSWQoKSxcbiAgICAgICAgICAnZGF0YS1jaGlsZCc6IGQuY2hpbGQuZ2V0UmVmSWQoKSxcbiAgICAgICAgICB4MTogcGF0aC5wMS54LFxuICAgICAgICAgIHkxOiBwYXRoLnAxLnksXG4gICAgICAgICAgeDI6IHBhdGgucDIueCxcbiAgICAgICAgICB5MjogcGF0aC5wMi55LFxuICAgICAgICAgIHN0eWxlOiAnc3Ryb2tlOnJnYigyNTUsMCwwKTtzdHJva2Utd2lkdGg6MicsXG4gICAgICAgICAgY2xhc3M6ICdlZGdlLWxpbmUnLFxuICAgICAgICAgICdtYXJrZXItZW5kJzogJ3VybCgjYXJyb3cpJ1xuICAgICAgICB9KTtcbiAgICAgIH0pXG4gIH1cbiAgXG4gIHByaXZhdGUgZHJhd05vZGVzKCk6IHZvaWQge1xuICAgIGxldCBlbmdpbmUgPSB0aGlzLmVuZ2luZTtcbiAgICBsZXQgZ3JhcGggPSB0aGlzLmdyYXBoO1xuICAgIGxldCBmb3JtYXROb2RlTmFtZSA9IHRoaXMuZm9ybWF0Tm9kZU5hbWU7XG4gICAgbGV0IGZvcm1hdFBjdCA9IHRoaXMuZm9ybWF0UGN0O1xuICAgIGxldCBmb3JtYXRWYWx1ZSA9IHRoaXMuZm9ybWF0VmFsdWU7XG4gICAgbGV0IGxlZnRQYWQgPSB0aGlzLmxlZnRQYWQ7XG4gICAgbGV0IHJpZ2h0UGFkID0gdGhpcy5yaWdodFBhZDtcbiAgICBcbiAgICAvLyBzZXQgdGhlIG5vZGUgZ3JvdXBcbiAgICBsZXQgbm9kZXMgPSBkMy5zZWxlY3QodGhpcy5vcHRpb25zLmlkKVxuICAgICAgLnNlbGVjdEFsbCgnZycpXG4gICAgICAuZGF0YShncmFwaC5nZXROb2RlcygpKVxuICAgICAgLmVudGVyKClcbiAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoe1xuICAgICAgICBpZDogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gZC5nZXRSZWZJZCgpXG4gICAgICAgIH0sXG4gICAgICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gZC5nZXRUcmFuc2xhdGlvbigpO1xuICAgICAgICB9LFxuICAgICAgICBjbGFzczogJ25vZGUtZ3JvdXAnXG4gICAgICB9KVxuICAgICAgLm9uKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICBkMy5zZWxlY3RBbGwoJ2cubm9kZS1ncm91cCcpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICBpZiAoYS5pZCAhPT0gZC5pZCkge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgXG4gICAgLy8gZHJhdyB0aGUgbm9kZSByZWN0YW5nbGVcbiAgICBub2Rlcy5hcHBlbmQoJ3JlY3QnKVxuICAgICAgLmF0dHIoe1xuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwLFxuICAgICAgICBjbGFzczogJ25vZGUtc2hhcGUnLFxuICAgICAgICBzdHlsZTogJ3N0cm9rZTojMDAwMDAwOyBmaWxsOm5vbmU7JyxcbiAgICAgICAgd2lkdGg6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgcmV0dXJuIGQud2lkdGg7XG4gICAgICAgIH0sXG4gICAgICAgIGhlaWdodDogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gZC5oZWlnaHQ7XG4gICAgICAgIH0sXG4gICAgICAgICdwb2ludGVyLWV2ZW50cyc6ICd2aXNpYmxlJyxcbiAgICAgICAgJ2RhdGEtbm9kZSc6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgcmV0dXJuIGQuZ2V0UmVmSWQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgXG4gICAgLy8gZHJhdyB0aGUgbm9kZSdzIG5hbWUvbGFiZWxcbiAgICBub2Rlcy5hcHBlbmQoJ3RleHQnKVxuICAgICAgLmF0dHIoe1xuICAgICAgICB4OiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgIHJldHVybiBkLndpZHRoIC8gMjtcbiAgICAgICAgfSxcbiAgICAgICAgeTogMTUsXG4gICAgICAgIGZpbGw6ICdibGFjaycsXG4gICAgICAgIGNsYXNzOiAnbm9kZS1uYW1lJyxcbiAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ21vbm9zcGFjZScsXG4gICAgICAgICdmb250LXNpemUnOiAxNVxuICAgICAgfSlcbiAgICAgIC50ZXh0KGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXROb2RlTmFtZShkLmxhYmVsKTtcbiAgICAgIH0pXG4gICAgICAuc3R5bGUoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpO1xuICAgIFxuICAgIC8vIGRyYXcgdGhlIG5vZGUncyB2YWx1ZSBsYWJlbHNcbiAgICBub2Rlcy5lYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICBsZXQgeSA9IDMwO1xuICAgICAgZC52YWx1ZXMuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgIC5hdHRyKHtcbiAgICAgICAgICAgIHg6IDIsXG4gICAgICAgICAgICB5OiB5LFxuICAgICAgICAgICAgY2xhc3M6ICdub2RlLXZhbHVlJyxcbiAgICAgICAgICAgICdmb250LWZhbWlseSc6ICdtb25vc3BhY2UnLFxuICAgICAgICAgICAgJ2RhdGEtbm9kZSc6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBkLmdldFJlZklkKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2RhdGEtdmFsdWUnOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGxldCBub2RlID0gZSBhcyBWTm9kZTtcbiAgICAgICAgICAgIGxldCBoID0gdGhpcztcbiAgICAgICAgICAgIGxldCB2ID0gaC5hdHRyaWJ1dGVzWydkYXRhLXZhbHVlJ10udmFsdWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGVuZ2luZS51cGRhdGVFdmlkZW5jZShub2RlLmlkLCB2KTtcbiAgICAgICAgICAgIGdyYXBoLmdldE5vZGVzKCkuZm9yRWFjaChub2RlID0+IG5vZGUucHJvYnMgPSBlbmdpbmUuZ2V0UHJvYnMobm9kZS5pZCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBncmFwaC5nZXROb2RlcygpLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICAgICAgICAgIG5vZGUudmFsdWVzLmZvckVhY2goKHZhbHVlLCBqKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGJlbGllZiBiYXJzXG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdG9yID0gJ3JlY3RbZGF0YS1ub2RlPVwiJyArIG5vZGUuZ2V0UmVmSWQoKSArICdcIl1bZGF0YS12YWx1ZT1cIicgKyB2YWx1ZSArICdcIl0nO1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdChzZWxlY3RvcikuYXR0cih7d2lkdGg6IG5vZGUucHJvYnNbal0gKiAxMDB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgcHJvYmFiaWxpdHkgdGV4dHNcbiAgICAgICAgICAgICAgICBzZWxlY3RvciA9ICd0ZXh0W2RhdGEtbm9kZT1cIicgKyBub2RlLmdldFJlZklkKCkgKyAnXCJdW2RhdGEtcHZhbHVlPVwiJyArIHZhbHVlICsgJ1wiXSc7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHNlbGVjdG9yKS50ZXh0KGZvcm1hdFBjdChub2RlLnByb2JzW2pdLCBsZWZ0UGFkKSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdFZhbHVlKHZhbHVlLCBsZWZ0UGFkKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgeSArPSAxNTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIGRyYXcgdGhlIG5vZGUncyBwZXJjZW50YWdlIHRleHRcbiAgICBub2Rlcy5lYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICBsZXQgeSA9IDMwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkLnByb2JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgIC5hdHRyKHtcbiAgICAgICAgICAgIHg6IDIgKyBkLndpZHRoLFxuICAgICAgICAgICAgeTogeSxcbiAgICAgICAgICAgICdmb250LWZhbWlseSc6ICdtb25vc3BhY2UnLFxuICAgICAgICAgICAgY2xhc3M6ICdub2RlLXBjdCcsXG4gICAgICAgICAgICAnZGF0YS1ub2RlJzogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGQuZ2V0UmVmSWQoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnZGF0YS1wdmFsdWUnOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZC52YWx1ZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdFBjdChkLnByb2JzW2ldLCBsZWZ0UGFkKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgeSArPSAxNTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBcbiAgICAvLyBkcmF3IHRoZSBub2RlJ3MgYmVsaWVmIGJhcnNcbiAgICBub2Rlcy5lYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICBsZXQgeSA9IDIwO1xuICAgICAgZC5wcm9icy5mb3JFYWNoKChwcm9iLCBpbmRleCkgPT4ge1xuICAgICAgICBkMy5zZWxlY3QodGhpcylcbiAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAuYXR0cih7XG4gICAgICAgICAgICB4OiA1MCxcbiAgICAgICAgICAgIHk6IHksXG4gICAgICAgICAgICB3aWR0aDogcHJvYiAqIDEwMCxcbiAgICAgICAgICAgIGhlaWdodDogMTAsXG4gICAgICAgICAgICBjbGFzczogJ25vZGUtYmFyJyxcbiAgICAgICAgICAgICdkYXRhLW5vZGUnOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZC5nZXRSZWZJZCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdkYXRhLXZhbHVlJzogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGQudmFsdWVzW2luZGV4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgeSArPSAxNTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIGRyYXcgdGhlIG5vZGUncyBpbnRlcnF1YXJ0aWxlIGxpbmVzXG4gICAgbm9kZXMuZWFjaChmdW5jdGlvbiAoZCkge1xuICAgICAgbGV0IHkxID0gMjA7XG4gICAgICBsZXQgeTIgPSBkLmhlaWdodCAtIDU7XG4gICAgICBsZXQgd2lkdGggPSBkLndpZHRoIC0gNTA7XG4gICAgICBsZXQgeEluYyA9IHdpZHRoIC8gNC4wO1xuICAgICAgbGV0IHggPSA1MCArIHhJbmM7XG4gICAgICBcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgIC5hcHBlbmQoJ2xpbmUnKVxuICAgICAgICAgIC5hdHRyKHtcbiAgICAgICAgICAgIHgxOiB4LFxuICAgICAgICAgICAgeTE6IHkxLFxuICAgICAgICAgICAgeDI6IHgsXG4gICAgICAgICAgICB5MjogeTIsXG4gICAgICAgICAgICBjbGFzczogJ25vZGUtaXFsaW5lJyxcbiAgICAgICAgICAgICdzdHJva2UtZGFzaGFycmF5JzogJzUsIDEnLFxuICAgICAgICAgICAgc3R5bGU6ICdzdHJva2U6YmxhY2s7IHN0cm9rZS13aWR0aDoxcHgnLFxuICAgICAgICAgIH0pO1xuICAgICAgICB4ICs9IHhJbmM7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gc2V0IHRoZSBkcmFnZ2luZyBiZWhhdmlvclxuICAgIGxldCBkcmFnID0gZDMuYmVoYXZpb3IuZHJhZygpXG4gICAgICAub3JpZ2luKChkLCBpKSA9PiB7XG4gICAgICAgIGxldCBub2RlID0gZCBhcyBWTm9kZTtcbiAgICAgICAgcmV0dXJuIG5vZGUucG9pbnQ7XG4gICAgICB9KVxuICAgICAgLm9uKCdkcmFnc3RhcnQnLCAoZCwgaSkgPT4ge1xuICAgICAgICBsZXQgZSA9IGQzLmV2ZW50IGFzIGQzLkJhc2VFdmVudDtcbiAgICAgICAgZS5zb3VyY2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0pXG4gICAgICAub24oJ2RyYWcnLCAoZCwgaSkgPT4ge1xuICAgICAgICBsZXQgZXZlbnQgPSBkMy5ldmVudCBhcyBhbnk7XG4gICAgICAgIGxldCBkM0V2ZW50ID0gZDMuZXZlbnQgYXMgZDMuQmFzZUV2ZW50O1xuICAgICAgICBsZXQgbW91c2VFdmVudCA9IGQzRXZlbnQuc291cmNlRXZlbnQgYXMgTW91c2VFdmVudDtcbiAgICAgICAgbGV0IG5vZGUgPSBkIGFzIFZOb2RlO1xuICAgICAgICBcbiAgICAgICAgbm9kZS5wb2ludC54ID0gZXZlbnQueDtcbiAgICAgICAgbm9kZS5wb2ludC55ID0gZXZlbnQueTtcbiAgICAgICAgXG4gICAgICAgIGxldCBpZCA9ICdnIycgKyBub2RlLmdldFJlZklkKCk7XG4gICAgICAgIGQzLnNlbGVjdChpZCkuYXR0cih7XG4gICAgICAgICAgdHJhbnNmb3JtOiBub2RlLmdldFRyYW5zbGF0aW9uKClcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBsZXQgYXJjcyA9ICdsaW5lW2RhdGEtcGFyZW50PScgKyBub2RlLmdldFJlZklkKCkgKyAnXSc7XG4gICAgICAgIGQzLnNlbGVjdEFsbChhcmNzKVxuICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICBsZXQgZWRnZSA9IGQgYXMgVkVkZ2U7XG4gICAgICAgICAgICBsZXQgcGF0aCA9IGdyYXBoLmdldFBhdGgoZWRnZS5wYXJlbnQuaWQsIGVkZ2UuY2hpbGQuaWQpO1xuICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoe1xuICAgICAgICAgICAgICB4MTogcGF0aC5wMS54LFxuICAgICAgICAgICAgICB5MTogcGF0aC5wMS55LFxuICAgICAgICAgICAgICB4MjogcGF0aC5wMi54LFxuICAgICAgICAgICAgICB5MjogcGF0aC5wMi55XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGFyY3MgPSAnbGluZVtkYXRhLWNoaWxkPScgKyBub2RlLmdldFJlZklkKCkgKyAnXSc7XG4gICAgICAgIGQzLnNlbGVjdEFsbChhcmNzKVxuICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICBsZXQgZWRnZSA9IGQgYXMgVkVkZ2U7XG4gICAgICAgICAgICBsZXQgcGF0aCA9IGdyYXBoLmdldFBhdGgoZWRnZS5wYXJlbnQuaWQsIGVkZ2UuY2hpbGQuaWQpO1xuICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoe1xuICAgICAgICAgICAgICB4MTogcGF0aC5wMS54LFxuICAgICAgICAgICAgICB5MTogcGF0aC5wMS55LFxuICAgICAgICAgICAgICB4MjogcGF0aC5wMi54LFxuICAgICAgICAgICAgICB5MjogcGF0aC5wMi55XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIG5vZGVzLmNhbGwoZHJhZyk7XG4gIH1cbiAgXG4gIHByaXZhdGUgbGVmdFBhZChwYWQ6IHN0cmluZywgdGhyZWhvbGQ6IG51bWJlciwgc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGxldCBvc3RyID0gc3RyO1xuICAgIGlmIChvc3RyLmxlbmd0aCA8IHRocmVob2xkKSB7XG4gICAgICB3aGlsZSAob3N0ci5sZW5ndGggPCB0aHJlaG9sZCkge1xuICAgICAgICBvc3RyID0gcGFkICsgb3N0cjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvc3RyO1xuICAgIH1cbiAgICByZXR1cm4gb3N0cjtcbiAgfVxuICBcbiAgcHJpdmF0ZSByaWdodFBhZChwYWQ6IHN0cmluZywgdGhyZWhvbGQ6IG51bWJlciwgc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGxldCBvc3RyID0gc3RyO1xuICAgIGlmIChvc3RyLmxlbmd0aCA8IHRocmVob2xkKSB7XG4gICAgICB3aGlsZSAob3N0ci5sZW5ndGggPCB0aHJlaG9sZCkge1xuICAgICAgICBvc3RyICs9IHBhZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvc3RyO1xuICAgIH1cbiAgICByZXR1cm4gb3N0cjtcbiAgfVxuICBcbiAgcHJpdmF0ZSBmb3JtYXROb2RlTmFtZSh2OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdi5sZW5ndGggPiBNQVhfTk9ERV9OQU1FX0xFTkdUSCA/IHYuc3Vic3RyKDAsIE1BWF9OT0RFX05BTUVfTEVOR1RIKSA6IHY7XG4gIH1cbiAgXG4gIHByaXZhdGUgZm9ybWF0VmFsdWUodjogc3RyaW5nLCBwYWRkaW5nOiAocGFkOiBzdHJpbmcsIHRocmVzaG9sZDogbnVtYmVyLCBzdHI6IHN0cmluZykgPT4gc3RyaW5nKSB7XG4gICAgbGV0IHZhbHVlID0gdi5sZW5ndGggPiBNQVhfVkFMVUVfTEVOR1RIID8gdi5zdWJzdHIoMCwgTUFYX1ZBTFVFX0xFTkdUSCkgOiB2O1xuICAgIHJldHVybiBwYWRkaW5nKERFRkFVTFRfUEFERElORywgTUFYX1ZBTFVFX0xFTkdUSCwgdmFsdWUpO1xuICB9XG4gIFxuICBwcml2YXRlIGZvcm1hdFBjdChwOiBudW1iZXIsIHBhZGRpbmc6IChwYWQ6IHN0cmluZywgdGhyZXNob2xkOiBudW1iZXIsIHN0cjogc3RyaW5nKSA9PiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBwYWRkaW5nKERFRkFVTFRfUEFERElORywgTUFYX1BDVF9WQUxVRSwgKHAgKiAxMDApLnRvRml4ZWQoMikpO1xuICB9XG59IiwiZXhwb3J0IHtcbiAgQmJuVXRpbCwgVmFyaWFibGUsIEJibk5vZGUsIEJOb2RlLCBCRWRnZSwgRWRnZVR5cGUsIEJibiwgSm9pblRyZWUsIEV2aWRlbmNlVHlwZSwgRXZpZGVuY2VCdWlsZGVyLCBFdmlkZW5jZVxufWZyb20gJy4vZ3JhcGgnO1xuZXhwb3J0IHtJbmZlcmVuY2VDb250cm9sbGVyfSBmcm9tICcuL3BwdGMnO1xuZXhwb3J0IHtWTm9kZSwgVkVkZ2UsIFZHcmFwaCwgR3JhcGhSZW5kZXJlciwgUmVuZGVyT3B0aW9ucywgSW5mZXJlbmNlRW5naW5lLCBOb09wSW5mZXJlbmNlRW5naW5lfSBmcm9tICcuL3Zpeic7Il19
